(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},5471:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.Z,__next_app__:()=>m,originalPathname:()=>o,pages:()=>d,routeModule:()=>x,tree:()=>n}),a(8748),a(4129),a(6083),a(5866);var t=a(3191),i=a(8716),r=a(8001),l=a(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let n=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8748)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4129)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,6083)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/mnt/c/Claude/インストール/nursery-reservation-system/app/admin/page.tsx"],o="/admin/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},2103:(e,s,a)=>{Promise.resolve().then(a.bind(a,6324))},6324:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var t=a(326),i=a(7577),r=a(7382),l=a(4030),c=a(5442);function n({onPageChange:e}){let[s,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)(null),[n,d]=(0,i.useState)(!1),[o,m]=(0,i.useState)([{icon:"bi-calendar-check",label:"今日の予約",value:"0",trend:"+0",trendLabel:"昨日比",trendType:"positive",color:"primary"},{icon:"bi-people",label:"総顧客数",value:"0",trend:"+0",trendLabel:"今月",trendType:"positive",color:"info"},{icon:"bi-file-earmark-text",label:"フォーム数",value:"0",trend:"+0",trendLabel:"今月追加",trendType:"positive",color:"success"}]),[x,u]=(0,i.useState)([]),h=(0,i.useCallback)(async()=>{try{let e=new Date().toISOString().split("T")[0],{data:s,error:a}=await c.O.from("reservations").select("*").gte("created_at",`${e}T00:00:00`).lte("created_at",`${e}T23:59:59`),{data:t,error:i}=await c.O.from("customers").select("*"),{data:r,error:l}=await c.O.from("forms").select("*"),{data:n,error:d}=await c.O.from("reservations").select(`
          id,
          reservation_number,
          status,
          total_amount,
          created_at,
          updated_at,
          customers!fk_reservations_customer_id(full_name)
        `).order("created_at",{ascending:!1}).limit(5),o=s?.length||0,x=t?.length||0,h=r?.length||0;m(e=>e.map((e,s)=>{switch(s){case 0:return{...e,value:o.toString()};case 1:return{...e,value:x.toString()};case 2:return{...e,value:h.toString()};default:return e}}));let g=n?.map(e=>({icon:j(e.status),iconColor:b(e.status),text:`${e.customers?.full_name||"匿名"} - ${e.reservation_number}`,time:p(new Date(e.created_at)),amount:e.total_amount?`\xa5${e.total_amount.toLocaleString()}`:null}))||[];u(g)}catch(e){}},[]),p=e=>{let s=new Date().getTime()-e.getTime(),a=Math.floor(s/6e4),t=Math.floor(s/36e5),i=Math.floor(s/864e5);return a<1?"たった今":a<60?`${a}分前`:t<24?`${t}時間前`:i<7?`${i}日前`:e.toLocaleDateString("ja-JP")},j=e=>{switch(e){case"confirmed":return"bi-check-circle";case"pending":return"bi-clock";case"completed":return"bi-check-circle-fill";case"cancelled":return"bi-x-circle";default:return"bi-info-circle"}},b=e=>{switch(e){case"confirmed":return"text-primary";case"pending":return"text-warning";case"completed":return"text-success";case"cancelled":return"text-danger";default:return"text-info"}},g=async()=>{d(!0);try{let{data:e,error:s}=await c.O.from("forms").select("*");if(s)throw s;let t={totalForms:e?.length||0,activeForms:e?.filter(e=>e.is_active)?.length||0,issues:e?.length===0?["フォームが作成されていません"]:[],recommendations:e?.length===0?["最初のフォームを作成してください"]:["フォーム設定は正常です"]};l(t),a(!0)}catch(e){}finally{d(!1)}};return(0,t.jsxs)("div",{children:[t.jsx("div",{className:"row mb-4",children:t.jsx("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"h2 fw-bold text-dark mb-1",children:"ダッシュボード"}),t.jsx("p",{className:"text-muted mb-0",children:"システムの概要と最新の活動状況"})]}),(0,t.jsxs)("button",{className:"btn btn-primary",onClick:h,children:[t.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"更新"]})]})})}),t.jsx("div",{className:"row g-4 mb-4",children:o.map((e,s)=>t.jsx("div",{className:"col-lg-4 col-md-6",children:t.jsx("div",{className:"dashboard-widget",children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:`dashboard-widget-icon bg-${e.color}-subtle text-${e.color}`,children:t.jsx("i",{className:e.icon})}),t.jsx("div",{className:"dashboard-widget-value",children:e.value}),t.jsx("div",{className:"dashboard-widget-label",children:e.label})]}),(0,t.jsxs)("div",{className:"text-end",children:[(0,t.jsxs)("span",{className:`badge bg-${"positive"===e.trendType?"success":"danger"}-subtle text-${"positive"===e.trendType?"success":"danger"}`,children:[t.jsx("i",{className:`bi bi-arrow-${"positive"===e.trendType?"up":"down"} me-1`}),e.trend]}),t.jsx("div",{className:"text-muted small",children:e.trendLabel})]})]})})},s))}),(0,t.jsxs)("div",{className:"row g-4",children:[t.jsx("div",{className:"col-lg-8",children:(0,t.jsxs)("div",{className:"card h-100",children:[(0,t.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,t.jsxs)("h5",{className:"mb-0",children:[t.jsx("i",{className:"bi bi-activity me-2"}),"最近のアクティビティ"]}),(0,t.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>e?.("reservation-list"),children:[t.jsx("i",{className:"bi bi-eye me-1"}),"すべて見る"]})]}),t.jsx("div",{className:"card-body",children:x.length>0?t.jsx("div",{className:"d-flex flex-column gap-3",children:x.map((e,s)=>(0,t.jsxs)("div",{className:"d-flex align-items-start",children:[t.jsx("div",{className:`rounded-circle d-flex align-items-center justify-content-center me-3 ${e.iconColor}`,style:{width:"40px",height:"40px",backgroundColor:"var(--bs-light)"},children:t.jsx("i",{className:e.icon})}),t.jsx("div",{className:"flex-grow-1",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"mb-1 fw-medium",children:e.text}),t.jsx("small",{className:"text-muted",children:e.time})]}),e.amount&&t.jsx("span",{className:"badge bg-success-subtle text-success",children:e.amount})]})})]},s))}):(0,t.jsxs)("div",{className:"text-center py-4",children:[t.jsx("i",{className:"bi bi-clock-history text-muted",style:{fontSize:"3rem"}}),t.jsx("p",{className:"text-muted mt-2",children:"まだアクティビティがありません"})]})})]})}),t.jsx("div",{className:"col-lg-4",children:(0,t.jsxs)("div",{className:"card h-100",children:[t.jsx("div",{className:"card-header",children:(0,t.jsxs)("h5",{className:"mb-0",children:[t.jsx("i",{className:"bi bi-lightning me-2"}),"クイックアクション"]})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"d-grid gap-3",children:[(0,t.jsxs)("button",{className:"btn btn-outline-primary",onClick:()=>e?.("reservation-list"),children:[t.jsx("i",{className:"bi bi-list-ul me-2"}),"予約一覧を見る"]}),(0,t.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>e?.("product-list"),children:[t.jsx("i",{className:"bi bi-box-seam me-2"}),"商品管理"]}),(0,t.jsxs)("button",{className:"btn btn-outline-info",onClick:()=>e?.("form-list"),children:[t.jsx("i",{className:"bi bi-file-earmark-text me-2"}),"フォーム管理"]}),t.jsx("button",{className:"btn btn-outline-success",onClick:g,disabled:n,children:n?(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner me-2"}),"チェック中..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("i",{className:"bi bi-gear me-2"}),"フォーム設定確認"]})})]})})]})})]}),s&&t.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:t.jsx("div",{className:"modal-dialog modal-lg",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsxs)("h5",{className:"modal-title",children:[t.jsx("i",{className:"bi bi-gear me-2"}),"フォーム設定診断結果"]}),t.jsx("button",{type:"button",className:"btn-close",onClick:()=>a(!1)})]}),t.jsx("div",{className:"modal-body",children:r&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"alert alert-info",children:[t.jsx("h6",{children:"診断概要"}),(0,t.jsxs)("p",{className:"mb-0",children:["総フォーム数: ",r.totalForms]}),(0,t.jsxs)("p",{className:"mb-0",children:["有効フォーム数: ",r.activeForms]})]}),r.issues?.length>0&&(0,t.jsxs)("div",{className:"alert alert-warning",children:[t.jsx("h6",{children:"検出された問題"}),t.jsx("ul",{className:"mb-0",children:r.issues.map((e,s)=>t.jsx("li",{children:e},s))})]}),r.recommendations?.length>0&&(0,t.jsxs)("div",{className:"alert alert-success",children:[t.jsx("h6",{children:"推奨事項"}),t.jsx("ul",{className:"mb-0",children:r.recommendations.map((e,s)=>t.jsx("li",{children:e},s))})]})]})}),t.jsx("div",{className:"modal-footer",children:t.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>a(!1),children:"閉じる"})})]})})})]})}var d=a(6226),o=a(8871),m=a(888);let x=({isOpen:e,onClose:s,onProductSelect:a,excludeProductIds:r=[]})=>{let[l,n]=(0,i.useState)([]),[d,o]=(0,i.useState)([]),[x,u]=(0,i.useState)(""),[h,p]=(0,i.useState)("all"),[j,b]=(0,i.useState)(!1),[g,v]=(0,i.useState)(null),[N,f]=(0,i.useState)(""),[y,w]=(0,i.useState)(0),[_,k]=(0,i.useState)(1),[C,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e&&(J(),O())},[e]);let J=async()=>{b(!0);try{let{data:e,error:s}=await c.O.from("products").select(`
          *,
          category:product_categories(*),
          variations:product_variations(*)
        `).eq("is_available",!0).order("display_order",{ascending:!0});if(s)throw s;n(e||[])}catch(e){}finally{b(!1)}},O=async()=>{try{let{data:e,error:s}=await c.O.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;o(e||[])}catch(e){}},P=l.filter(e=>{let s="all"===h||e.category_id===h,a=e.name.toLowerCase().includes(x.toLowerCase())||e.description?.toLowerCase().includes(x.toLowerCase()),t=!r.includes(e.id);return s&&a&&t}),q=e=>{e.variations&&e.variations.length>0?(v(e),f(e.variations[0].id),w(e.variations[0].price),k(1),S(!0)):D(e)},D=(e,s,t,i)=>{a(e,t||e.price,s,i||1),z()},z=()=>{u(""),p("all"),v(null),f(""),w(0),k(1),S(!1),s()},$=e=>{f(e);let s=g?.variations?.find(s=>s.id===e);s&&w(s.price)};return e?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[t.jsx(m.JO,{icon:m.PJ.packageIcon,size:"lg"}),t.jsx("span",{children:"商品を選択"})]}),t.jsx("button",{onClick:z,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(m.JO,{icon:m.PJ.closeIcon,size:"md"})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(m.JO,{icon:m.PJ.searchIcon,size:"sm",className:"text-gray-400"})}),t.jsx("input",{type:"text",placeholder:"商品名で検索...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"全カテゴリ"}),d.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),t.jsx("button",{onClick:J,disabled:j,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:t.jsx(m.JO,{icon:m.PJ.refresh,size:"sm"})})]})]}),t.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 200px)"},children:j?(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[t.jsx(m.JO,{icon:m.PJ.loading,size:"lg",className:"animate-spin text-blue-500"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"商品を読み込み中..."})]}):P.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>q(e),children:[t.jsx("div",{className:"w-full h-32 bg-gray-100 rounded-lg mb-3 flex items-center justify-center",children:t.jsx(m.JO,{icon:m.PJ.packageIcon,size:"xl",className:"text-gray-400"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 line-clamp-2",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500",children:e.category?.name}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["\xa5",e.price.toLocaleString()]}),e.variations&&e.variations.length>0&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.variations.length,"種類の選択肢"]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:void 0!==e.stock_quantity&&null!==e.stock_quantity&&(0,t.jsxs)("span",{className:`text-xs px-2 py-1 rounded ${e.stock_quantity>10?"bg-green-100 text-green-800":e.stock_quantity>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["在庫: ",e.stock_quantity]})})]}),t.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:s=>{s.stopPropagation(),q(e)},children:e.variations&&e.variations.length>0?"詳細設定":"追加"})]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(m.JO,{icon:m.PJ.searchIcon,size:"xl",className:"text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"条件に合う商品が見つかりません"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"検索条件を変更してお試しください"})]})})]})}),C&&g&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-60 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"商品設定"})}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:g.name}),t.jsx("p",{className:"text-sm text-gray-600",children:g.description})]}),g.variations&&g.variations.length>0&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"バリエーション"}),t.jsx("select",{value:N,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.variations.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - \xa5",e.price.toLocaleString()]},e.id))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格"}),t.jsx("input",{type:"number",value:y,onChange:e=>w(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト数量"}),t.jsx("input",{type:"number",value:_,onChange:e=>k(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),(0,t.jsxs)("div",{className:"p-6 pt-0 flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"キャンセル"}),t.jsx("button",{onClick:()=>{if(g){let e=g.variations?.find(e=>e.id===N);D(g,e?.name,y,_)}S(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"追加"})]})]})})]}):null};var u=a(572);let h={customer_name:{id:"customer_name",type:"text",label:"氏名",placeholder:"山田 太郎",required:!0,description:"フルネームでご記入ください",category:"customer"},customer_furigana:{id:"customer_furigana",type:"text",label:"フリガナ",placeholder:"ヤマダ タロウ",required:!1,description:"カタカナでご記入ください",category:"customer"},customer_phone:{id:"customer_phone",type:"tel",label:"電話番号",placeholder:"090-1234-5678",required:!0,description:"緊急時のご連絡先",category:"customer"},customer_postal_code:{id:"customer_postal_code",type:"text",label:"郵便番号",placeholder:"123-4567",required:!1,category:"customer"},customer_address:{id:"customer_address",type:"textarea",label:"住所",placeholder:"東京都渋谷区...",required:!1,category:"customer"},customer_birth_date:{id:"customer_birth_date",type:"date",label:"生年月日",required:!1,category:"customer"},customer_gender:{id:"customer_gender",type:"radio",label:"性別",required:!1,options:["男性","女性","その他","回答しない"],category:"customer"},reservation_date:{id:"reservation_date",type:"date",label:"受取希望日",required:!0,description:"商品をお受け取りいただく日をお選びください",category:"reservation"},special_requests:{id:"special_requests",type:"textarea",label:"ご要望・備考",placeholder:"その他ご要望がございましたらご記入ください",required:!1,category:"other"}};function p({formId:e,onFormSaved:s}={}){let[a,r]=(0,i.useState)({id:e||`form-${Date.now()}`,name:"商品予約フォーム",description:"片桐商店 ベジライスの商品予約を承ります",fields:Object.values(h).map(e=>({...e,enabled:!0})),products:[],settings:{showProgress:!0,allowEdit:!0,confirmationMessage:"ご予約ありがとうございました。確認のお電話をさせていただきます。",businessName:"片桐商店 ベジライス",validFrom:void 0,validTo:void 0,isActive:!0}}),[l,n]=(0,i.useState)(!1),[p,j]=(0,i.useState)([]),[b,g]=(0,i.useState)([]),[v,N]=(0,i.useState)(!1),[f,y]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[k,C]=(0,i.useState)("all"),[S,J]=(0,i.useState)(null),O=e=>{r({...a,fields:a.fields.map(s=>s.id===e?{...s,enabled:!s.enabled}:s)})},P=e=>{J(e)},q=async()=>{n(!0);try{let{data:e,error:t}=await c.O.from("forms").upsert({id:a.id,name:a.name,description:a.description,show_progress:a.settings.showProgress,allow_edit:a.settings.allowEdit,confirmation_message:a.settings.confirmationMessage,business_name:a.settings.businessName,valid_from:a.settings.validFrom||null,valid_to:a.settings.validTo||null,is_active:a.settings.isActive,updated_at:new Date().toISOString()}).select().single();if(t)throw t;if(await c.O.from("form_fields").delete().eq("form_id",a.id),await c.O.from("form_products").delete().eq("form_id",a.id),a.fields.length>0){let e=a.fields.map((e,s)=>({form_id:a.id,field_id:e.id,field_type:e.type,label:e.label,placeholder:e.placeholder,is_required:e.required,options:e.options,description:e.description,category:e.category,is_enabled:e.enabled,display_order:s})),{error:s}=await c.O.from("form_fields").insert(e);if(s)throw s}if(a.products.length>0){let e=a.products.map((e,s)=>({form_id:a.id,product_id:e.id,selected_price:e.selected_price,variation_name:e.selected_variation,display_order:s})),{error:s}=await c.O.from("form_products").insert(e);if(s)throw s}s&&s(a.id),alert("フォーム設定を保存しました")}catch(e){alert("フォーム設定の保存に失敗しました。もう一度お試しください。")}finally{n(!1)}};p.filter(e=>{let s="all"===k||e.category_id===k,t=e.name.toLowerCase().includes(w.toLowerCase()),i=!a.products.find(s=>s.id===e.id);return s&&t&&i});let D={customer:{title:"顧客情報",icon:m.PJ.customerInfo},reservation:{title:"予約情報",icon:m.PJ.reservationInfo},other:{title:"その他",icon:m.PJ.otherInfo}},z=()=>{let e=window.location.origin;return`${e}/form/${a.id}`};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"予約フォーム設定"}),t.jsx("p",{className:"text-gray-600",children:"フォーム項目と予約対象商品を設定します"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>y(!f),className:"btn-modern btn-outline-modern flex items-center space-x-2",children:[t.jsx(m.JO,{icon:m.PJ.qrIcon,size:"sm"}),t.jsx("span",{children:"QRコード表示"})]}),t.jsx("button",{onClick:q,disabled:l,className:"btn-modern btn-success-modern flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.JO,{icon:m.PJ.loading,size:"sm",className:"animate-spin"}),t.jsx("span",{children:"保存中..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.JO,{icon:m.PJ.saveIcon,size:"sm"}),t.jsx("span",{children:"設定を保存"})]})})]})]}),f&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"フォームQRコード"}),t.jsx("button",{onClick:()=>y(!1),className:"btn-modern btn-ghost-modern btn-sm",children:t.jsx(m.JO,{icon:m.PJ.closeIcon,size:"sm"})})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(d.default,{src:(()=>{let e=z();return`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(e)}`})(),alt:"フォームQRコード",width:200,height:200,className:"mx-auto mb-4",unoptimized:!0}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"このQRコードで予約フォームにアクセスできます"}),t.jsx("div",{className:"text-xs bg-gray-100 p-2 rounded break-all",children:z()}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(z()),className:"btn-modern btn-secondary-modern mt-3",children:"URLをコピー"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-header",children:t.jsx("h3",{className:"admin-card-title",children:"基本設定"})}),(0,t.jsxs)("div",{className:"admin-card-content space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"フォーム名"}),t.jsx("input",{type:"text",value:a.name,onChange:e=>r({...a,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明文"}),t.jsx("textarea",{value:a.description,onChange:e=>r({...a,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受付開始日時"}),t.jsx("input",{type:"datetime-local",value:a.settings.validFrom||"",onChange:e=>r({...a,settings:{...a.settings,validFrom:e.target.value||void 0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受付終了日時"}),t.jsx("input",{type:"datetime-local",value:a.settings.validTo||"",onChange:e=>r({...a,settings:{...a.settings,validTo:e.target.value||void 0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:a.settings.isActive,onChange:e=>r({...a,settings:{...a.settings,isActive:e.target.checked}}),className:"mr-2"}),"フォームを有効にする"]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"無効にするとフォームにアクセスできなくなります"})]})]})]}),(0,t.jsxs)("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-header",children:t.jsx("h3",{className:"admin-card-title",children:"フォーム項目設定"})}),t.jsx("div",{className:"admin-card-content",children:Object.entries(D).map(([e,s])=>(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2 font-medium text-gray-900 mb-3",children:[t.jsx(m.JO,{icon:s.icon,size:"sm"}),s.title]}),t.jsx("div",{className:"space-y-2",children:a.fields.filter(s=>s.category===e).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.label}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.type," ",e.required&&"(必須)"]})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e.enabled,onChange:()=>O(e.id),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e.id))})]},e))})]}),(0,t.jsxs)("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-header",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"admin-card-title",children:"予約対象商品"}),(0,t.jsxs)("button",{onClick:()=>N(!0),className:"btn-modern btn-primary-modern btn-sm flex items-center space-x-2",children:[t.jsx(m.JO,{icon:m.PJ.packageIcon,size:"sm"}),t.jsx("span",{children:"商品を追加"})]})]})}),t.jsx("div",{className:"admin-card-content",children:a.products.length>0?t.jsx("div",{className:"space-y-3",children:a.products.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["\xa5",e.selected_price?.toLocaleString(),e.selected_variation&&` (${e.selected_variation})`,e.category_name&&` - ${e.category_name}`]})]}),t.jsx("button",{onClick:()=>P(e.id),className:"btn-modern btn-danger-modern btn-sm btn-icon-only",children:t.jsx(m.JO,{icon:m.PJ.deleteIcon,size:"sm"})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"mb-4",children:t.jsx(m.JO,{icon:m.PJ.packageIcon,size:"xl",className:"mx-auto text-gray-400"})}),t.jsx("p",{children:"予約対象商品が設定されていません"}),t.jsx("p",{className:"text-sm",children:"「商品を追加」ボタンから商品を選択してください"})]})})]})]}),(0,t.jsxs)("div",{className:"admin-card",children:[(0,t.jsxs)("div",{className:"admin-card-header",children:[t.jsx("h3",{className:"admin-card-title",children:"フォームプレビュー"}),t.jsx("p",{className:"text-sm text-gray-600",children:"実際のフォーム画面と同じ表示・機能です"})]}),t.jsx("div",{className:"admin-card-content",children:t.jsx(o.Z,{formConfig:a})})]})]}),t.jsx(x,{isOpen:v,onClose:()=>N(!1),onProductSelect:(e,s,t,i)=>{let l={id:e.id,name:e.name,category_name:e.category?.name,price:e.price,variation_name:e.variation_name||void 0,selected_price:s||e.price,selected_variation:t||e.variation_name||void 0};r({...a,products:[...a.products,l]}),N(!1)},excludeProductIds:a.products.map(e=>e.id)}),t.jsx(u.$,{isOpen:!!S,title:"商品の削除",itemName:S?a.products.find(e=>e.id===S)?.name||"選択された商品":"",onConfirm:()=>{S&&(r({...a,products:a.products.filter(e=>e.id!==S)}),J(null))},onCancel:()=>J(null)})]})}var j=a(709),b=a(7841),g=a(9553),v=a(38),N=a(268);let f=()=>{let[e,s]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[l,n]=(0,i.useState)(""),[d,o]=(0,i.useState)(!1),[x,h]=(0,i.useState)(null),[p,j]=(0,i.useState)(null),[b,g]=(0,i.useState)({name:"",description:"",display_order:0,is_active:!0}),[v,N]=(0,i.useState)({}),[f,y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{w()},[]);let w=async()=>{r(!0);try{let{data:e,error:a}=await c.O.from("product_categories").select("*").order("display_order",{ascending:!0});if(a)throw a;s(e||[])}catch(e){}finally{r(!1)}},_=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.description?.toLowerCase().includes(l.toLowerCase())),k=()=>{let e={};return b.name.trim()||(e.name="カテゴリ名は必須です"),b.display_order<0&&(e.display_order="表示順序は0以上の数値を入力してください"),N(e),0===Object.keys(e).length},C=async e=>{if(e.preventDefault(),k()){y(!0);try{let e={name:b.name.trim(),description:b.description.trim()||null,display_order:b.display_order,is_active:b.is_active,updated_at:new Date().toISOString()};if(x){let{error:s}=await c.O.from("product_categories").update(e).eq("id",x.id);if(s)throw s}else{let{error:s}=await c.O.from("product_categories").insert([e]);if(s)throw s}P(),w()}catch(e){alert("保存に失敗しました。もう一度お試しください。")}finally{y(!1)}}},S=e=>{h(e),g({name:e.name,description:e.description||"",display_order:e.display_order,is_active:e.is_active}),o(!0)},J=async()=>{if(p)try{let{data:e,error:s}=await c.O.from("products").select("id").eq("category_id",p.id).limit(1);if(s)throw s;if(e&&e.length>0){alert("このカテゴリを使用している商品が存在するため、削除できません。"),j(null);return}let{error:a}=await c.O.from("product_categories").delete().eq("id",p.id);if(a)throw a;j(null),w()}catch(e){alert("削除に失敗しました。もう一度お試しください。")}},O=async e=>{try{let{error:s}=await c.O.from("product_categories").update({is_active:!e.is_active,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw s;w()}catch(e){alert("状態の更新に失敗しました。")}},P=()=>{g({name:"",description:"",display_order:e.length,is_active:!0}),N({}),h(null),o(!1)},q=e=>s=>{let a="display_order"===e?parseInt(s.target.value)||0:"is_active"===e?s.target.checked:s.target.value;g({...b,[e]:a}),v[e]&&N({...v,[e]:""})};return(0,t.jsxs)("div",{className:"container-fluid py-4",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"h3 text-dark fw-bold mb-1",children:"商品カテゴリ管理"}),t.jsx("p",{className:"text-muted mb-0",children:"商品カテゴリの追加・編集・削除・並び順の管理"})]}),(0,t.jsxs)("button",{onClick:()=>o(!0),className:"btn btn-success d-flex align-items-center",children:[t.jsx(m.JO,{icon:m.PJ.add,size:"sm",className:"me-2"}),"新規カテゴリ追加"]})]}),t.jsx("div",{className:"card mb-4",children:t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"position-relative",children:[t.jsx(m.JO,{icon:m.PJ.search,size:"sm",className:"position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"}),t.jsx("input",{type:"text",placeholder:"カテゴリ名、説明で検索...",value:l,onChange:e=>n(e.target.value),className:"form-control ps-5"})]})})}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header bg-light",children:(0,t.jsxs)("h5",{className:"card-title mb-0",children:["カテゴリ一覧 (",_.length,"件)"]})}),t.jsx("div",{className:"card-body p-0",children:a?(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-center py-5",children:[t.jsx(m.JO,{icon:m.PJ.loading,size:"lg",className:"animate-spin text-primary me-2"}),t.jsx("span",{className:"text-muted",children:"読み込み中..."})]}):_.length>0?t.jsx("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover mb-0",children:[t.jsx("thead",{className:"table-light",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"border-0",children:"表示順"}),t.jsx("th",{className:"border-0",children:"カテゴリ名"}),t.jsx("th",{className:"border-0",children:"説明"}),t.jsx("th",{className:"border-0",children:"状態"}),t.jsx("th",{className:"border-0",children:"作成日"}),t.jsx("th",{className:"border-0 text-end",children:"操作"})]})}),t.jsx("tbody",{children:_.map(e=>(0,t.jsxs)("tr",{children:[t.jsx("td",{children:t.jsx("span",{className:"badge bg-secondary",children:e.display_order})}),t.jsx("td",{children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx(m.JO,{icon:m.PJ.tag,size:"sm",className:"text-primary me-2"}),t.jsx("span",{className:"fw-medium",children:e.name})]})}),t.jsx("td",{children:t.jsx("span",{className:"text-muted",children:e.description||"説明なし"})}),t.jsx("td",{children:(0,t.jsxs)("button",{onClick:()=>O(e),className:`btn btn-sm ${e.is_active?"btn-outline-success":"btn-outline-secondary"}`,children:[t.jsx(m.JO,{icon:e.is_active?m.PJ.eye:m.PJ.eyeOff,size:"xs",className:"me-1"}),e.is_active?"有効":"無効"]})}),t.jsx("td",{className:"text-muted",children:new Date(e.created_at).toLocaleDateString("ja-JP")}),t.jsx("td",{children:(0,t.jsxs)("div",{className:"d-flex justify-content-end gap-1",children:[t.jsx("button",{onClick:()=>S(e),className:"btn btn-sm btn-outline-primary",title:"編集",children:t.jsx(m.JO,{icon:m.PJ.edit,size:"xs"})}),t.jsx("button",{onClick:()=>j(e),className:"btn btn-sm btn-outline-danger",title:"削除",children:t.jsx(m.JO,{icon:m.PJ.delete,size:"xs"})})]})})]},e.id))})]})}):(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx(m.JO,{icon:m.PJ.tag,size:"xl",className:"text-muted mb-3"}),t.jsx("p",{className:"text-muted",children:l?"検索条件に合うカテゴリが見つかりません":"登録されているカテゴリがありません"}),!l&&t.jsx("button",{onClick:()=>o(!0),className:"btn btn-success mt-2",children:"初めてのカテゴリを追加"})]})})]}),d&&t.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:t.jsx("div",{className:"modal-dialog modal-lg",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[t.jsx("h5",{className:"modal-title",children:x?"カテゴリ編集":"新規カテゴリ追加"}),t.jsx("button",{type:"button",className:"btn-close",onClick:P})]}),(0,t.jsxs)("form",{onSubmit:C,children:[t.jsx("div",{className:"modal-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-md-8",children:[(0,t.jsxs)("label",{className:"form-label",children:["カテゴリ名 ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx("input",{type:"text",value:b.name,onChange:q("name"),className:`form-control ${v.name?"is-invalid":""}`,placeholder:"野菜の苗、花の苗など"}),v.name&&t.jsx("div",{className:"invalid-feedback",children:v.name})]}),(0,t.jsxs)("div",{className:"col-md-4",children:[t.jsx("label",{className:"form-label",children:"表示順序"}),t.jsx("input",{type:"number",value:b.display_order,onChange:q("display_order"),className:`form-control ${v.display_order?"is-invalid":""}`,min:"0"}),v.display_order&&t.jsx("div",{className:"invalid-feedback",children:v.display_order})]}),(0,t.jsxs)("div",{className:"col-12",children:[t.jsx("label",{className:"form-label",children:"説明"}),t.jsx("textarea",{value:b.description,onChange:q("description"),className:"form-control",rows:3,placeholder:"このカテゴリの説明を入力してください"})]}),t.jsx("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"form-check",children:[t.jsx("input",{type:"checkbox",id:"is_active",checked:b.is_active,onChange:q("is_active"),className:"form-check-input"}),t.jsx("label",{htmlFor:"is_active",className:"form-check-label",children:"このカテゴリを有効にする"})]})})]})}),(0,t.jsxs)("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:P,className:"btn btn-secondary",children:"キャンセル"}),t.jsx("button",{type:"submit",disabled:f,className:"btn btn-primary d-flex align-items-center",children:f?(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.JO,{icon:m.PJ.loading,size:"sm",className:"animate-spin me-2"}),"保存中..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.JO,{icon:m.PJ.save,size:"sm",className:"me-2"}),x?"更新":"追加"]})})]})]})]})})}),t.jsx(u.$,{isOpen:!!p,title:"カテゴリの削除",itemName:p?.name||"",onConfirm:J,onCancel:()=>j(null)})]})};var y=a(8398);function w(){let[e,s]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,n]=(0,i.useState)(!1),{signIn:d}=(0,r.a)(),o=async s=>{s.preventDefault(),n(!0);try{await d(e,a)}finally{n(!1)}};return(0,t.jsxs)("div",{className:"min-vh-100 d-flex align-items-center justify-content-center bg-light position-relative",children:[t.jsx("div",{className:"position-absolute w-100 h-100 opacity-25",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2322c55e' fill-opacity='0.1'%3E%3Ccircle cx='6' cy='6' r='6'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}}),t.jsx("div",{className:"container",children:t.jsx("div",{className:"row justify-content-center",children:t.jsx("div",{className:"col-md-6 col-lg-4",children:t.jsx("div",{className:"card shadow-lg border-0 fade-in",children:(0,t.jsxs)("div",{className:"card-body p-5",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"display-4 mb-3",children:"\uD83C\uDF31"}),t.jsx("h2",{className:"h3 fw-bold text-primary mb-1",children:"ベジライス管理システム"}),t.jsx("p",{className:"text-muted",children:"管理者ログイン"})]}),(0,t.jsxs)("form",{onSubmit:o,children:[(0,t.jsxs)("div",{className:"mb-3",children:[t.jsx("label",{htmlFor:"email",className:"form-label",children:"メールアドレス"}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"username",className:"form-control form-control-lg",placeholder:"admin@example.com",value:e,onChange:e=>s(e.target.value),disabled:c})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"password",className:"form-label",children:"パスワード"}),t.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"form-control form-control-lg",placeholder:"パスワードを入力してください",value:a,onChange:e=>l(e.target.value),disabled:c})]}),t.jsx("div",{className:"d-grid mb-3",children:t.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary btn-lg",children:c?(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"loading-spinner me-2"}),"ログイン中..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"ログイン"]})})}),t.jsx("div",{className:"text-center",children:t.jsx("small",{className:"text-muted",children:"管理者アカウントでログインしてください"})})]})]})})})})})]})}function _(){let{user:e,loading:s,isAdmin:a}=(0,r.a)(),[c,d]=(0,i.useState)("dashboard");return s?t.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"loading-spinner mb-3"}),t.jsx("p",{className:"text-muted",children:"認証情報を確認中..."})]})}):e&&a?t.jsx(l.Z,{children:(()=>{switch(c){case"dashboard":default:return t.jsx(n,{});case"reservation-list":return t.jsx(v.Z,{});case"reservation-calendar":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"予約カレンダー"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"\uD83D\uDDD3️"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"予約カレンダー"}),t.jsx("p",{className:"text-muted",children:"カレンダー形式で予約を管理します。"})]})})]});case"reservation-search":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"予約検索"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"\uD83D\uDD0D"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"予約検索"}),t.jsx("p",{className:"text-muted",children:"詳細条件で予約を検索します。"})]})})]});case"product-list":return t.jsx(b.Z,{});case"product-add":return t.jsx(g.Z,{});case"product-categories":return t.jsx(f,{});case"customer-list":return t.jsx(y.Z,{});case"customer-search":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"顧客検索"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"\uD83D\uDD0D"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"顧客検索"}),t.jsx("p",{className:"text-muted",children:"詳細条件で顧客を検索します。"})]})})]});case"form-builder":return t.jsx(p,{});case"form-list":return t.jsx(j.Z,{});case"form-settings":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"フォーム設定"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"⚙️"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"フォーム設定"}),(0,t.jsxs)("p",{className:"text-muted",children:["フォーム全体の設定を管理します。",t.jsx("br",{}),"通知設定、デザイン設定、セキュリティ設定など。"]})]})})]});case"business-settings":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"店舗設定"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"\uD83C\uDFEA"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"店舗設定"}),t.jsx("p",{className:"text-muted",children:"店舗情報、営業時間、連絡先などの基本設定を管理します。"})]})})]});case"notification-settings":return t.jsx(N.Z,{});case"user-management":return(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"card-title h4 mb-0",children:"ユーザー管理"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"text-center py-5",children:[t.jsx("div",{className:"display-1 mb-4",children:"\uD83D\uDC68‍\uD83D\uDCBC"}),t.jsx("h3",{className:"h5 fw-medium text-dark mb-3",children:"ユーザー管理"}),t.jsx("p",{className:"text-muted",children:"管理者ユーザーの追加・編集・権限設定を行います。"})]})})]})}})()}):t.jsx(w,{})}},8748:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`/mnt/c/Claude/インストール/nursery-reservation-system/app/admin/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[431,496,226,290,30,709,38,398,553,841,268,871],()=>a(5471));module.exports=t})();