(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},5002:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.Z,__next_app__:()=>m,originalPathname:()=>o,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(908),s(4129),s(6083),s(5866);var i=s(3191),t=s(8716),l=s(8001),a=s(5231),n={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);s.d(r,n);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,908)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4129)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,6083)),"/mnt/c/Claude/インストール/nursery-reservation-system/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/mnt/c/Claude/インストール/nursery-reservation-system/app/page.tsx"],o="/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3160:(e,r,s)=>{Promise.resolve().then(s.bind(s,8473))},8473:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var i=s(326),t=s(7577);function l({formData:e,setFormData:r,errors:s}){let[l,a]=(0,t.useState)(!1),[n,d]=(0,t.useState)(new Set),c=s=>i=>{r({...e,[s]:i.target.value})},o=e=>{let r=e.replace(/[^0-9]/g,"");return 7===r.length?`${r.slice(0,3)}-${r.slice(3)}`:r.length<=3?r:`${r.slice(0,3)}-${r.slice(3,7)}`},m=async s=>{a(!0);try{let i=s.replace(/[^0-9]/g,"");if(7!==i.length)return!1;let t=await fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${i}`);if(!t.ok)throw Error(`APIリクエストエラー: ${t.status}`);let l=await t.json();if(200!==l.status||!l.results||!(l.results.length>0))return!1;{let i=l.results[0];return r({...e,zipcode:s,prefecture:i.address1,city:i.address2,town:i.address3}),d(new Set(["prefecture","city","town"])),!0}}catch(e){return!1}finally{a(!1)}},p=async()=>{if(7!==e.zipcode.replace(/[^0-9]/g,"").length){alert("郵便番号は7桁で入力してください（例: 123-4567）");return}await m(e.zipcode)||(alert(`郵便番号「${e.zipcode}」に該当する住所が見つかりませんでした。

※ 全国の郵便番号に対応していますが、存在しない郵便番号や形式が正しくない場合は検索できません。`),d(new Set))},h=e=>n.has(e)&&("prefecture"===e||"city"===e);return(0,i.jsxs)("div",{className:"form-mailer-section",children:[(0,i.jsxs)("div",{className:"form-mailer-info",children:["お客様の基本情報をご入力ください。必須項目は",i.jsx("span",{className:"form-mailer-required",children:"*"}),"マークでご確認いただけます。"]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["お名前",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),i.jsx("input",{type:"text",value:e.name,onChange:c("name"),className:"form-mailer-input",placeholder:"山田 太郎"}),s.name&&i.jsx("span",{className:"form-mailer-error",children:s.name})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["フリガナ",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),i.jsx("input",{type:"text",value:e.furigana,onChange:c("furigana"),className:"form-mailer-input",placeholder:"ヤマダ タロウ"}),s.furigana&&i.jsx("span",{className:"form-mailer-error",children:s.furigana})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["電話番号",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),i.jsx("input",{type:"tel",value:e.phone,onChange:c("phone"),className:"form-mailer-input",placeholder:"090-1234-5678"}),s.phone&&i.jsx("span",{className:"form-mailer-error",children:s.phone})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["郵便番号",l&&i.jsx("span",{style:{fontSize:"12px",color:"#666666",marginLeft:"8px"},children:"住所を検索中..."})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start"},children:[i.jsx("input",{type:"text",value:e.zipcode,onChange:s=>{let i=o(s.target.value);r({...e,zipcode:i}),i.replace(/[^0-9]/g,"").length<7&&n.size>0&&(r({...e,zipcode:i,prefecture:"",city:"",town:""}),d(new Set))},onKeyDown:r=>{"Enter"!==r.key||(r.preventDefault(),7!==e.zipcode.replace(/[^0-9]/g,"").length||l||p())},className:"form-mailer-input",placeholder:"例: 123-4567",maxLength:8,style:{flex:"1"}}),i.jsx("button",{type:"button",onClick:p,disabled:l||7!==e.zipcode.replace(/[^0-9]/g,"").length,title:(()=>{let r=e.zipcode.replace(/[^0-9]/g,"");return 0===r.length?"郵便番号を入力してください":r.length<7?`あと${7-r.length}桁入力してください`:7===r.length?"タップして住所を検索":""})(),className:l||7!==e.zipcode.replace(/[^0-9]/g,"").length?"form-mailer-button-secondary":"form-mailer-button",style:{width:"auto",padding:"12px 16px",margin:"0",fontSize:"14px",backgroundColor:l||7!==e.zipcode.replace(/[^0-9]/g,"").length?"#cccccc":"#333333",cursor:l||7!==e.zipcode.replace(/[^0-9]/g,"").length?"not-allowed":"pointer"},children:l?"検索中...":"住所検索"}),n.size>0&&i.jsx("button",{type:"button",onClick:()=>{r({...e,prefecture:"",city:"",town:""}),d(new Set)},className:"form-mailer-button-secondary",style:{width:"auto",padding:"12px 16px",margin:"0",fontSize:"14px"},children:"クリア"})]}),i.jsx("div",{style:{fontSize:"12px",color:"#666666",marginTop:"8px"},children:"郵便番号を7桁入力後、「住所検索」ボタンで住所が自動入力されます。全国の郵便番号に対応しています。"}),s.zipcode&&i.jsx("span",{className:"form-mailer-error",children:s.zipcode})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["都道府県",n.has("prefecture")&&i.jsx("span",{style:{fontSize:"11px",color:"#999999",marginLeft:"4px"},children:"(自動入力)"})]}),i.jsx("input",{type:"text",value:e.prefecture,onChange:c("prefecture"),className:"form-mailer-input",placeholder:"東京都",readOnly:h("prefecture"),style:{backgroundColor:h("prefecture")?"#f5f5f5":"#ffffff"}}),s.prefecture&&i.jsx("span",{className:"form-mailer-error",children:s.prefecture})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["市区町村",n.has("city")&&i.jsx("span",{style:{fontSize:"11px",color:"#999999",marginLeft:"4px"},children:"(自動入力)"})]}),i.jsx("input",{type:"text",value:e.city,onChange:c("city"),className:"form-mailer-input",placeholder:"渋谷区",readOnly:h("city"),style:{backgroundColor:h("city")?"#f5f5f5":"#ffffff"}}),s.city&&i.jsx("span",{className:"form-mailer-error",children:s.city})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["町名",n.has("town")&&i.jsx("span",{style:{fontSize:"11px",color:"#999999",marginLeft:"4px"},children:"(自動入力されました)"})]}),i.jsx("input",{type:"text",value:e.town||"",onChange:c("town"),className:"form-mailer-input",placeholder:"神南"}),i.jsx("div",{style:{fontSize:"12px",color:"#666666",marginTop:"4px"},children:"町名以降の項目は編集可能です"})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{className:"form-mailer-label",children:"番地・建物名・部屋番号"}),i.jsx("input",{type:"text",value:e.addressDetail,onChange:c("addressDetail"),className:"form-mailer-input",placeholder:"1-2-3 サンプルマンション101号室"}),s.addressDetail&&i.jsx("span",{className:"form-mailer-error",children:s.addressDetail})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"form-mailer-label",children:"性別"}),(0,i.jsxs)("select",{value:e.gender,onChange:c("gender"),className:"form-mailer-select",children:[i.jsx("option",{value:"male",children:"男性"}),i.jsx("option",{value:"female",children:"女性"}),i.jsx("option",{value:"other",children:"その他"})]}),s.gender&&i.jsx("span",{className:"form-mailer-error",children:s.gender})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"form-mailer-label",children:"生年月日"}),i.jsx("input",{type:"date",value:e.birthDate,onChange:c("birthDate"),className:"form-mailer-input"}),s.birthDate&&i.jsx("span",{className:"form-mailer-error",children:s.birthDate})]})]})]})}class a{constructor(e){this.settings=e}shouldShowPricing(){return!this.settings||"hidden"!==this.settings.pricing_display_mode}shouldShowItemPrices(){return!this.settings||"full"===this.settings.pricing_display_mode||"custom"===this.settings.pricing_display_mode&&this.settings.show_item_prices}shouldShowQuantity(){return!this.settings||"full"===this.settings.pricing_display_mode||"custom"===this.settings.pricing_display_mode&&this.settings.show_item_quantity}shouldShowSubtotal(){return!this.settings||"full"===this.settings.pricing_display_mode||"custom"===this.settings.pricing_display_mode&&this.settings.show_subtotal}shouldShowTotal(){return!this.settings||"hidden"!==this.settings.pricing_display_mode&&("full"===this.settings.pricing_display_mode||"summary"===this.settings.pricing_display_mode||"custom"===this.settings.pricing_display_mode&&this.settings.show_total_amount)}getDisplayModeDescription(){if(!this.settings)return"標準表示";switch(this.settings.pricing_display_mode){case"full":return"詳細表示 - すべての価格情報を表示";case"summary":return"合計のみ表示 - 合計金額のみを表示";case"hidden":return"価格非表示 - 価格情報を表示しません";case"custom":return"カスタム表示 - 個別設定に基づいて表示";default:return"標準表示"}}}function n(e){return e.products?[...new Set(e.products.map(e=>e.pickupDate).filter(e=>e))].sort():[]}function d(e,r){return e.products?e.products.reduce((e,s)=>{let i=r.find(e=>e.id===s.productId);return e+(i?i.price*s.quantity:0)},0):0}function c({productItems:e,setProductItems:r,availableProducts:s,pricingSettings:t,errors:l}){let n=new a(t),d=s=>{e.length>1&&r(e.filter((e,r)=>r!==s))},c=(s,i,t)=>{let l=[...e];l[s]={...l[s],[i]:t},r(l)},o=()=>e.reduce((e,r)=>{let i=s.find(e=>e.id===r.productId);return e+(i?i.price*r.quantity:0)},0),m=e=>{let r=s.find(r=>r.id===e.productId);return r?r.price*e.quantity:0};return(0,i.jsxs)("div",{className:"form-mailer-section",children:[i.jsx("div",{className:"form-mailer-info",children:"ご注文いただく商品をお選びください。複数の商品をご注文の場合は「商品を追加」ボタンで追加できます。"}),e.map((r,t)=>(0,i.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"4px",padding:"20px",marginBottom:"20px",backgroundColor:"#fafafa"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",borderBottom:"1px solid #e0e0e0",paddingBottom:"12px"},children:[(0,i.jsxs)("h4",{style:{margin:"0",fontSize:"16px",fontWeight:"600",color:"#333333"},children:["商品 ",t+1]}),e.length>1&&i.jsx("button",{type:"button",onClick:()=>d(t),className:"form-mailer-button-secondary",style:{width:"auto",padding:"8px 12px",fontSize:"12px",margin:"0"},children:"削除"})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["商品",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),(0,i.jsxs)("select",{value:r.productId,onChange:e=>c(t,"productId",e.target.value),className:"form-mailer-select",children:[i.jsx("option",{value:"",children:"商品を選択してください"}),s.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.name,n.shouldShowItemPrices()&&` - \xa5${e.price.toLocaleString()}`]},e.id))]}),l?.products?.[t]?.productId&&i.jsx("span",{className:"form-mailer-error",children:l.products[t].productId.message})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["数量",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),i.jsx("input",{type:"number",min:"1",max:"50",value:r.quantity,onChange:e=>c(t,"quantity",parseInt(e.target.value)||1),className:"form-mailer-input",placeholder:"1"}),l?.products?.[t]?.quantity&&i.jsx("span",{className:"form-mailer-error",children:l.products[t].quantity.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"form-mailer-label",children:["引き取り日",i.jsx("span",{className:"form-mailer-required",children:"*"})]}),i.jsx("input",{type:"date",value:r.pickupDate,onChange:e=>c(t,"pickupDate",e.target.value),className:"form-mailer-input",min:new Date().toISOString().split("T")[0]}),l?.products?.[t]?.pickupDate&&i.jsx("span",{className:"form-mailer-error",children:l.products[t].pickupDate.message})]})]}),r.productId&&n.shouldShowSubtotal()&&(0,i.jsxs)("div",{style:{backgroundColor:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"4px",padding:"12px",textAlign:"right"},children:[i.jsx("span",{style:{color:"#666666",fontSize:"14px"},children:"この商品の小計: "}),(0,i.jsxs)("span",{style:{fontWeight:"600",color:"#333333",fontSize:"16px"},children:["\xa5",m(r).toLocaleString()]})]})]},t)),i.jsx("button",{type:"button",onClick:()=>{r([...e,{productId:"",quantity:1,pickupDate:""}])},className:"form-mailer-button-secondary",style:{marginBottom:"20px"},children:"商品を追加"}),e.length>0&&o()>0&&n.shouldShowTotal()&&(0,i.jsxs)("div",{style:{backgroundColor:"#f5f5f5",border:"2px solid #333333",borderRadius:"4px",padding:"20px",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"16px",color:"#333333",marginBottom:"8px"},children:"合計金額"}),(0,i.jsxs)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#333333"},children:["\xa5",o().toLocaleString()]})]})]})}function o({reservationData:e,availableProducts:r,pricingSettings:s,lineAuthInfo:l,onConfirm:c,onEdit:o,isLoading:m=!1,errorMessage:p}){let[h,x]=(0,t.useState)(!1),[u,f]=(0,t.useState)([]),j=new a(s),g=d(e,r),y=[e.prefecture,e.city,e.town,e.addressDetail].filter(Boolean).join(""),b=n(e),v=async()=>{let r=function(e){var r,s;let i=[];return e.name?.trim()||i.push({field:"name",message:"お名前は必須です"}),e.phone?.trim()||i.push({field:"phone",message:"電話番号は必須です"}),e.products&&0!==e.products.length||i.push({field:"products",message:"商品を選択してください"}),e.products&&e.products.forEach((e,r)=>{e.productId||i.push({field:`product_${r}_id`,message:`商品${r+1}の選択が無効です`}),(!e.quantity||e.quantity<1)&&i.push({field:`product_${r}_quantity`,message:`商品${r+1}の数量は1以上にしてください`}),e.pickupDate||i.push({field:`product_${r}_date`,message:`商品${r+1}の引き取り日を選択してください`})}),e.phone&&(r=e.phone,!/^(\d{2,4}-?\d{1,4}-?\d{4}|\d{10,11})$/.test(r.replace(/[^\d-]/g,"")))&&i.push({field:"phone",message:"電話番号の形式が正しくありません"}),e.zipcode&&(s=e.zipcode,!/^\d{3}-?\d{4}$/.test(s))&&i.push({field:"zipcode",message:"郵便番号の形式が正しくありません（例：123-4567）"}),{isValid:0===i.length,errors:i}}(e);if(!r.isValid){f(r.errors.map(e=>e.message));return}x(!0);try{await c()}finally{x(!1)}};return i.jsx("div",{className:"form-mailer-style",children:(0,i.jsxs)("div",{className:"form-mailer-container",children:[(0,i.jsxs)("div",{className:"form-mailer-progress",children:[(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"1"}),i.jsx("span",{children:"入力"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step active",children:[i.jsx("div",{className:"form-mailer-step-number",children:"2"}),i.jsx("span",{children:"確認"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"3"}),i.jsx("span",{children:"完了"})]})]}),i.jsx("h1",{className:"form-mailer-title",children:"入力内容確認"}),i.jsx("div",{className:"form-mailer-info",children:"以下の内容でご予約を確定いたします。内容をご確認の上、問題がなければ「予約を確定する」ボタンをクリックしてください。"}),(p||u.length>0)&&(0,i.jsxs)("div",{style:{backgroundColor:"#fff3f3",border:"1px solid #d32f2f",borderRadius:"4px",padding:"16px",marginBottom:"20px"},children:[p&&i.jsx("div",{style:{color:"#d32f2f",fontWeight:"600"},children:p}),u.length>0&&(0,i.jsxs)("div",{children:[i.jsx("div",{style:{color:"#d32f2f",fontWeight:"600",marginBottom:"8px"},children:"入力内容をご確認ください："}),i.jsx("ul",{style:{color:"#d32f2f",margin:"0",paddingLeft:"20px"},children:u.map((e,r)=>i.jsx("li",{children:e},r))})]})]}),i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{colSpan:2,children:"お客様情報"})})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"お名前"}),i.jsx("td",{children:e.name})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"フリガナ"}),i.jsx("td",{children:e.furigana})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"電話番号"}),i.jsx("td",{children:e.phone})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"性別"}),i.jsx("td",{children:{male:"男性",female:"女性",other:"その他"}[e.gender]})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"生年月日"}),i.jsx("td",{children:e.birthDate})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"郵便番号"}),(0,i.jsxs)("td",{children:["〒",e.zipcode]})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"ご住所"}),i.jsx("td",{children:y})]})]})]})}),l&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{colSpan:2,children:"LINE連携情報"})})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"ユーザー名"}),i.jsx("td",{children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.profile.pictureUrl&&i.jsx("img",{src:l.profile.pictureUrl,alt:"LINE Profile",style:{width:"32px",height:"32px",borderRadius:"50%"}}),i.jsx("span",{children:l.profile.displayName})]})})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"連携状況"}),i.jsx("td",{children:"✓ LINE認証済み"})]})]})]})}),i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[(0,i.jsxs)("thead",{children:[i.jsx("tr",{children:i.jsx("th",{colSpan:j.shouldShowItemPrices()?4:3,children:"ご予約商品"})}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"商品名"}),j.shouldShowQuantity()&&i.jsx("th",{children:"数量"}),i.jsx("th",{children:"引き取り日"}),j.shouldShowItemPrices()&&i.jsx("th",{children:"小計"})]})]}),i.jsx("tbody",{children:e.products?.map((e,s)=>{let t=r.find(r=>r.id===e.productId);return i.jsxs("tr",{children:[i.jsx("td",{children:t?.name}),j.shouldShowQuantity()&&i.jsxs("td",{children:[e.quantity,"個"]}),i.jsx("td",{children:e.pickupDate}),j.shouldShowItemPrices()&&i.jsxs("td",{style:{fontWeight:"600"},children:["\xa5",((t?.price||0)*e.quantity).toLocaleString(),j.shouldShowQuantity()&&i.jsxs("div",{style:{fontSize:"12px",color:"#666666"},children:["\xa5",(t?.price||0).toLocaleString()," \xd7 ",e.quantity]})]})]},s)})})]})}),e.comment&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{children:"店舗へのコメント"})})}),i.jsx("tbody",{children:i.jsx("tr",{children:i.jsx("td",{children:e.comment})})})]})}),b.length>0&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{children:"引き取り予定日"})})}),i.jsx("tbody",{children:i.jsx("tr",{children:i.jsx("td",{children:b.map((e,r)=>i.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:"4px",fontSize:"14px"},children:e},r))})})})]})}),j.shouldShowTotal()&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{colSpan:2,style:{backgroundColor:"#333333",color:"#ffffff",textAlign:"center",fontSize:"16px",fontWeight:"700"},children:"合計金額"})})}),(0,i.jsxs)("tbody",{children:[i.jsx("tr",{children:(0,i.jsxs)("td",{style:{textAlign:"center",fontSize:"24px",fontWeight:"700",color:"#333333",padding:"20px"},children:["\xa5",g.toLocaleString()]})}),s&&i.jsx("tr",{children:i.jsx("td",{style:{textAlign:"center",fontSize:"12px",color:"#666666",fontStyle:"italic"},children:j.getDisplayModeDescription()})})]})]})}),(0,i.jsxs)("div",{style:{marginTop:"30px"},children:[i.jsx("button",{onClick:v,disabled:m||h||u.length>0,className:"form-mailer-button",style:{backgroundColor:m||h||u.length>0?"#cccccc":"#333333",cursor:m||h||u.length>0?"not-allowed":"pointer"},children:h?"予約確定中...":"予約を確定する"}),i.jsx("button",{onClick:o,disabled:m||h,className:"form-mailer-button-secondary",style:{marginTop:"10px"},children:"内容を修正する"}),u.length>0&&i.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",padding:"12px",marginTop:"16px",fontSize:"14px",color:"#856404"},children:"上記のエラーを修正してから予約を確定してください。"})]}),i.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e0e0e0",fontSize:"12px",color:"#666666"},children:"入力された情報は安全に暗号化されて送信されます"})]})})}function m({reservationData:e,availableProducts:r=[],pricingSettings:s,lineAuthInfo:t,onManage:l,onNewReservation:c,reservationId:o}){let m=new a(s),p=e?d(e,r):0,h=e?n(e):[];return e&&(e.products?.map(e=>{let s=r.find(r=>r.id===e.productId);return`${s?.name||"不明な商品"} \xd7 ${e.quantity}`}).join(", "),e.name),i.jsx("div",{className:"form-mailer-style",children:(0,i.jsxs)("div",{className:"form-mailer-container",children:[(0,i.jsxs)("div",{className:"form-mailer-progress",children:[(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"1"}),i.jsx("span",{children:"入力"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"2"}),i.jsx("span",{children:"確認"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step active",children:[i.jsx("div",{className:"form-mailer-step-number",children:"3"}),i.jsx("span",{children:"完了"})]})]}),i.jsx("h1",{className:"form-mailer-title",children:"予約完了"}),(0,i.jsxs)("div",{className:"form-mailer-success",children:[i.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"✓"}),i.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"ご予約ありがとうございました"}),i.jsx("div",{style:{fontSize:"14px"},children:"予約が正常に完了いたしました。"})]}),o&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{children:"予約番号"})})}),(0,i.jsxs)("tbody",{children:[i.jsx("tr",{children:i.jsx("td",{style:{textAlign:"center",fontSize:"18px",fontWeight:"700",fontFamily:"monospace",color:"#333333",padding:"16px"},children:o})}),i.jsx("tr",{children:i.jsx("td",{style:{textAlign:"center",fontSize:"12px",color:"#666666",padding:"8px"},children:"この番号はお問い合わせの際に必要です"})})]})]})}),e&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{colSpan:2,children:"ご予約内容"})})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"お名前"}),i.jsx("td",{children:e.name})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"商品数"}),(0,i.jsxs)("td",{children:[e.products?.length||0,"点"]})]}),m.shouldShowTotal()&&(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"合計金額"}),(0,i.jsxs)("td",{style:{fontWeight:"600",color:"#333333"},children:["\xa5",p.toLocaleString()]})]}),h.length>0&&(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"引き取り予定日"}),i.jsx("td",{children:h.map((e,r)=>i.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"4px",fontSize:"14px",color:"#2e7d32"},children:e},r))})]})]})]})}),t&&i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{colSpan:2,children:"LINE連携完了"})})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"ユーザー名"}),i.jsx("td",{children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.profile.pictureUrl&&i.jsx("img",{src:t.profile.pictureUrl,alt:"LINE Profile",style:{width:"24px",height:"24px",borderRadius:"50%"}}),i.jsx("span",{children:t.profile.displayName})]})})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"連携状況"}),i.jsx("td",{children:"✓ 連携完了"})]})]})]})}),i.jsx("div",{className:"form-mailer-section",children:(0,i.jsxs)("table",{className:"form-mailer-table",children:[i.jsx("thead",{children:i.jsx("tr",{children:i.jsx("th",{children:"お問い合わせ先"})})}),i.jsx("tbody",{children:i.jsx("tr",{children:(0,i.jsxs)("td",{style:{textAlign:"center",padding:"20px"},children:[i.jsx("div",{style:{marginBottom:"12px",color:"#666666"},children:"予約内容の詳細やご質問は、以下までお気軽にお問い合わせください"}),(0,i.jsxs)("div",{style:{padding:"16px",backgroundColor:"#f5f5f5",border:"1px solid #e0e0e0",borderRadius:"4px"},children:[i.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#333333",marginBottom:"8px"},children:"TEL: 0120-XXX-XXX"}),i.jsx("div",{style:{fontSize:"14px",color:"#666666"},children:"営業時間：8:30～18:00（定休日：毎週水曜）"})]})]})})})]})}),(0,i.jsxs)("div",{style:{marginTop:"30px"},children:[i.jsx("button",{onClick:l,className:"form-mailer-button-secondary",style:{marginBottom:"10px"},children:"予約を変更・キャンセル"}),i.jsx("button",{onClick:c,className:"form-mailer-button",children:"新しい予約をする"})]}),(0,i.jsxs)("div",{className:"form-mailer-info",style:{marginTop:"30px"},children:[i.jsx("strong",{children:"ご注意事項"}),i.jsx("br",{}),"• 予約の変更・キャンセルは引き取り日の前日までにお願いします",i.jsx("br",{}),"• 当日の変更・キャンセルはお電話にてご連絡ください",i.jsx("br",{}),"• 商品の準備状況により、お引き取り時間が前後する場合があります"]}),i.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e0e0e0",fontSize:"12px",color:"#666666"}})]})})}function p({reservationData:e,onBack:r}){return i.jsx("div",{className:"form-mailer-container",children:(0,i.jsxs)("div",{className:"form-mailer-section",children:[i.jsx("h2",{className:"form-mailer-title",children:"予約の変更・キャンセル"}),i.jsx("div",{className:"alert alert-warning mb-4",children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[i.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),(0,i.jsxs)("div",{children:[i.jsx("h5",{className:"alert-heading mb-2",children:"予約の変更・キャンセルについて"}),(0,i.jsxs)("p",{className:"mb-0",children:["予約の変更・キャンセルをご希望の場合は、",i.jsx("br",{}),"お電話にてお問い合わせください。"]})]})]})}),e&&(0,i.jsxs)("div",{className:"form-mailer-section",children:[i.jsx("h3",{className:"h5 fw-semibold text-dark mb-3",children:"現在の予約情報"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("table",{className:"form-mailer-table",children:(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"お名前"}),i.jsx("td",{children:e.name})]}),(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"電話番号"}),i.jsx("td",{children:e.phone})]})]})})})})]}),i.jsx("div",{className:"alert alert-info mb-4",children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[i.jsx("i",{className:"bi bi-telephone-fill me-2"}),(0,i.jsxs)("div",{children:[i.jsx("h5",{className:"alert-heading mb-2",children:"お問い合わせ先"}),i.jsx("p",{className:"h4 fw-bold mb-2",children:"TEL: 0120-XXX-XXX"}),i.jsx("p",{className:"mb-0",children:"営業時間: 9:00-18:00（土日祝除く）"})]})]})}),(0,i.jsxs)("div",{className:"d-grid gap-3",children:[(0,i.jsxs)("button",{onClick:()=>{},className:"form-mailer-button",type:"button",children:[i.jsx("i",{className:"bi bi-telephone me-2"}),"電話でお問い合わせ"]}),(0,i.jsxs)("button",{onClick:r,className:"form-mailer-button form-mailer-button-secondary",type:"button",children:[i.jsx("i",{className:"bi bi-arrow-left me-2"}),"前の画面に戻る"]})]})]})})}let h=[{id:"tomato",name:"トマトの苗",price:200},{id:"cucumber",name:"きゅうりの苗",price:180},{id:"eggplant",name:"なすの苗",price:220},{id:"pepper",name:"ピーマンの苗",price:190},{id:"lettuce",name:"レタスの種",price:150},{id:"carrot",name:"にんじんの種",price:120},{id:"radish",name:"だいこんの種",price:100},{id:"spinach",name:"ほうれん草の種",price:130}];function x({pricingSettings:e,lineAuthInfo:r}){let[s,a]=(0,t.useState)("form"),[n,d]=(0,t.useState)(null),[x,u]=(0,t.useState)([{productId:"",quantity:1,pickupDate:""}]),[f,j]=(0,t.useState)({name:"",furigana:"",phone:"",zipcode:"",prefecture:"",city:"",town:"",addressDetail:"",gender:"male",birthDate:""}),[g,y]=(0,t.useState)(""),[b,v]=(0,t.useState)({}),N=()=>{let e={};f.name||(e.name="名前を入力してください"),f.phone||(e.phone="電話番号を入力してください"),(0===x.length||x.every(e=>!e.productId))&&(e.products="最低1つの商品を選択してください");let r=new Date().toISOString().split("T")[0];return x.some(e=>e.pickupDate<r)&&(e.pickupDate="引き取り日は今日以降の日付を選択してください"),v(e),0===Object.keys(e).length};switch(s){case"form":default:return i.jsx("div",{className:"form-mailer-style",children:(0,i.jsxs)("div",{className:"form-mailer-container",children:[(0,i.jsxs)("div",{className:"form-mailer-progress",children:[(0,i.jsxs)("div",{className:"form-mailer-step active",children:[i.jsx("div",{className:"form-mailer-step-number",children:"1"}),i.jsx("span",{children:"入力"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"2"}),i.jsx("span",{children:"確認"})]}),i.jsx("div",{className:"form-mailer-step-arrow",children:"→"}),(0,i.jsxs)("div",{className:"form-mailer-step",children:[i.jsx("div",{className:"form-mailer-step-number",children:"3"}),i.jsx("span",{children:"完了"})]})]}),i.jsx("h1",{className:"form-mailer-title",children:"予約フォーム"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N()&&(d({...f,products:x,comment:g}),a("confirm"))},children:[i.jsx(l,{formData:f,setFormData:j,errors:b}),i.jsx(c,{productItems:x,setProductItems:u,availableProducts:h,pricingSettings:e,errors:b}),(0,i.jsxs)("div",{className:"form-mailer-section",children:[i.jsx("label",{className:"form-mailer-label",children:"店舗へのコメント"}),i.jsx("textarea",{value:g,onChange:e=>y(e.target.value),className:"form-mailer-textarea",rows:4,placeholder:"ご要望やご質問がございましたらご記入ください（500文字以内）"}),b.comment&&i.jsx("span",{className:"form-mailer-error",children:b.comment})]}),i.jsx("button",{type:"submit",className:"form-mailer-button",children:"入力内容を確認する"})]})]})});case"confirm":return i.jsx(o,{reservationData:n,availableProducts:h,pricingSettings:e,lineAuthInfo:r,onConfirm:()=>{a("complete")},onEdit:()=>{a("form")}});case"complete":return i.jsx(m,{reservationData:n||void 0,availableProducts:h,pricingSettings:e,lineAuthInfo:r,onManage:()=>a("manage"),onNewReservation:()=>{j({name:"",furigana:"",phone:"",zipcode:"",prefecture:"",city:"",town:"",addressDetail:"",gender:"male",birthDate:""}),y(""),d(null),u([{productId:"",quantity:1,pickupDate:""}]),v({}),a("form")},reservationId:`RES-${Date.now().toString()}`});case"manage":return i.jsx(p,{reservationData:n,onBack:()=>a("complete")})}}function u(){return i.jsx("div",{className:"min-h-screen py-8",children:(0,i.jsxs)("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:"ベジライス予約システム"}),i.jsx(x,{})]})})}},908:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});let i=(0,s(8570).createProxy)(String.raw`/mnt/c/Claude/インストール/nursery-reservation-system/app/page.tsx#default`)}};var r=require("../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),i=r.X(0,[431,290],()=>s(5002));module.exports=i})();