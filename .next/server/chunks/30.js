"use strict";exports.id=30,exports.ids=[30],exports.modules={4030:(e,s,i)=>{i.d(s,{Z:()=>o});var t=i(326),a=i(7577),l=i(434),n=i(5047),r=i(1058);function c({isOpen:e,onClose:s}){let{showSuccess:i,showError:l}=(0,r.p)(),[n,c]=(0,a.useState)([]),[d,o]=(0,a.useState)(!1),m=async e=>{c(s=>s.map(s=>s.id===e?{...s,read:!0}:s))},x=async()=>{c(e=>e.map(e=>({...e,read:!0}))),i("すべての通知を既読にしました")},b=async e=>{c(s=>s.filter(s=>s.id!==e)),i("通知を削除しました")},h=e=>{switch(e){case"info":return"bi-info-circle text-primary";case"warning":return"bi-exclamation-triangle text-warning";case"success":return"bi-check-circle text-success";case"error":return"bi-x-circle text-danger";default:return"bi-bell text-secondary"}},p=e=>{e.action_url&&(window.location.href=e.action_url),m(e.id),s()},j=n.filter(e=>!e.read).length;return e?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"position-fixed w-100 h-100 top-0 start-0",style:{backgroundColor:"rgba(0,0,0,0.3)",zIndex:1040},onClick:s}),(0,t.jsxs)("div",{className:"position-fixed bg-white border shadow-lg",style:{top:"70px",right:"20px",width:"400px",maxHeight:"600px",zIndex:1050,borderRadius:"8px"},children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("h5",{className:"mb-0 fw-bold",children:"通知"}),j>0&&t.jsx("span",{className:"badge bg-danger ms-2",children:j})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[j>0&&t.jsx("button",{onClick:x,className:"btn btn-outline-primary btn-sm",title:"すべて既読にする",children:t.jsx("i",{className:"bi bi-check2-all"})}),t.jsx("button",{onClick:s,className:"btn btn-outline-secondary btn-sm",title:"閉じる",children:t.jsx("i",{className:"bi bi-x"})})]})]}),t.jsx("div",{className:"overflow-auto",style:{maxHeight:"500px"},children:d?t.jsx("div",{className:"d-flex justify-content-center p-4",children:t.jsx("div",{className:"spinner-border spinner-border-sm"})}):0===n.length?(0,t.jsxs)("div",{className:"text-center p-4 text-muted",children:[t.jsx("i",{className:"bi bi-bell-slash fs-2 d-block mb-2"}),t.jsx("p",{className:"mb-0",children:"通知はありません"})]}):n.map(e=>t.jsx("div",{className:`p-3 border-bottom ${e.read?"":"bg-light"}`,children:t.jsx("div",{className:"d-flex justify-content-between align-items-start",children:(0,t.jsxs)("div",{className:"flex-grow-1",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[t.jsx("i",{className:`${h(e.type)} me-2`}),t.jsx("h6",{className:"mb-0 fw-medium",children:e.title}),!e.read&&t.jsx("span",{className:"badge bg-primary ms-2",children:"未読"})]}),t.jsx("p",{className:"mb-2 text-muted small",children:e.message}),(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("small",{className:"text-muted",children:new Date(e.created_at).toLocaleString("ja-JP")}),(0,t.jsxs)("div",{className:"d-flex gap-1",children:[e.action_url&&t.jsx("button",{onClick:()=>p(e),className:"btn btn-outline-primary btn-sm",children:"確認"}),!e.read&&t.jsx("button",{onClick:()=>m(e.id),className:"btn btn-outline-secondary btn-sm",children:"既読"}),t.jsx("button",{onClick:()=>b(e.id),className:"btn btn-outline-danger btn-sm",children:"削除"})]})]})]})})},e.id))}),n.length>0&&t.jsx("div",{className:"p-3 border-top bg-light",children:t.jsx("div",{className:"text-center",children:t.jsx("button",{onClick:()=>{window.location.href="/admin/notifications",s()},className:"btn btn-outline-primary btn-sm",children:"すべての通知を表示"})})})]})]}):null}let d=[{href:"/admin",label:"ダッシュボード",icon:"bi-speedometer2",description:"概要とメトリクス"},{href:"/admin/reservations",label:"予約管理",icon:"bi-calendar-check",description:"予約の確認と管理"},{href:"/admin/products",label:"商品管理",icon:"bi-box-seam",description:"商品と在庫の管理"},{href:"/admin/customers",label:"顧客管理",icon:"bi-people",description:"顧客情報の管理"},{href:"/admin/forms",label:"フォーム管理",icon:"bi-file-earmark-text",description:"予約フォームの設定"},{href:"/admin/notifications",label:"通知管理",icon:"bi-bell",description:"通知とメッセージ"}];function o({children:e}){let[s,i]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[b,h]=(0,a.useState)(!1),p=(0,n.usePathname)(),j=e=>"/admin"===e?"/admin"===p:p.startsWith(e);return(0,t.jsxs)("div",{className:"d-flex",children:[s&&t.jsx("div",{className:"position-fixed w-100 h-100 d-lg-none",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1040},onClick:()=>i(!1)}),t.jsx("nav",{className:`bg-white border-end shadow-sm position-fixed ${s?"d-block":"d-none d-lg-block"}`,style:{width:"280px",height:"100vh",zIndex:1030,left:0,top:0,background:"linear-gradient(180deg, #7cb342 0%, #8bc34a 100%)"},children:(0,t.jsxs)("div",{className:"d-flex flex-column h-100",children:[t.jsx("div",{className:"p-4 border-bottom border-white border-opacity-25",children:t.jsx(l.default,{href:"/admin",className:"text-decoration-none",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("div",{className:"rounded-3 p-2 me-3",style:{background:"rgba(255, 255, 255, 0.2)"},children:t.jsx("i",{className:"bi bi-flower3 text-white fs-4"})}),(0,t.jsxs)("div",{children:[t.jsx("h5",{className:"mb-0 text-white fw-bold",children:"ベジライス"}),t.jsx("small",{className:"text-white text-opacity-75",children:"予約管理システム"})]})]})})}),t.jsx("div",{className:"flex-grow-1 overflow-auto",children:t.jsx("ul",{className:"nav flex-column",children:d.map(e=>t.jsx("li",{className:"nav-item",children:(0,t.jsxs)(l.default,{href:e.href,className:`nav-link d-flex align-items-center py-3 px-4 text-decoration-none ${j(e.href)?"bg-white bg-opacity-25 text-white border-end border-white border-3":"text-white text-opacity-75 hover:bg-white hover:bg-opacity-10"}`,onClick:()=>i(!1),children:[t.jsx("i",{className:`${e.icon} me-3`}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"fw-medium",children:e.label}),t.jsx("small",{className:`${j(e.href)?"text-white text-opacity-75":"text-white text-opacity-50"} d-block`,children:e.description})]})]})},e.href))})}),t.jsx("div",{className:"p-4 border-top border-white border-opacity-25",children:(0,t.jsxs)("div",{className:"d-flex align-items-center text-white text-opacity-75",children:[t.jsx("i",{className:"bi bi-person-circle me-2"}),t.jsx("small",{children:"管理者"})]})})]})}),(0,t.jsxs)("main",{className:"flex-grow-1",style:{marginLeft:"280px",minHeight:"100vh",background:"linear-gradient(135deg, #f1f8e9 0%, #e8f5e8 100%)"},children:[t.jsx("header",{className:"border-bottom shadow-sm sticky-top",style:{height:"64px",zIndex:1020,background:"linear-gradient(90deg, #8bc34a 0%, #7cb342 100%)"},children:(0,t.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100 h-100 px-4",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[t.jsx("button",{className:"btn btn-light d-lg-none me-3",onClick:()=>i(!s),children:t.jsx("i",{className:"bi bi-list fs-4 text-white"})}),t.jsx("h4",{className:"mb-0 text-white fw-bold",children:d.find(e=>j(e.href))?.label||"ダッシュボード"})]}),(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsxs)("button",{onClick:()=>{x(!0)},className:"btn btn-outline-light text-white me-3 position-relative border-white",title:"通知を確認",children:[t.jsx("i",{className:"bi bi-bell fs-5"}),t.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.6rem"},children:"3"})]}),t.jsx("button",{onClick:()=>{h(!0),window.location.href="/admin/settings"},className:"btn btn-outline-light text-white border-white",title:"設定",children:t.jsx("i",{className:"bi bi-gear fs-5"})})]})]})}),t.jsx("div",{className:"p-4",style:{background:"transparent"},children:e})]}),t.jsx(c,{isOpen:m,onClose:()=>x(!1)})]})}}};