"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{4282:function(e,t,s){s.d(t,{Z:function(){return c}});var n=s(7437),a=s(2265),i=s(7648),l=s(9376);let r=[{href:"/admin",label:"ダッシュボード",icon:"bi-speedometer2",description:"概要とメトリクス"},{href:"/admin/reservations",label:"予約管理",icon:"bi-calendar-check",description:"予約の確認と管理"},{href:"/admin/products",label:"商品管理",icon:"bi-box-seam",description:"商品と在庫の管理"},{href:"/admin/customers",label:"顧客管理",icon:"bi-people",description:"顧客情報の管理"},{href:"/admin/forms",label:"フォーム管理",icon:"bi-file-earmark-text",description:"予約フォームの設定"},{href:"/admin/notifications",label:"通知管理",icon:"bi-bell",description:"通知とメッセージ"}];function c(e){var t;let{children:s}=e,[c,o]=(0,a.useState)(!1),d=(0,l.usePathname)(),m=e=>"/admin"===e?"/admin"===d:d.startsWith(e);return(0,n.jsxs)("div",{className:"admin-layout",children:[c&&(0,n.jsx)("div",{className:"position-fixed w-100 h-100 d-lg-none",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:999},onClick:()=>o(!1)}),(0,n.jsx)("nav",{className:"admin-sidebar d-lg-block ".concat(c?"show":""),children:(0,n.jsxs)("div",{className:"d-flex flex-column h-100",children:[(0,n.jsx)("div",{className:"p-4 border-bottom",children:(0,n.jsx)(i.default,{href:"/admin",className:"text-decoration-none",children:(0,n.jsxs)("div",{className:"d-flex align-items-center",children:[(0,n.jsx)("div",{className:"bg-primary rounded-3 p-2 me-3",children:(0,n.jsx)("i",{className:"bi bi-flower3 text-white fs-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"mb-0 text-dark fw-bold",children:"種苗店管理"}),(0,n.jsx)("small",{className:"text-muted",children:"予約システム"})]})]})})}),(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto",children:(0,n.jsx)("ul",{className:"nav nav-sidebar flex-column",children:r.map(e=>(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsxs)(i.default,{href:e.href,className:"nav-link d-flex align-items-center ".concat(m(e.href)?"active":""),onClick:()=>o(!1),children:[(0,n.jsx)("i",{className:"".concat(e.icon," me-3")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"fw-medium",children:e.label}),(0,n.jsx)("small",{className:"text-muted d-block",children:e.description})]})]})},e.href))})}),(0,n.jsx)("div",{className:"p-4 border-top",children:(0,n.jsxs)("div",{className:"d-flex align-items-center text-muted",children:[(0,n.jsx)("i",{className:"bi bi-person-circle me-2"}),(0,n.jsx)("small",{children:"管理者"})]})})]})}),(0,n.jsxs)("main",{className:"admin-main",children:[(0,n.jsx)("header",{className:"admin-header",children:(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center",children:[(0,n.jsx)("button",{className:"btn btn-link d-lg-none p-0 me-3",onClick:()=>o(!c),children:(0,n.jsx)("i",{className:"bi bi-list fs-4"})}),(0,n.jsx)("h4",{className:"mb-0 text-dark",children:(null===(t=r.find(e=>m(e.href)))||void 0===t?void 0:t.label)||"ダッシュボード"})]}),(0,n.jsxs)("div",{className:"d-flex align-items-center",children:[(0,n.jsxs)("button",{className:"btn btn-link text-muted me-3 position-relative",children:[(0,n.jsx)("i",{className:"bi bi-bell fs-5"}),(0,n.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.6rem"},children:"3"})]}),(0,n.jsx)("button",{className:"btn btn-link text-muted",children:(0,n.jsx)("i",{className:"bi bi-gear fs-5"})})]})]})}),(0,n.jsx)("div",{className:"admin-content",children:s})]})]})}},2549:function(e,t,s){s.d(t,{Z:function(){return d}});var n=s(7437),a=s(2265),i=s(2141),l=s(9703),r=s(5566);class c{static async sendReservationConfirmation(e){try{var t,s,n,a,l;let{data:r,error:c}=await i.OQ.from("reservations").select("\n          *,\n          customer:customers(*),\n          reservation_items(\n            *,\n            product:products(*)\n          )\n        ").eq("id",e).single();if(c||!r)throw Error("予約データが見つかりません");let o={customerId:r.customer_id,name:(null===(t=r.customer)||void 0===t?void 0:t.full_name)||"顧客",phone:null===(s=r.customer)||void 0===s?void 0:s.phone,email:null===(n=r.customer)||void 0===n?void 0:n.email,lineUserId:null===(a=r.customer)||void 0===a?void 0:a.line_user_id},d={subject:"【予約確定】".concat(r.reservation_number),message:this.generateConfirmationMessage(r),templateData:{reservationNumber:r.reservation_number,customerName:o.name,reservationDate:r.reservation_date,pickupTime:"".concat(r.pickup_time_start||""," - ").concat(r.pickup_time_end||"").trim(),totalAmount:r.final_amount,items:(null===(l=r.reservation_items)||void 0===l?void 0:l.map(e=>{var t;return{name:null===(t=e.product)||void 0===t?void 0:t.name,quantity:e.quantity,price:e.unit_price}}))||[]}},m=await this.sendMultiChannelNotification(o,d);return await this.logNotificationSent(e,"confirmation",m),{success:Object.values(m).some(e=>e.success),results:m}}catch(e){return console.error("予約確定通知の送信に失敗:",e),{success:!1,results:{}}}}static async sendPickupReminder(e){try{var t,s,n,a;let{data:l,error:r}=await i.OQ.from("reservations").select("\n          *,\n          customer:customers(*)\n        ").eq("id",e).single();if(r||!l)throw Error("予約データが見つかりません");let c={customerId:l.customer_id,name:(null===(t=l.customer)||void 0===t?void 0:t.full_name)||"顧客",phone:null===(s=l.customer)||void 0===s?void 0:s.phone,email:null===(n=l.customer)||void 0===n?void 0:n.email,lineUserId:null===(a=l.customer)||void 0===a?void 0:a.line_user_id},o={subject:"【受取リマインダー】".concat(l.reservation_number),message:this.generateReminderMessage(l),templateData:{reservationNumber:l.reservation_number,customerName:c.name,reservationDate:l.reservation_date,pickupTime:"".concat(l.pickup_time_start||""," - ").concat(l.pickup_time_end||"").trim()}},d=await this.sendMultiChannelNotification(c,o);return await i.OQ.from("reservations").update({reminder_sent_at:new Date().toISOString()}).eq("id",e),await this.logNotificationSent(e,"reminder",d),{success:Object.values(d).some(e=>e.success),results:d}}catch(e){return console.error("リマインダー通知の送信に失敗:",e),{success:!1,results:{}}}}static async sendMultiChannelNotification(e,t){let s={};return this.config.lineEnabled&&e.lineUserId&&(s.line=await this.sendLineMessage(e.lineUserId,t)),this.config.emailEnabled&&e.email&&(s.email=await this.sendEmail(e.email,t)),this.config.smsEnabled&&e.phone&&(s.sms=await this.sendSMS(e.phone,t)),s}static async sendLineMessage(e,t){try{if(!this.config.lineAccessToken)return{success:!1,error:"LINE Access Token が設定されていません"};let s=await fetch("https://api.line.me/v2/bot/message/push",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.config.lineAccessToken)},body:JSON.stringify({to:e,messages:[{type:"text",text:t.message}]})});if(!s.ok){let e=await s.text();return{success:!1,error:"LINE API Error: ".concat(e)}}return{success:!0}}catch(e){return{success:!1,error:e.message}}}static async sendEmail(e,t){try{return console.log("Email sent to:",e,"Subject:",t.subject),{success:!0}}catch(e){return{success:!1,error:e.message}}}static async sendSMS(e,t){try{return console.log("SMS sent to:",e,"Message:",t.message),{success:!0}}catch(e){return{success:!1,error:e.message}}}static async logNotificationSent(e,t,s){try{console.log("Notification log:",{reservationId:e,type:t,results:s,sentAt:new Date().toISOString()})}catch(e){console.error("通知ログの記録に失敗:",e)}}static generateConfirmationMessage(e){var t,s;let n=(null===(t=e.reservation_items)||void 0===t?void 0:t.map(e=>{var t;return"・".concat(null===(t=e.product)||void 0===t?void 0:t.name," \xd7 ").concat(e.quantity,"個")}).join("\n"))||"";return"【予約確定のお知らせ】\n\n".concat(null===(s=e.customer)||void 0===s?void 0:s.full_name," 様\n\nご予約いただきありがとうございます。\n以下の内容で予約が確定いたしました。\n\n■予約番号: ").concat(e.reservation_number,"\n■受取日: ").concat(new Date(e.reservation_date).toLocaleDateString(),"\n■受取時間: ").concat(e.pickup_time_start||""," - ").concat(e.pickup_time_end||"","\n\n■ご注文内容:\n").concat(n,"\n\n■合計金額: \xa5").concat(e.final_amount.toLocaleString(),"\n\n受取日にお越しください。\nご不明な点がございましたらお気軽にお問い合わせください。\n\n園芸用品予約システム")}static generateReminderMessage(e){var t;return"【受取リマインダー】\n\n".concat(null===(t=e.customer)||void 0===t?void 0:t.full_name," 様\n\n明日は商品の受取日です。\n\n■予約番号: ").concat(e.reservation_number,"\n■受取日: ").concat(new Date(e.reservation_date).toLocaleDateString(),"\n■受取時間: ").concat(e.pickup_time_start||""," - ").concat(e.pickup_time_end||"","\n\nお忘れのないようお気をつけてお越しください。\n\n園芸用品予約システム")}static updateConfig(e){this.config={...this.config,...e}}static getConfig(){return{...this.config}}}c.config={lineEnabled:!0,emailEnabled:!0,smsEnabled:!1,lineAccessToken:r.env.LINE_CHANNEL_ACCESS_TOKEN,emailConfig:{smtpHost:r.env.SMTP_HOST||"smtp.gmail.com",smtpPort:parseInt(r.env.SMTP_PORT||"587"),smtpUser:r.env.SMTP_USER||"",smtpPassword:r.env.SMTP_PASSWORD||"",fromEmail:r.env.FROM_EMAIL||"noreply@nursery.com",fromName:r.env.FROM_NAME||"園芸用品予約システム"}};class o{static async generateReservationPDF(e){try{var t,s,n,a;let{data:l,error:r}=await i.OQ.from("reservations").select("\n          *,\n          customer:customers (\n            full_name,\n            phone,\n            email\n          ),\n          reservation_items (\n            quantity,\n            unit_price,\n            subtotal,\n            product:products (\n              name,\n              price\n            )\n          )\n        ").eq("id",e).single();if(r||!l)throw Error("予約データの取得に失敗しました");let c={id:l.id,reservation_number:l.reservation_number,customer_name:(null===(t=l.customer)||void 0===t?void 0:t.full_name)||"不明",customer_phone:(null===(s=l.customer)||void 0===s?void 0:s.phone)||"",customer_email:null===(n=l.customer)||void 0===n?void 0:n.email,reservation_date:l.reservation_date,pickup_time_start:l.pickup_time_start,pickup_time_end:l.pickup_time_end,status:l.status,items:(null===(a=l.reservation_items)||void 0===a?void 0:a.map(e=>{var t;return{product_name:(null===(t=e.product)||void 0===t?void 0:t.name)||"不明",quantity:e.quantity,unit_price:e.unit_price,subtotal:e.subtotal}}))||[],total_amount:l.total_amount,discount_amount:l.discount_amount,final_amount:l.final_amount,notes:l.notes,admin_notes:l.admin_notes,created_at:l.created_at};return this.generateReservationPDFHTML(c)}catch(e){throw console.error("PDF生成エラー:",e),Error("PDF生成に失敗しました")}}static async generateDailyReportPDF(e){try{let{data:t,error:s}=await i.OQ.from("reservations").select("\n          *,\n          customer:customers (\n            full_name,\n            phone,\n            email\n          ),\n          reservation_items (\n            quantity,\n            unit_price,\n            subtotal,\n            product:products (\n              name,\n              price\n            )\n          )\n        ").eq("reservation_date",e).order("pickup_time_start",{ascending:!0});if(s)throw Error("予約データの取得に失敗しました");let n=(null==t?void 0:t.map(e=>{var t,s,n,a;return{id:e.id,reservation_number:e.reservation_number,customer_name:(null===(t=e.customer)||void 0===t?void 0:t.full_name)||"不明",customer_phone:(null===(s=e.customer)||void 0===s?void 0:s.phone)||"",customer_email:null===(n=e.customer)||void 0===n?void 0:n.email,reservation_date:e.reservation_date,pickup_time_start:e.pickup_time_start,pickup_time_end:e.pickup_time_end,status:e.status,items:(null===(a=e.reservation_items)||void 0===a?void 0:a.map(e=>{var t;return{product_name:(null===(t=e.product)||void 0===t?void 0:t.name)||"不明",quantity:e.quantity,unit_price:e.unit_price,subtotal:e.subtotal}}))||[],total_amount:e.total_amount,discount_amount:e.discount_amount,final_amount:e.final_amount,notes:e.notes,admin_notes:e.admin_notes,created_at:e.created_at}}))||[],a={by_status:n.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),by_time_slot:n.reduce((e,t)=>{let s=t.pickup_time_start?"".concat(t.pickup_time_start,"-").concat(t.pickup_time_end):"時間未指定";return e[s]=(e[s]||0)+1,e},{})},l={date:e,total_reservations:n.length,total_amount:n.reduce((e,t)=>e+t.final_amount,0),reservations:n,summary:a};return this.generateDailyReportPDFHTML(l)}catch(e){throw console.error("日次レポートPDF生成エラー:",e),Error("日次レポートPDF生成に失敗しました")}}static generateReservationPDFHTML(e){let t={pending:"保留中",confirmed:"確定",ready:"準備完了",completed:"完了",cancelled:"キャンセル"}[e.status]||e.status,s=e.pickup_time_start&&e.pickup_time_end?"".concat(e.pickup_time_start," - ").concat(e.pickup_time_end):"時間未指定";return'\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <title>注文書 - '.concat(e.reservation_number,"</title>\n  <style>\n    body { font-family: 'Helvetica', 'Arial', sans-serif; font-size: 12px; margin: 20px; }\n    .header { text-align: center; margin-bottom: 30px; }\n    .header h1 { font-size: 24px; margin-bottom: 10px; }\n    .info-section { margin-bottom: 20px; }\n    .info-section h2 { font-size: 16px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }\n    .info-item { margin-bottom: 10px; }\n    .info-item label { font-weight: bold; margin-right: 10px; }\n    .items-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n    .items-table th, .items-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n    .items-table th { background-color: #f5f5f5; font-weight: bold; }\n    .items-table .number { text-align: right; }\n    .total-section { margin-top: 20px; }\n    .total-row { display: flex; justify-content: space-between; margin-bottom: 5px; }\n    .total-row.final { font-weight: bold; font-size: 14px; border-top: 2px solid #333; padding-top: 10px; }\n    .notes { margin-top: 20px; padding: 10px; background-color: #f9f9f9; border-radius: 5px; }\n    .footer { margin-top: 30px; text-align: center; font-size: 10px; color: #666; }\n  </style>\n</head>\n<body>\n  <div class=\"header\">\n    <h1>注文書</h1>\n    <p>予約番号: ").concat(e.reservation_number,'</p>\n  </div>\n\n  <div class="info-grid">\n    <div class="info-section">\n      <h2>顧客情報</h2>\n      <div class="info-item">\n        <label>氏名:</label>\n        <span>').concat(e.customer_name,'</span>\n      </div>\n      <div class="info-item">\n        <label>電話番号:</label>\n        <span>').concat(e.customer_phone,"</span>\n      </div>\n      ").concat(e.customer_email?'\n      <div class="info-item">\n        <label>メールアドレス:</label>\n        <span>'.concat(e.customer_email,"</span>\n      </div>\n      "):"",'\n    </div>\n\n    <div class="info-section">\n      <h2>予約情報</h2>\n      <div class="info-item">\n        <label>受取日:</label>\n        <span>').concat(new Date(e.reservation_date).toLocaleDateString("ja-JP"),'</span>\n      </div>\n      <div class="info-item">\n        <label>受取時間:</label>\n        <span>').concat(s,'</span>\n      </div>\n      <div class="info-item">\n        <label>ステータス:</label>\n        <span>').concat(t,'</span>\n      </div>\n      <div class="info-item">\n        <label>予約日時:</label>\n        <span>').concat(new Date(e.created_at).toLocaleString("ja-JP"),'</span>\n      </div>\n    </div>\n  </div>\n\n  <div class="info-section">\n    <h2>注文内容</h2>\n    <table class="items-table">\n      <thead>\n        <tr>\n          <th>商品名</th>\n          <th class="number">数量</th>\n          <th class="number">単価</th>\n          <th class="number">小計</th>\n        </tr>\n      </thead>\n      <tbody>\n        ').concat(e.items.map(e=>"\n        <tr>\n          <td>".concat(e.product_name,'</td>\n          <td class="number">').concat(e.quantity,'</td>\n          <td class="number">\xa5').concat(e.unit_price.toLocaleString(),'</td>\n          <td class="number">\xa5').concat(e.subtotal.toLocaleString(),"</td>\n        </tr>\n        ")).join(""),'\n      </tbody>\n    </table>\n\n    <div class="total-section">\n      <div class="total-row">\n        <span>小計:</span>\n        <span>\xa5').concat(e.total_amount.toLocaleString(),"</span>\n      </div>\n      ").concat(e.discount_amount>0?'\n      <div class="total-row">\n        <span>割引:</span>\n        <span>-\xa5'.concat(e.discount_amount.toLocaleString(),"</span>\n      </div>\n      "):"",'\n      <div class="total-row final">\n        <span>合計:</span>\n        <span>\xa5').concat(e.final_amount.toLocaleString(),"</span>\n      </div>\n    </div>\n  </div>\n\n  ").concat(e.notes?'\n  <div class="notes">\n    <h3>お客様備考</h3>\n    <p>'.concat(e.notes,"</p>\n  </div>\n  "):"","\n\n  ").concat(e.admin_notes?'\n  <div class="notes">\n    <h3>管理メモ</h3>\n    <p>'.concat(e.admin_notes,"</p>\n  </div>\n  "):"",'\n\n  <div class="footer">\n    <p>種苗店予約システム - 発行日: ').concat(new Date().toLocaleString("ja-JP"),"</p>\n  </div>\n</body>\n</html>\n    ")}static generateDailyReportPDFHTML(e){return'\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <title>日次予約レポート - '.concat(e.date,"</title>\n  <style>\n    body { font-family: 'Helvetica', 'Arial', sans-serif; font-size: 12px; margin: 20px; }\n    .header { text-align: center; margin-bottom: 30px; }\n    .header h1 { font-size: 24px; margin-bottom: 10px; }\n    .summary { margin-bottom: 30px; }\n    .summary-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }\n    .summary-item { background-color: #f5f5f5; padding: 15px; border-radius: 5px; }\n    .summary-item h3 { margin-top: 0; }\n    .reservations-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n    .reservations-table th, .reservations-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n    .reservations-table th { background-color: #f5f5f5; font-weight: bold; }\n    .reservations-table .number { text-align: right; }\n    .status-badge { padding: 2px 6px; border-radius: 3px; font-size: 9px; }\n    .status-pending { background-color: #fef3c7; color: #92400e; }\n    .status-confirmed { background-color: #d1fae5; color: #065f46; }\n    .status-ready { background-color: #dbeafe; color: #1e40af; }\n    .status-completed { background-color: #f3f4f6; color: #374151; }\n    .status-cancelled { background-color: #fee2e2; color: #991b1b; }\n    .footer { margin-top: 30px; text-align: center; font-size: 10px; color: #666; }\n  </style>\n</head>\n<body>\n  <div class=\"header\">\n    <h1>日次予約レポート</h1>\n    <p>対象日: ").concat(new Date(e.date).toLocaleDateString("ja-JP"),'</p>\n  </div>\n\n  <div class="summary">\n    <div class="summary-grid">\n      <div class="summary-item">\n        <h3>予約概要</h3>\n        <p>総予約数: ').concat(e.total_reservations,"件</p>\n        <p>総金額: \xa5").concat(e.total_amount.toLocaleString(),'</p>\n      </div>\n      <div class="summary-item">\n        <h3>ステータス別</h3>\n        ').concat(Object.entries(e.summary.by_status).map(e=>{let[t,s]=e;return"\n        <p>".concat(t,": ").concat(s,"件</p>\n        ")}).join(""),'\n      </div>\n    </div>\n  </div>\n\n  <table class="reservations-table">\n    <thead>\n      <tr>\n        <th>予約番号</th>\n        <th>顧客名</th>\n        <th>電話番号</th>\n        <th>受取時間</th>\n        <th>ステータス</th>\n        <th>商品数</th>\n        <th class="number">金額</th>\n        <th>備考</th>\n      </tr>\n    </thead>\n    <tbody>\n      ').concat(e.reservations.map(e=>{let t="status-".concat(e.status),s={pending:"保留中",confirmed:"確定",ready:"準備完了",completed:"完了",cancelled:"キャンセル"}[e.status]||e.status,n=e.pickup_time_start&&e.pickup_time_end?"".concat(e.pickup_time_start,"-").concat(e.pickup_time_end):"未指定";return"\n        <tr>\n          <td>".concat(e.reservation_number,"</td>\n          <td>").concat(e.customer_name,"</td>\n          <td>").concat(e.customer_phone,"</td>\n          <td>").concat(n,'</td>\n          <td><span class="status-badge ').concat(t,'">').concat(s,"</span></td>\n          <td>").concat(e.items.length,'</td>\n          <td class="number">\xa5').concat(e.final_amount.toLocaleString(),"</td>\n          <td>").concat(e.notes||e.admin_notes||"","</td>\n        </tr>\n        ")}).join(""),'\n    </tbody>\n  </table>\n\n  <div class="footer">\n    <p>種苗店予約システム - 発行日: ').concat(new Date().toLocaleString("ja-JP"),"</p>\n  </div>\n</body>\n</html>\n    ")}static printHTML(e){let t=window.open("","_blank");t&&(t.document.write(e),t.document.close(),t.focus(),t.print())}}function d(){var e,t,s,r;let{showSuccess:d,showError:m}=(0,l.p)(),[u,h]=(0,a.useState)([]),[p,x]=(0,a.useState)(!0),[v,b]=(0,a.useState)("all"),[f,g]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[_,w]=(0,a.useState)(null),[y,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Z()},[]);let Z=async()=>{try{let{data:e,error:t}=await i.OQ.from("reservations").select("\n          *,\n          customer:customers(*),\n          reservation_items(\n            *,\n            product:products(*)\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;h(e||[])}catch(e){console.error("予約データの取得に失敗しました:",e),h([])}finally{x(!1)}},S=async(e,t)=>{try{let{error:s}=await i.OQ.from("reservations").update({status:t,..."confirmed"===t&&{confirmation_sent_at:new Date().toISOString()}}).eq("id",e);if(s)throw s;h(u.map(s=>s.id===e?{...s,status:t}:s)),"confirmed"===t&&await D(e),d("ステータスを更新しました","予約ステータスが正常に更新されました。")}catch(e){console.error("ステータスの更新に失敗しました:",e),m("ステータス更新に失敗しました",(null==e?void 0:e.message)||"ステータスの更新中にエラーが発生しました。")}},D=async e=>{try{var t,s,n,a,i,l;d("通知送信中...","予約確定通知を送信しています");let r=await c.sendReservationConfirmation(e);if(r.success){let e="予約確定通知を送信しました",a=[];(null===(t=r.results.line)||void 0===t?void 0:t.success)&&a.push("LINE"),(null===(s=r.results.email)||void 0===s?void 0:s.success)&&a.push("メール"),(null===(n=r.results.sms)||void 0===n?void 0:n.success)&&a.push("SMS"),a.length>0&&(e+=" (".concat(a.join("、"),")")),d("通知送信完了",e)}else{let e=[];(null===(a=r.results.line)||void 0===a?void 0:a.error)&&e.push("LINE: ".concat(r.results.line.error)),(null===(i=r.results.email)||void 0===i?void 0:i.error)&&e.push("メール: ".concat(r.results.email.error)),(null===(l=r.results.sms)||void 0===l?void 0:l.error)&&e.push("SMS: ".concat(r.results.sms.error)),m("通知送信に失敗しました",e.join("\n")||"通知の送信中にエラーが発生しました")}}catch(e){console.error("通知送信エラー:",e),m("通知送信エラー",e.message||"通知の送信中にエラーが発生しました")}},P=async e=>{try{var t,s,n,a,i,l;d("リマインダー送信中...","受取リマインダーを送信しています");let r=await c.sendPickupReminder(e);if(r.success){let e="受取リマインダーを送信しました",a=[];(null===(t=r.results.line)||void 0===t?void 0:t.success)&&a.push("LINE"),(null===(s=r.results.email)||void 0===s?void 0:s.success)&&a.push("メール"),(null===(n=r.results.sms)||void 0===n?void 0:n.success)&&a.push("SMS"),a.length>0&&(e+=" (".concat(a.join("、"),")")),d("リマインダー送信完了",e)}else{let e=[];(null===(a=r.results.line)||void 0===a?void 0:a.error)&&e.push("LINE: ".concat(r.results.line.error)),(null===(i=r.results.email)||void 0===i?void 0:i.error)&&e.push("メール: ".concat(r.results.email.error)),(null===(l=r.results.sms)||void 0===l?void 0:l.error)&&e.push("SMS: ".concat(r.results.sms.error)),m("リマインダー送信に失敗しました",e.join("\n")||"リマインダーの送信中にエラーが発生しました")}}catch(e){console.error("リマインダー送信エラー:",e),m("リマインダー送信エラー",e.message||"リマインダーの送信中にエラーが発生しました")}},I=async e=>{try{d("PDF生成中...","注文書PDFを生成しています");let t=await o.generateReservationPDF(e);o.printHTML(t),d("PDF生成完了","注文書PDFを生成しました")}catch(e){console.error("PDF生成エラー:",e),m("PDF生成エラー",e.message||"PDFの生成中にエラーが発生しました")}},C=async()=>{try{let e=new Date().toISOString().split("T")[0];d("PDF生成中...","".concat(e,"の予約レポートを生成しています"));let t=await o.generateDailyReportPDF(e);o.printHTML(t),d("PDF生成完了","当日の予約レポートを生成しました")}catch(e){console.error("PDF生成エラー:",e),m("PDF生成エラー",e.message||"PDFの生成中にエラーが発生しました")}},L=e=>{let t={pending:{label:"保留中",className:"bg-warning-subtle text-warning"},confirmed:{label:"確定",className:"bg-success-subtle text-success"},ready:{label:"準備完了",className:"bg-info-subtle text-info"},completed:{label:"完了",className:"bg-secondary-subtle text-secondary"},cancelled:{label:"キャンセル",className:"bg-danger-subtle text-danger"}},s=t[e]||t.pending;return(0,n.jsx)("span",{className:"badge ".concat(s.className),children:s.label})},E=u.filter(e=>{var t,s;let n="all"===v||e.status===v,a=!f||e.reservation_date===f,i=!j||e.reservation_number.toLowerCase().includes(j.toLowerCase())||(null===(t=e.customer)||void 0===t?void 0:t.full_name.toLowerCase().includes(j.toLowerCase()))||(null===(s=e.customer)||void 0===s?void 0:s.phone.includes(j));return n&&a&&i}),M=e=>{w(e),k(!0)};return p?(0,n.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"256px"},children:(0,n.jsx)("div",{className:"loading-spinner"})}):(0,n.jsxs)("div",{className:"container-fluid py-4",children:[(0,n.jsx)("div",{className:"row mb-4",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,n.jsx)("h2",{className:"h2 fw-bold text-dark",children:"予約一覧"}),(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsxs)("button",{className:"btn btn-success",children:[(0,n.jsx)("i",{className:"bi bi-file-earmark-plus me-2"}),"新規予約追加"]}),(0,n.jsxs)("button",{onClick:C,className:"btn btn-outline-primary",children:[(0,n.jsx)("i",{className:"bi bi-file-earmark-bar-graph me-2"}),"当日レポートPDF"]})]})]})})}),(0,n.jsx)("div",{className:"row mb-4",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"card-body",children:(0,n.jsxs)("div",{className:"row g-3",children:[(0,n.jsxs)("div",{className:"col-lg-3 col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"ステータス"}),(0,n.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"form-select",children:[(0,n.jsx)("option",{value:"all",children:"すべてのステータス"}),(0,n.jsx)("option",{value:"pending",children:"保留中"}),(0,n.jsx)("option",{value:"confirmed",children:"確定"}),(0,n.jsx)("option",{value:"ready",children:"準備完了"}),(0,n.jsx)("option",{value:"completed",children:"完了"}),(0,n.jsx)("option",{value:"cancelled",children:"キャンセル"})]})]}),(0,n.jsxs)("div",{className:"col-lg-3 col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"受取日"}),(0,n.jsx)("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"form-control"})]}),(0,n.jsxs)("div",{className:"col-lg-4 col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"検索"}),(0,n.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"予約番号、顧客名、電話番号で検索",className:"form-control"})]}),(0,n.jsx)("div",{className:"col-lg-2 col-md-6 d-flex align-items-end",children:(0,n.jsxs)("div",{className:"text-muted small",children:[E.length," 件の予約"]})})]})})})})}),(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"d-none d-lg-block",children:(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-hover",children:[(0,n.jsx)("thead",{className:"table-light",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"予約情報"}),(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"顧客情報"}),(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"受取日時"}),(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"金額"}),(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"ステータス"}),(0,n.jsx)("th",{className:"fw-medium text-muted text-uppercase small",children:"アクション"})]})}),(0,n.jsx)("tbody",{children:E.map(e=>{var t,s,a;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"px-3 py-3",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"fw-medium text-dark",children:e.reservation_number}),(0,n.jsxs)("div",{className:"small text-muted",children:["作成: ",new Date(e.created_at).toLocaleDateString()]}),e.notes&&(0,n.jsxs)("div",{className:"small text-muted mt-1",children:[(0,n.jsx)("i",{className:"bi bi-file-earmark-text me-1"}),e.notes]})]})}),(0,n.jsx)("td",{className:"px-3 py-3",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"fw-medium text-dark",children:null===(t=e.customer)||void 0===t?void 0:t.full_name}),(0,n.jsxs)("div",{className:"small text-muted",children:[(0,n.jsx)("i",{className:"bi bi-telephone me-1"}),null===(s=e.customer)||void 0===s?void 0:s.phone]}),(null===(a=e.customer)||void 0===a?void 0:a.email)&&(0,n.jsxs)("div",{className:"small text-muted",children:[(0,n.jsx)("i",{className:"bi bi-envelope me-1"}),e.customer.email]})]})}),(0,n.jsxs)("td",{className:"px-3 py-3",children:[(0,n.jsx)("div",{className:"text-dark",children:new Date(e.reservation_date).toLocaleDateString()}),e.pickup_time_start&&e.pickup_time_end&&(0,n.jsxs)("div",{className:"small text-muted",children:[e.pickup_time_start," - ",e.pickup_time_end]})]}),(0,n.jsxs)("td",{className:"px-3 py-3",children:[(0,n.jsxs)("div",{className:"fw-medium text-dark",children:["\xa5",e.final_amount.toLocaleString()]}),e.discount_amount>0&&(0,n.jsxs)("div",{className:"small text-success",children:["割引: -\xa5",e.discount_amount.toLocaleString()]})]}),(0,n.jsx)("td",{className:"px-3 py-3",children:(0,n.jsxs)("select",{value:e.status,onChange:t=>S(e.id,t.target.value),className:"form-select form-select-sm",children:[(0,n.jsx)("option",{value:"pending",children:"保留中"}),(0,n.jsx)("option",{value:"confirmed",children:"確定"}),(0,n.jsx)("option",{value:"ready",children:"準備完了"}),(0,n.jsx)("option",{value:"completed",children:"完了"}),(0,n.jsx)("option",{value:"cancelled",children:"キャンセル"})]})}),(0,n.jsx)("td",{className:"px-3 py-3",children:(0,n.jsxs)("div",{className:"d-flex gap-1",children:[(0,n.jsxs)("button",{onClick:()=>M(e),className:"btn btn-outline-primary btn-sm",children:[(0,n.jsx)("i",{className:"bi bi-eye me-1"}),"詳細"]}),(0,n.jsx)("button",{onClick:()=>I(e.id),className:"btn btn-outline-secondary btn-sm",title:"注文書PDFを生成",children:(0,n.jsx)("i",{className:"bi bi-file-earmark-pdf"})}),"confirmed"===e.status&&!e.reminder_sent_at&&(0,n.jsx)("button",{onClick:()=>P(e.id),className:"btn btn-outline-warning btn-sm",title:"受取リマインダーを送信",children:(0,n.jsx)("i",{className:"bi bi-bell"})}),(0,n.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:(0,n.jsx)("i",{className:"bi bi-pencil"})})]})})]},e.id)})})]})})}),(0,n.jsx)("div",{className:"d-lg-none",children:(0,n.jsx)("div",{className:"card-body p-0",children:E.map(e=>{var t,s;return(0,n.jsxs)("div",{className:"border-bottom p-3",children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"fw-medium text-dark",children:e.reservation_number}),(0,n.jsx)("div",{className:"text-muted",children:null===(t=e.customer)||void 0===t?void 0:t.full_name})]}),(0,n.jsx)("div",{children:L(e.status)})]}),(0,n.jsxs)("div",{className:"row g-3 mb-3 small",children:[(0,n.jsxs)("div",{className:"col-6",children:[(0,n.jsx)("span",{className:"text-muted",children:"受取日:"}),(0,n.jsx)("div",{className:"fw-medium",children:new Date(e.reservation_date).toLocaleDateString()})]}),(0,n.jsxs)("div",{className:"col-6",children:[(0,n.jsx)("span",{className:"text-muted",children:"金額:"}),(0,n.jsxs)("div",{className:"fw-medium",children:["\xa5",e.final_amount.toLocaleString()]})]}),(0,n.jsxs)("div",{className:"col-6",children:[(0,n.jsx)("span",{className:"text-muted",children:"電話:"}),(0,n.jsx)("div",{children:null===(s=e.customer)||void 0===s?void 0:s.phone})]}),(0,n.jsxs)("div",{className:"col-6",children:[(0,n.jsx)("span",{className:"text-muted",children:"作成:"}),(0,n.jsx)("div",{children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,n.jsx)("div",{className:"flex-grow-1 me-3",children:(0,n.jsxs)("select",{value:e.status,onChange:t=>S(e.id,t.target.value),className:"form-select form-select-sm",children:[(0,n.jsx)("option",{value:"pending",children:"保留中"}),(0,n.jsx)("option",{value:"confirmed",children:"確定"}),(0,n.jsx)("option",{value:"ready",children:"準備完了"}),(0,n.jsx)("option",{value:"completed",children:"完了"}),(0,n.jsx)("option",{value:"cancelled",children:"キャンセル"})]})}),(0,n.jsxs)("div",{className:"d-flex gap-1",children:[(0,n.jsx)("button",{onClick:()=>M(e),className:"btn btn-outline-primary btn-sm",children:"詳細"}),(0,n.jsx)("button",{onClick:()=>I(e.id),className:"btn btn-outline-secondary btn-sm",title:"注文書PDFを生成",children:(0,n.jsx)("i",{className:"bi bi-file-earmark-pdf"})}),"confirmed"===e.status&&!e.reminder_sent_at&&(0,n.jsx)("button",{onClick:()=>P(e.id),className:"btn btn-outline-warning btn-sm",title:"受取リマインダーを送信",children:(0,n.jsx)("i",{className:"bi bi-bell"})}),(0,n.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:(0,n.jsx)("i",{className:"bi bi-pencil"})})]})]}),e.notes&&(0,n.jsxs)("div",{className:"mt-2 small text-muted bg-light p-2 rounded",children:[(0,n.jsx)("i",{className:"bi bi-file-earmark-text me-1"}),e.notes]})]},e.id)})})})]})})}),0===E.length&&(0,n.jsx)("div",{className:"row",children:(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"text-center py-5",children:[(0,n.jsx)("i",{className:"bi bi-calendar-x text-muted",style:{fontSize:"4rem"}}),(0,n.jsx)("h3",{className:"h5 fw-medium text-dark mt-3 mb-2",children:"予約が見つかりません"}),(0,n.jsx)("p",{className:"text-muted",children:"検索条件を変更するか、新しい予約を追加してください。"})]})})}),y&&_&&(0,n.jsx)("div",{className:"modal fade show d-block",tabIndex:-1,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,n.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h5",{className:"modal-title",children:"予約詳細"}),(0,n.jsx)("button",{type:"button",className:"btn-close",onClick:()=>k(!1)})]}),(0,n.jsx)("div",{className:"modal-body",children:(0,n.jsxs)("div",{className:"row g-4",children:[(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"row g-3",children:[(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"予約番号"}),(0,n.jsx)("div",{className:"text-dark",children:_.reservation_number})]}),(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"ステータス"}),(0,n.jsx)("div",{children:L(_.status)})]}),(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"受取日"}),(0,n.jsx)("div",{className:"text-dark",children:new Date(_.reservation_date).toLocaleDateString()})]})]})}),(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("h6",{className:"fw-medium text-dark mb-3",children:"顧客情報"}),(0,n.jsxs)("div",{className:"row g-3",children:[(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"氏名"}),(0,n.jsx)("div",{className:"text-dark",children:null===(e=_.customer)||void 0===e?void 0:e.full_name})]}),(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"電話番号"}),(0,n.jsx)("div",{className:"text-dark",children:null===(t=_.customer)||void 0===t?void 0:t.phone})]}),(null===(s=_.customer)||void 0===s?void 0:s.email)&&(0,n.jsxs)("div",{className:"col-md-6",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"メールアドレス"}),(0,n.jsx)("div",{className:"text-dark",children:_.customer.email})]})]})]}),(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("h6",{className:"fw-medium text-dark mb-3",children:"注文商品"}),(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsxs)("table",{className:"table table-borderless",children:[(0,n.jsx)("tbody",{children:null===(r=_.reservation_items)||void 0===r?void 0:r.map((e,t)=>{var s;return(0,n.jsxs)("tr",{className:"border-bottom",children:[(0,n.jsxs)("td",{className:"ps-0",children:[(0,n.jsx)("div",{className:"fw-medium",children:null===(s=e.product)||void 0===s?void 0:s.name}),(0,n.jsxs)("div",{className:"small text-muted",children:["\xa5",e.unit_price.toLocaleString()," \xd7 ",e.quantity]})]}),(0,n.jsx)("td",{className:"text-end pe-0",children:(0,n.jsxs)("div",{className:"fw-medium",children:["\xa5",e.subtotal.toLocaleString()]})})]},t)})}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{className:"border-top",children:[(0,n.jsx)("td",{className:"ps-0 fw-bold",children:"合計"}),(0,n.jsxs)("td",{className:"text-end pe-0 fw-bold",children:["\xa5",_.final_amount.toLocaleString()]})]})})]})})]}),(_.notes||_.admin_notes)&&(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("h6",{className:"fw-medium text-dark mb-3",children:"備考・メモ"}),_.notes&&(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"お客様備考"}),(0,n.jsx)("div",{className:"bg-light p-3 rounded",children:_.notes})]}),_.admin_notes&&(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label fw-medium",children:"管理メモ"}),(0,n.jsx)("div",{className:"bg-warning-subtle p-3 rounded",children:_.admin_notes})]})]})]})}),(0,n.jsxs)("div",{className:"modal-footer",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:"閉じる"}),(0,n.jsxs)("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>I(_.id),children:[(0,n.jsx)("i",{className:"bi bi-file-earmark-pdf me-2"}),"PDF生成"]}),(0,n.jsxs)("button",{type:"button",className:"btn btn-primary",children:[(0,n.jsx)("i",{className:"bi bi-pencil me-2"}),"編集"]})]})]})})})]})}},6882:function(e,t,s){s.d(t,{JO:function(){return ek},PJ:function(){return ew}});var n=s(7437),a=s(9397),i=s(4630),l=s(8930),r=s(2489),c=s(3229),o=s(8867),d=s(3247),m=s(740),u=s(9076),h=s(2660),p=s(6858),x=s(2451),v=s(407),b=s(875),f=s(8293),g=s(7684),j=s(2369),N=s(5805),_=s(9663),w=s(7692),y=s(1047),k=s(1723),Z=s(8736),S=s(804),D=s(2735),P=s(7689),I=s(4794),C=s(6275),L=s(8226),E=s(5252),M=s(3041),T=s(9345),O=s(8335),F=s(8919),z=s(2718),R=s(3774),J=s(2048),q=s(7877),A=s(5302),H=s(5131),U=s(3639),Q=s(3245),X=s(112),Y=s(2208),V=s(7769),W=s(5884),B=s(4415),G=s(6337),K=s(9711),$=s(1567),ee=s(91),et=s(8728),es=s(9637),en=s(7586),ea=s(1473),ei=s(4766),el=s(2252),er=s(7404),ec=s(3057),eo=s(2879),ed=s(9547),em=s(9646),eu=s(5929),eh=s(1341),ep=s(6540),ex=s(6595),ev=s(8997),eb=s(8896),ef=s(2720),eg=s(1178),ej=s(7414),eN=s(401),e_=s(3388);let ew={add:a.Z,edit:i.Z,delete:l.Z,remove:r.Z,save:c.Z,copy:o.Z,search:d.Z,filter:m.Z,refresh:u.Z,back:h.Z,forward:p.Z,up:x.Z,down:v.Z,chevronDown:b.Z,menu:f.Z,more:g.Z,user:j.Z,users:N.Z,profile:_.Z,logout:w.Z,calendar:y.Z,clock:k.Z,file:Z.Z,document:Z.Z,image:S.Z,download:D.Z,upload:P.Z,product:I.Z,cart:C.Z,payment:L.Z,money:E.Z,phone:M.Z,mail:T.Z,link:O.Z,share:F.Z,message:z.Z,location:R.Z,map:J.Z,navigation:q.Z,success:A.Z,error:H.Z,warning:U.Z,info:Q.Z,help:X.Z,eye:Y.Z,eyeOff:V.Z,show:Y.Z,hide:V.Z,expand:W.Z,collapse:B.Z,lock:G.Z,unlock:K.Z,security:G.Z,exit:w.Z,chart:$.Z,stats:$.Z,database:ee.Z,settings:et.Z,admin:et.Z,config:et.Z,home:es.Z,dashboard:es.Z,list:en.Z,grid:ea.Z,notification:ei.Z,alert:el.Z,qrcode:er.Z,plant:ec.Z,seed:I.Z,flower:eo.Z,tree:ec.Z,leaf:ed.Z,garden:em.Z,sun:eu.Z,cloud:eh.Z,rain:eh.Z,weather:eu.Z,loading:ep.Z,spinner:u.Z,star:ex.Z,heart:ev.Z,target:eb.Z,tag:ef.Z,bookmark:eg.Z,gift:ej.Z,check:eN.Z,cancel:r.Z,confirm:A.Z,customerInfo:j.Z,reservationInfo:y.Z,otherInfo:Z.Z,packageIcon:I.Z,mobileIcon:e_.Z,saveIcon:c.Z,qrIcon:er.Z,searchIcon:d.Z,deleteIcon:l.Z,closeIcon:r.Z,moneyIcon:E.Z},ey={xs:12,sm:16,md:20,lg:24,xl:32,"2xl":48},ek=e=>{let{icon:t,size:s="md",className:a="",color:i,...l}=e,r="number"==typeof s?s:ey[s];return(0,n.jsx)(t,{width:r,height:r,className:a,color:i,...l})}},9703:function(e,t,s){s.d(t,{ToastProvider:function(){return d},p:function(){return o}});var n=s(7437),a=s(2265),i=s(6882);let l=e=>{let{id:t,type:s,title:l,message:r,duration:c=5e3,onClose:o}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{o(t)},c);return()=>clearTimeout(e)},[t,c,o]),(0,n.jsx)("div",{className:"rounded-lg p-4 border shadow-lg max-w-sm w-full transition-all duration-300 ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(s){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}})()),children:(0,n.jsx)(i.JO,{icon:(()=>{switch(s){case"success":return i.PJ.success;case"error":return i.PJ.error;case"warning":return i.PJ.warning;default:return i.PJ.info}})(),size:"md"})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("h3",{className:"text-sm font-medium",children:l}),r&&(0,n.jsx)("p",{className:"text-sm mt-1",children:r})]}),(0,n.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,n.jsx)("button",{onClick:()=>o(t),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,n.jsx)(i.JO,{icon:i.PJ.cancel,size:"sm"})})})]})})},r=e=>{let{toasts:t,onRemoveToast:s}=e;return(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,n.jsx)(l,{id:e.id,type:e.type,title:e.title,message:e.message,duration:e.duration,onClose:s},e.id))})},c=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(c);if(!e)throw Error("useToast must be used within a ToastProvider");return e},d=e=>{let{children:t}=e,[s,i]=(0,a.useState)([]),l=e=>{let t=Math.random().toString(36).substr(2,9),s={...e,id:t};i(e=>[...e,s])};return(0,n.jsxs)(c.Provider,{value:{showToast:l,showSuccess:(e,t)=>{l({type:"success",title:e,message:t})},showError:(e,t)=>{l({type:"error",title:e,message:t})},showWarning:(e,t)=>{l({type:"warning",title:e,message:t})},showInfo:(e,t)=>{l({type:"info",title:e,message:t})}},children:[t,(0,n.jsx)(r,{toasts:s,onRemoveToast:e=>{i(t=>t.filter(t=>t.id!==e))}})]})}},2141:function(e,t,s){s.d(t,{OQ:function(){return c}});var n=s(6580),a=s(5566);let i="https://uscvsipskkbegcfktjyt.supabase.co",l=null,r=null,c=l=(0,n.eI)(i,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzY3ZzaXBza2tiZWdjZmt0anl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MDI4MzUsImV4cCI6MjA2Nzk3ODgzNX0.VhcGWXb-PpHTfqPApSIG4C6xXLik8JClsNhOdJIgdzw",{auth:{persistSession:!0,autoRefreshToken:!0,storage:window.localStorage}});(()=>{if(!r){let e=a.env.SUPABASE_SERVICE_ROLE_KEY||"your-service-role-key";r=(0,n.eI)(i,e,{auth:{autoRefreshToken:!1,persistSession:!1}})}})(),window.addEventListener("beforeunload",()=>{l=null,r=null})}}]);