(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9435:function(e,s,t){Promise.resolve().then(t.bind(t,4910))},4910:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var a=t(7437),i=t(2265);let r=[{id:"dashboard",label:"ダッシュボード",icon:"\uD83D\uDCCA"},{id:"reservations",label:"予約管理",icon:"\uD83D\uDCC5",children:[{id:"reservation-list",label:"予約一覧",icon:"\uD83D\uDCCB"},{id:"reservation-calendar",label:"予約カレンダー",icon:"\uD83D\uDDD3️"},{id:"reservation-search",label:"予約検索",icon:"\uD83D\uDD0D"}]},{id:"products",label:"商品管理",icon:"\uD83C\uDF31",children:[{id:"product-list",label:"商品一覧",icon:"\uD83D\uDCE6"},{id:"product-add",label:"商品追加",icon:"➕"},{id:"product-categories",label:"カテゴリ管理",icon:"\uD83C\uDFF7️"}]},{id:"customers",label:"顧客管理",icon:"\uD83D\uDC65",children:[{id:"customer-list",label:"顧客一覧",icon:"\uD83D\uDC64"},{id:"customer-search",label:"顧客検索",icon:"\uD83D\uDD0D"}]},{id:"forms",label:"フォーム管理",icon:"\uD83D\uDCDD",children:[{id:"form-builder",label:"フォーム作成",icon:"\uD83D\uDEE0️"},{id:"form-list",label:"フォーム一覧",icon:"\uD83D\uDCCB"},{id:"form-settings",label:"フォーム設定",icon:"⚙️"}]},{id:"settings",label:"設定",icon:"⚙️",children:[{id:"business-settings",label:"店舗設定",icon:"\uD83C\uDFEA"},{id:"notification-settings",label:"LINE通知設定",icon:"\uD83D\uDD14"},{id:"user-management",label:"ユーザー管理",icon:"\uD83D\uDC68‍\uD83D\uDCBC"}]}];function l(e){var s,t,l,n;let{children:c,currentPage:d,onPageChange:o}=e,[m,x]=(0,i.useState)(new Set(["reservations","forms"])),[u,h]=(0,i.useState)(!1),[g,p]=(0,i.useState)(!1),b=e=>{let s=new Set(m);s.has(e)?s.delete(e):s.add(e),x(s)},v=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=m.has(e.id),i=d===e.id,r=e.children&&e.children.length>0;return(0,a.jsxs)("div",{className:"menu-item",children:[(0,a.jsx)("div",{className:"menu-item-button ".concat(i?"active":""," level-").concat(s),onClick:()=>{r?b(e.id):o(e.id)},children:(0,a.jsxs)("div",{className:"menu-item-content",children:[(0,a.jsx)("span",{className:"menu-icon",children:e.icon}),!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"menu-label",children:e.label}),r&&(0,a.jsx)("span",{className:"menu-arrow ".concat(t?"expanded":""),children:"▼"})]})]})}),r&&t&&!u&&(0,a.jsx)("div",{className:"menu-children",children:e.children.map(e=>v(e,s+1))})]},e.id)};return(0,a.jsxs)("div",{className:"admin-layout",children:[g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>p(!1)}),(0,a.jsxs)("aside",{className:"admin-sidebar ".concat(u?"collapsed":""," ").concat(g?"mobile-open":""),children:[(0,a.jsxs)("div",{className:"sidebar-header",children:[(0,a.jsxs)("div",{className:"logo-section",children:[(0,a.jsx)("span",{className:"logo-icon",children:"\uD83C\uDF31"}),!u&&(0,a.jsx)("span",{className:"logo-text",children:"ベジライス管理"})]}),(0,a.jsx)("button",{className:"sidebar-toggle",onClick:()=>h(!u),children:u?"▶":"◀"})]}),(0,a.jsx)("nav",{className:"sidebar-nav",children:r.map(e=>v(e))}),(0,a.jsx)("div",{className:"sidebar-footer",children:(0,a.jsxs)("div",{className:"user-info",children:[(0,a.jsx)("span",{className:"user-icon",children:"\uD83D\uDC68‍\uD83D\uDCBC"}),!u&&(0,a.jsxs)("div",{className:"user-details",children:[(0,a.jsx)("div",{className:"user-name",children:"管理者"}),(0,a.jsx)("div",{className:"user-role",children:"Administrator"})]})]})})]}),(0,a.jsxs)("main",{className:"admin-main ".concat(u?"sidebar-collapsed":""),children:[(0,a.jsx)("header",{className:"admin-header",children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{className:"md:hidden p-2 rounded-lg bg-gray-100 hover:bg-gray-200",onClick:()=>p(!g),children:(0,a.jsx)("span",{className:"text-xl",children:g?"✕":"☰"})}),(0,a.jsx)("h1",{className:"page-title",children:(null===(l=r.find(e=>{var s;return e.id===d||(null===(s=e.children)||void 0===s?void 0:s.some(e=>e.id===d))}))||void 0===l?void 0:null===(t=l.children)||void 0===t?void 0:null===(s=t.find(e=>e.id===d))||void 0===s?void 0:s.label)||(null===(n=r.find(e=>e.id===d))||void 0===n?void 0:n.label)||"ダッシュボード"})]}),(0,a.jsx)("div",{className:"header-actions",children:(0,a.jsxs)("button",{className:"notification-btn",children:["\uD83D\uDD14",(0,a.jsx)("span",{className:"notification-badge",children:"3"})]})})]})}),(0,a.jsx)("div",{className:"admin-content",children:c})]})]})}var n=t(9376),c=t(2141),d=t(5302),o=t(6540),m=t(1047),x=t(5252),u=t(5805),h=t(8736),g=t(4630),p=t(4794),b=t(2369),v=t(3041),j=t(9345),f=t(3245);function y(){let e=(0,n.useRouter)(),[s,t]=(0,i.useState)([{icon:"calendar",label:"今日の予約",value:"0",trend:"+0",trendLabel:"昨日比",trendType:"positive",color:"blue"},{icon:"money",label:"今月の売上",value:"\xa50",trend:"+0%",trendLabel:"先月比",trendType:"positive",color:"green"},{icon:"users",label:"総顧客数",value:"0",trend:"+0",trendLabel:"今月",trendType:"positive",color:"purple"},{icon:"document",label:"フォーム数",value:"0",trend:"+0",trendLabel:"今月追加",trendType:"positive",color:"orange"}]),[r,l]=(0,i.useState)([]),[y,N]=(0,i.useState)(!0);(0,i.useEffect)(()=>{w()},[]);let w=async()=>{try{N(!0);let e=new Date().toISOString().split("T")[0],{data:s,error:a}=await c.OQ.from("reservations").select("id").gte("created_at","".concat(e,"T00:00:00")).lt("created_at","".concat(e,"T23:59:59")),{data:i,error:r}=await c.OQ.from("customers").select("id"),{data:n,error:o}=await c.OQ.from("forms").select("id").eq("is_active",!0),m=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString(),{data:x,error:u}=await c.OQ.from("reservations").select("total_amount").gte("created_at",m).eq("status","confirmed"),{data:h,error:g}=await c.OQ.from("reservations").select("\n          id,\n          total_amount,\n          status,\n          created_at,\n          customers!inner(name)\n        ").order("created_at",{ascending:!1}).limit(5);a&&console.error("予約データ取得エラー:",a),r&&console.error("顧客データ取得エラー:",r),o&&console.error("フォームデータ取得エラー:",o),u&&console.error("売上データ取得エラー:",u),g&&console.error("アクティビティデータ取得エラー:",g);let p=(null==s?void 0:s.length)||0,b=(null==i?void 0:i.length)||0,v=(null==n?void 0:n.length)||0,j=(null==x?void 0:x.reduce((e,s)=>e+(s.total_amount||0),0))||0;if(t([{icon:"calendar",label:"今日の予約",value:p.toString(),trend:"+0",trendLabel:"昨日比",trendType:"positive",color:"blue"},{icon:"money",label:"今月の売上",value:"\xa5".concat(j.toLocaleString()),trend:"+0%",trendLabel:"先月比",trendType:"positive",color:"green"},{icon:"users",label:"総顧客数",value:b.toString(),trend:"+0",trendLabel:"今月",trendType:"positive",color:"purple"},{icon:"document",label:"フォーム数",value:v.toString(),trend:"+0",trendLabel:"今月追加",trendType:"positive",color:"orange"}]),h){let e=h.map(e=>{var s;let t=_(new Date(e.created_at));return{icon:d.Z,iconColor:"green",text:"".concat((null===(s=e.customers)||void 0===s?void 0:s.name)||"不明な顧客","様の予約が").concat("confirmed"===e.status?"確定":"受付","されました"),time:t,amount:e.total_amount?"\xa5".concat(e.total_amount.toLocaleString()):null}});l(e)}}catch(e){console.error("ダッシュボードデータの取得に失敗しました:",e)}finally{N(!1)}},_=e=>{let s=new Date().getTime()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(s/36e5);return t<60?"".concat(t,"分前"):a<24?"".concat(a,"時間前"):"".concat(Math.floor(a/24),"日前")};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"ダッシュボード"}),(0,a.jsx)("p",{className:"text-gray-600",children:"種苗店管理システム - 今日の概要"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["最終更新: ",new Date().toLocaleString("ja-JP")]})]}),y?(0,a.jsx)("div",{className:"admin-stats-grid",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"admin-widget blue animate-pulse",children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:"読み込み中..."}),(0,a.jsx)("div",{className:"admin-widget-icon",children:(0,a.jsx)(o.Z,{size:20,className:"animate-spin"})})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:"---"}),(0,a.jsxs)("div",{className:"admin-widget-trend positive",children:[(0,a.jsx)("span",{children:"---"}),(0,a.jsx)("span",{className:"text-gray-500",children:"(---)"})]})]},e))}):(0,a.jsx)("div",{className:"admin-stats-grid",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"admin-widget ".concat(e.color),children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:e.label}),(0,a.jsxs)("div",{className:"admin-widget-icon",children:["calendar"===e.icon&&(0,a.jsx)(m.Z,{size:20}),"money"===e.icon&&(0,a.jsx)(x.Z,{size:20}),"users"===e.icon&&(0,a.jsx)(u.Z,{size:20}),"document"===e.icon&&(0,a.jsx)(h.Z,{size:20})]})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:e.value}),(0,a.jsxs)("div",{className:"admin-widget-trend ".concat(e.trendType),children:[(0,a.jsx)("span",{children:e.trend}),(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.trendLabel,")"]})]})]},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"クイックアクション"})}),(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsx)("div",{className:"space-y-3",children:[{icon:"edit",title:"新規予約追加",description:"お客様の予約を追加",action:()=>e.push("/admin/reservations")},{icon:"packageIcon",title:"商品追加",description:"新しい商品を登録",action:()=>e.push("/admin/products/add")},{icon:"user",title:"顧客管理",description:"顧客情報を管理",action:()=>e.push("/admin/customers")},{icon:"document",title:"フォーム管理",description:"予約フォームを管理",action:()=>e.push("/admin/forms")}].map((e,s)=>(0,a.jsx)("button",{onClick:e.action,className:"btn-modern btn-outline-modern w-full p-4 text-left",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:["edit"===e.icon&&(0,a.jsx)(g.Z,{size:24}),"packageIcon"===e.icon&&(0,a.jsx)(p.Z,{size:24}),"user"===e.icon&&(0,a.jsx)(b.Z,{size:24}),"document"===e.icon&&(0,a.jsx)(h.Z,{size:24})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})},s))})})]}),(0,a.jsxs)("div",{className:"admin-card mt-6",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"今日のタスク"})}),(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsx)("div",{className:"space-y-3",children:[{icon:"phone",task:"田中様への確認電話",time:"14:00",priority:"high"},{icon:"document",task:"フォーム設定の確認",time:"15:30",priority:"medium"},{icon:"mail",task:"週次レポートの送信",time:"17:00",priority:"low"}].map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:["phone"===e.icon&&(0,a.jsx)(v.Z,{size:20}),"document"===e.icon&&(0,a.jsx)(h.Z,{size:20}),"mail"===e.icon&&(0,a.jsx)(j.Z,{size:20})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.task}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.time})]}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("high"===e.priority?"bg-red-400":"medium"===e.priority?"bg-yellow-400":"bg-green-400")})]},s))})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsxs)("div",{className:"admin-card-header",children:[(0,a.jsx)("h3",{className:"admin-card-title",children:"最近のアクティビティ"}),(0,a.jsx)("button",{className:"btn-modern btn-outline-modern btn-sm",children:"すべて見る →"})]}),(0,a.jsx)("div",{className:"admin-card-content",children:y?(0,a.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"admin-activity-item animate-pulse",children:[(0,a.jsx)("div",{className:"admin-activity-icon bg-gray-200",children:(0,a.jsx)(o.Z,{size:16,className:"animate-spin"})}),(0,a.jsxs)("div",{className:"admin-activity-content",children:[(0,a.jsx)("div",{className:"admin-activity-text bg-gray-200 h-4 rounded"}),(0,a.jsx)("div",{className:"admin-activity-time bg-gray-200 h-3 rounded mt-1"})]})]},e))}):(0,a.jsx)("div",{className:"space-y-3",children:r.length>0?r.map((e,s)=>(0,a.jsxs)("div",{className:"admin-activity-item",children:[(0,a.jsx)("div",{className:"admin-activity-icon bg-".concat(e.iconColor,"-100 text-").concat(e.iconColor,"-600"),children:(0,a.jsx)(e.icon,{size:16})}),(0,a.jsxs)("div",{className:"admin-activity-content",children:[(0,a.jsx)("div",{className:"admin-activity-text",children:e.text}),(0,a.jsx)("div",{className:"admin-activity-time",children:e.time})]}),e.amount&&(0,a.jsx)("div",{className:"font-medium text-green-600",children:e.amount})]},s)):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(f.Z,{size:32,className:"mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{children:"最近のアクティビティはありません"})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"今月の目標達成率"})}),(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"売上目標"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"73%"})]}),(0,a.jsx)("div",{className:"admin-progress",children:(0,a.jsx)("div",{className:"admin-progress-bar green",style:{width:"73%"}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"予約件数"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"85%"})]}),(0,a.jsx)("div",{className:"admin-progress",children:(0,a.jsx)("div",{className:"admin-progress-bar blue",style:{width:"85%"}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"顧客満足度"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"92%"})]}),(0,a.jsx)("div",{className:"admin-progress",children:(0,a.jsx)("div",{className:"admin-progress-bar orange",style:{width:"92%"}})})]})]})})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"週間予約統計"})}),(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"127"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"今週の総予約数"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"font-bold text-green-600",children:"98"}),(0,a.jsx)("div",{className:"text-gray-600",children:"確定済み"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"font-bold text-yellow-600",children:"29"}),(0,a.jsx)("div",{className:"text-gray-600",children:"保留中"})]})]})]})})]})]})]})]})]})}var N=t(7755),w=t(6882),_=e=>{let{isOpen:s,onClose:t,onProductSelect:r,excludeProductIds:l=[]}=e,[n,d]=(0,i.useState)([]),[o,m]=(0,i.useState)([]),[x,u]=(0,i.useState)(""),[h,g]=(0,i.useState)("all"),[p,b]=(0,i.useState)(!1),[v,j]=(0,i.useState)(null),[f,y]=(0,i.useState)(""),[N,_]=(0,i.useState)(0),[D,C]=(0,i.useState)(1),[k,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{s&&(O(),L())},[s]);let O=async()=>{b(!0);try{let{data:e,error:s}=await c.OQ.from("products").select("\n          *,\n          category:product_categories(*),\n          variations:product_variations(*)\n        ").eq("is_available",!0).order("display_order",{ascending:!0});if(s)throw s;d(e||[])}catch(e){console.error("商品の取得に失敗しました:",e)}finally{b(!1)}},L=async()=>{try{let{data:e,error:s}=await c.OQ.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;m(e||[])}catch(e){console.error("カテゴリの取得に失敗しました:",e)}},q=n.filter(e=>{var s;let t="all"===h||e.category_id===h,a=e.name.toLowerCase().includes(x.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase())),i=!l.includes(e.id);return t&&a&&i}),P=e=>{e.variations&&e.variations.length>0?(j(e),y(e.variations[0].id),_(e.variations[0].price),C(1),S(!0)):z(e)},z=(e,s,t,a)=>{r(e,t||e.price,s,a||1),Q()},Q=()=>{u(""),g("all"),j(null),y(""),_(0),C(1),S(!1),t()},F=e=>{var s;y(e);let t=null==v?void 0:null===(s=v.variations)||void 0===s?void 0:s.find(s=>s.id===e);t&&_(t.price)};return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[(0,a.jsx)(w.JO,{icon:w.PJ.packageIcon,size:"lg"}),(0,a.jsx)("span",{children:"商品を選択"})]}),(0,a.jsx)("button",{onClick:Q,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(w.JO,{icon:w.PJ.closeIcon,size:"md"})})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(w.JO,{icon:w.PJ.searchIcon,size:"sm",className:"text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"商品名で検索...",value:x,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"全カテゴリ"}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("button",{onClick:O,disabled:p,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:(0,a.jsx)(w.JO,{icon:w.PJ.refresh,size:"sm"})})]})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 200px)"},children:p?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(w.JO,{icon:w.PJ.loading,size:"lg",className:"animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"商品を読み込み中..."})]}):q.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(e=>{var s;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>P(e),children:[(0,a.jsx)("div",{className:"w-full h-32 bg-gray-100 rounded-lg mb-3 flex items-center justify-center",children:(0,a.jsx)(w.JO,{icon:w.PJ.packageIcon,size:"xl",className:"text-gray-400"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 line-clamp-2",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:null===(s=e.category)||void 0===s?void 0:s.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:["\xa5",e.price.toLocaleString()]}),e.variations&&e.variations.length>0&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.variations.length,"種類の選択肢"]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:void 0!==e.stock_quantity&&null!==e.stock_quantity&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(e.stock_quantity>10?"bg-green-100 text-green-800":e.stock_quantity>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["在庫: ",e.stock_quantity]})})]}),(0,a.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",onClick:s=>{s.stopPropagation(),P(e)},children:e.variations&&e.variations.length>0?"詳細設定":"追加"})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(w.JO,{icon:w.PJ.searchIcon,size:"xl",className:"text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"条件に合う商品が見つかりません"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"検索条件を変更してお試しください"})]})})]})}),k&&v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-60 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"商品設定"})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:v.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:v.description})]}),v.variations&&v.variations.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"バリエーション"}),(0,a.jsx)("select",{value:f,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.variations.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - \xa5",e.price.toLocaleString()]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格"}),(0,a.jsx)("input",{type:"number",value:N,onChange:e=>_(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト数量"}),(0,a.jsx)("input",{type:"number",value:D,onChange:e=>C(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),(0,a.jsxs)("div",{className:"p-6 pt-0 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>{if(v){var e;let s=null===(e=v.variations)||void 0===e?void 0:e.find(e=>e.id===f);z(v,null==s?void 0:s.name,N,D)}S(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"追加"})]})]})})]}):null},D=t(8930),C=t(3639),k=t(5131),S=t(2252);let O=e=>{let{isOpen:s,title:t,message:i,confirmText:r="実行",cancelText:l="キャンセル",confirmButtonVariant:n="danger",onConfirm:c,onCancel:m,isLoading:x=!1,icon:u="warning"}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onKeyDown:e=>{"Escape"===e.key?m():"Enter"!==e.key||x||c()},onClick:e=>{e.target===e.currentTarget&&m()},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-message",children:[(0,a.jsx)("div",{className:"p-6 pb-0",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 ".concat((()=>{switch(n){case"danger":default:return"text-red-500";case"warning":return"text-yellow-500";case"primary":return"text-blue-500";case"success":return"text-green-500"}})()),children:["delete"===u&&(0,a.jsx)(D.Z,{size:24}),"warning"===u&&(0,a.jsx)(C.Z,{size:24}),"success"===u&&(0,a.jsx)(d.Z,{size:24}),"error"===u&&(0,a.jsx)(k.Z,{size:24}),"info"===u&&(0,a.jsx)(f.Z,{size:24}),!["delete","warning","success","error","info"].includes(u)&&(0,a.jsx)(S.Z,{size:24})]}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{id:"dialog-title",className:"text-lg font-semibold text-gray-900",children:t})})]})}),(0,a.jsx)("div",{className:"p-6 pt-4",children:(0,a.jsx)("p",{id:"dialog-message",className:"text-gray-600 leading-relaxed",children:i})}),(0,a.jsxs)("div",{className:"p-6 pt-0 flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:m,disabled:x,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md font-medium hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l}),(0,a.jsx)("button",{type:"button",onClick:c,disabled:x,className:(()=>{let e="px-4 py-2 rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";switch(n){case"danger":default:return"".concat(e," bg-red-600 text-white hover:bg-red-700 focus:ring-red-500");case"warning":return"".concat(e," bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500");case"primary":return"".concat(e," bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500");case"success":return"".concat(e," bg-green-600 text-white hover:bg-green-700 focus:ring-green-500")}})(),children:x?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{size:16,className:"animate-spin"}),(0,a.jsx)("span",{children:"処理中..."})]}):r})]})]})}):null},L=e=>{let{isOpen:s,title:t="削除の確認",itemName:i="この項目",onConfirm:r,onCancel:l,isLoading:n=!1}=e;return(0,a.jsx)(O,{isOpen:s,title:t,message:"".concat(i,"を削除しますか？この操作は取り消すことができません。"),confirmText:"削除",cancelText:"キャンセル",confirmButtonVariant:"danger",onConfirm:r,onCancel:l,isLoading:n,icon:"delete"})},q={customer_name:{id:"customer_name",type:"text",label:"氏名",placeholder:"山田 太郎",required:!0,description:"フルネームでご記入ください",category:"customer"},customer_furigana:{id:"customer_furigana",type:"text",label:"フリガナ",placeholder:"ヤマダ タロウ",required:!1,description:"カタカナでご記入ください",category:"customer"},customer_phone:{id:"customer_phone",type:"tel",label:"電話番号",placeholder:"090-1234-5678",required:!0,description:"緊急時のご連絡先",category:"customer"},customer_postal_code:{id:"customer_postal_code",type:"text",label:"郵便番号",placeholder:"123-4567",required:!1,category:"customer"},customer_address:{id:"customer_address",type:"textarea",label:"住所",placeholder:"東京都渋谷区...",required:!1,category:"customer"},customer_birth_date:{id:"customer_birth_date",type:"date",label:"生年月日",required:!1,category:"customer"},customer_gender:{id:"customer_gender",type:"radio",label:"性別",required:!1,options:["男性","女性","その他","回答しない"],category:"customer"},reservation_date:{id:"reservation_date",type:"date",label:"受取希望日",required:!0,description:"商品をお受け取りいただく日をお選びください",category:"reservation"},special_requests:{id:"special_requests",type:"textarea",label:"ご要望・備考",placeholder:"その他ご要望がございましたらご記入ください",required:!1,category:"other"}};function P(){var e;let{formId:s,onFormSaved:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,l]=(0,i.useState)({id:s||"form-".concat(Date.now()),name:"商品予約フォーム",description:"片桐商店 ベジライスの商品予約を承ります",fields:Object.values(q).map(e=>({...e,enabled:!0})),products:[],settings:{showProgress:!0,allowEdit:!0,confirmationMessage:"ご予約ありがとうございました。確認のお電話をさせていただきます。",businessName:"片桐商店 ベジライス",validFrom:void 0,validTo:void 0,isActive:!0}}),[n,d]=(0,i.useState)(!1),[o,m]=(0,i.useState)([]),[x,u]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1),[p,b]=(0,i.useState)(!1),[v,j]=(0,i.useState)(""),[f,y]=(0,i.useState)("all"),[D,C]=(0,i.useState)(null);(0,i.useEffect)(()=>{S(),O(),s&&k()},[s]);let k=async()=>{if(s)try{let{data:e,error:t}=await c.OQ.from("forms").select("\n          *,\n          form_fields(*),\n          form_products(\n            *,\n            product:products(\n              *,\n              category:product_categories(*)\n            )\n          )\n        ").eq("id",s).single();if(t)throw t;if(e){let s={id:e.id,name:e.name,description:e.description,fields:(e.form_fields||[]).map(e=>({id:e.field_id,type:e.field_type,label:e.label,placeholder:e.placeholder,required:e.is_required,options:e.options,description:e.description,category:e.category||"other",enabled:e.is_enabled})),products:(e.form_products||[]).map(e=>{var s;return{id:e.product.id,name:e.product.name,category_name:null===(s=e.product.category)||void 0===s?void 0:s.name,price:e.product.price,variation_name:e.variation_name,selected_price:e.selected_price||e.product.price,selected_variation:e.variation_name}}),settings:{showProgress:e.show_progress||!0,allowEdit:e.allow_edit||!0,confirmationMessage:e.confirmation_message||"ご予約ありがとうございました。",businessName:e.business_name||"",validFrom:e.valid_from,validTo:e.valid_to,isActive:e.is_active}};l(s)}}catch(e){console.error("フォーム設定の読み込みに失敗しました:",e)}},S=async()=>{try{let{data:e,error:s}=await c.OQ.from("products").select("\n          *,\n          category:product_categories(*)\n        ").eq("is_available",!0).order("display_order",{ascending:!0});if(s)throw s;m(e||[])}catch(e){console.error("商品の取得に失敗しました:",e)}},O=async()=>{try{let{data:e,error:s}=await c.OQ.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;u(e||[])}catch(e){console.error("カテゴリの取得に失敗しました:",e)}},P=e=>{l({...r,fields:r.fields.map(s=>s.id===e?{...s,enabled:!s.enabled}:s)})},z=e=>{C(e)},Q=async()=>{d(!0);try{let{data:e,error:s}=await c.OQ.from("forms").upsert({id:r.id,name:r.name,description:r.description,show_progress:r.settings.showProgress,allow_edit:r.settings.allowEdit,confirmation_message:r.settings.confirmationMessage,business_name:r.settings.businessName,valid_from:r.settings.validFrom||null,valid_to:r.settings.validTo||null,is_active:r.settings.isActive,updated_at:new Date().toISOString()}).select().single();if(s)throw s;if(await c.OQ.from("form_fields").delete().eq("form_id",r.id),await c.OQ.from("form_products").delete().eq("form_id",r.id),r.fields.length>0){let e=r.fields.map((e,s)=>({form_id:r.id,field_id:e.id,field_type:e.type,label:e.label,placeholder:e.placeholder,is_required:e.required,options:e.options,description:e.description,category:e.category,is_enabled:e.enabled,display_order:s})),{error:s}=await c.OQ.from("form_fields").insert(e);if(s)throw s}if(r.products.length>0){let e=r.products.map((e,s)=>({form_id:r.id,product_id:e.id,selected_price:e.selected_price,variation_name:e.selected_variation,display_order:s})),{error:s}=await c.OQ.from("form_products").insert(e);if(s)throw s}t&&t(r.id),alert("フォーム設定を保存しました")}catch(e){console.error("フォーム設定の保存に失敗しました:",e),alert("フォーム設定の保存に失敗しました。もう一度お試しください。")}finally{d(!1)}};o.filter(e=>{let s="all"===f||e.category_id===f,t=e.name.toLowerCase().includes(v.toLowerCase()),a=!r.products.find(s=>s.id===e.id);return s&&t&&a});let F={customer:{title:"顧客情報",icon:w.PJ.customerInfo},reservation:{title:"予約情報",icon:w.PJ.reservationInfo},other:{title:"その他",icon:w.PJ.otherInfo}},E=()=>{let e=window.location.origin;return"".concat(e,"/form/").concat(r.id)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"予約フォーム設定"}),(0,a.jsx)("p",{className:"text-gray-600",children:"フォーム項目と予約対象商品を設定します"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>b(!p),className:"btn-modern btn-outline-modern flex items-center space-x-2",children:[(0,a.jsx)(w.JO,{icon:w.PJ.qrIcon,size:"sm"}),(0,a.jsx)("span",{children:"QRコード表示"})]}),(0,a.jsx)("button",{onClick:Q,disabled:n,className:"btn-modern btn-success-modern flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.JO,{icon:w.PJ.loading,size:"sm",className:"animate-spin"}),(0,a.jsx)("span",{children:"保存中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.JO,{icon:w.PJ.saveIcon,size:"sm"}),(0,a.jsx)("span",{children:"設定を保存"})]})})]})]}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"フォームQRコード"}),(0,a.jsx)("button",{onClick:()=>b(!1),className:"btn-modern btn-ghost-modern btn-sm",children:(0,a.jsx)(w.JO,{icon:w.PJ.closeIcon,size:"sm"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("img",{src:(()=>{let e=E();return"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent(e))})(),alt:"フォームQRコード",className:"mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"このQRコードで予約フォームにアクセスできます"}),(0,a.jsx)("div",{className:"text-xs bg-gray-100 p-2 rounded break-all",children:E()}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(E()),className:"btn-modern btn-secondary-modern mt-3",children:"URLをコピー"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"基本設定"})}),(0,a.jsxs)("div",{className:"admin-card-content space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"フォーム名"}),(0,a.jsx)("input",{type:"text",value:r.name,onChange:e=>l({...r,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"説明文"}),(0,a.jsx)("textarea",{value:r.description,onChange:e=>l({...r,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受付開始日時"}),(0,a.jsx)("input",{type:"datetime-local",value:r.settings.validFrom||"",onChange:e=>l({...r,settings:{...r.settings,validFrom:e.target.value||void 0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受付終了日時"}),(0,a.jsx)("input",{type:"datetime-local",value:r.settings.validTo||"",onChange:e=>l({...r,settings:{...r.settings,validTo:e.target.value||void 0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.settings.isActive,onChange:e=>l({...r,settings:{...r.settings,isActive:e.target.checked}}),className:"mr-2"}),"フォームを有効にする"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"無効にするとフォームにアクセスできなくなります"})]})]})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h3",{className:"admin-card-title",children:"フォーム項目設定"})}),(0,a.jsx)("div",{className:"admin-card-content",children:Object.entries(F).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("h4",{className:"flex items-center gap-2 font-medium text-gray-900 mb-3",children:[(0,a.jsx)(w.JO,{icon:t.icon,size:"sm"}),t.title]}),(0,a.jsx)("div",{className:"space-y-2",children:r.fields.filter(e=>e.category===s).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.label}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.type," ",e.required&&"(必須)"]})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:()=>P(e.id),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e.id))})]},s)})})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"admin-card-title",children:"予約対象商品"}),(0,a.jsxs)("button",{onClick:()=>g(!0),className:"btn-modern btn-primary-modern btn-sm flex items-center space-x-2",children:[(0,a.jsx)(w.JO,{icon:w.PJ.packageIcon,size:"sm"}),(0,a.jsx)("span",{children:"商品を追加"})]})]})}),(0,a.jsx)("div",{className:"admin-card-content",children:r.products.length>0?(0,a.jsx)("div",{className:"space-y-3",children:r.products.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\xa5",null===(s=e.selected_price)||void 0===s?void 0:s.toLocaleString(),e.selected_variation&&" (".concat(e.selected_variation,")"),e.category_name&&" - ".concat(e.category_name)]})]}),(0,a.jsx)("button",{onClick:()=>z(e.id),className:"btn-modern btn-danger-modern btn-sm btn-icon-only",children:(0,a.jsx)(w.JO,{icon:w.PJ.deleteIcon,size:"sm"})})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(w.JO,{icon:w.PJ.packageIcon,size:"xl",className:"mx-auto text-gray-400"})}),(0,a.jsx)("p",{children:"予約対象商品が設定されていません"}),(0,a.jsx)("p",{className:"text-sm",children:"「商品を追加」ボタンから商品を選択してください"})]})})]})]}),(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsxs)("div",{className:"admin-card-header",children:[(0,a.jsx)("h3",{className:"admin-card-title",children:"フォームプレビュー"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"実際のフォーム画面と同じ表示・機能です"})]}),(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsx)(N.Z,{formConfig:r})})]})]}),(0,a.jsx)(_,{isOpen:h,onClose:()=>g(!1),onProductSelect:(e,s,t,a)=>{var i;let n={id:e.id,name:e.name,category_name:null===(i=e.category)||void 0===i?void 0:i.name,price:e.price,variation_name:e.variation_name,selected_price:s||e.price,selected_variation:t||e.variation_name};l({...r,products:[...r.products,n]}),g(!1)},excludeProductIds:r.products.map(e=>e.id)}),(0,a.jsx)(L,{isOpen:!!D,title:"商品の削除",itemName:D?(null===(e=r.products.find(e=>e.id===D))||void 0===e?void 0:e.name)||"選択された商品":"",onConfirm:()=>{D&&(l({...r,products:r.products.filter(e=>e.id!==D)}),C(null))},onCancel:()=>C(null)})]})}class z{static getStatusBadgeClasses(e){let s={active:{bg:"bg-green-100",text:"text-green-800",label:"アクティブ"},inactive:{bg:"bg-gray-100",text:"text-gray-800",label:"無効"},pending:{bg:"bg-blue-100",text:"text-blue-800",label:"保留中"},confirmed:{bg:"bg-green-100",text:"text-green-800",label:"確定"},cancelled:{bg:"bg-red-100",text:"text-red-800",label:"キャンセル"},completed:{bg:"bg-purple-100",text:"text-purple-800",label:"完了"},expired:{bg:"bg-red-100",text:"text-red-800",label:"期限切れ"},preparing:{bg:"bg-yellow-100",text:"text-yellow-800",label:"準備中"}};return s[e]||s.inactive}static formatDate(e,s){if(!e)return"";let t={year:"numeric",month:"2-digit",day:"2-digit",...s};return new Date(e).toLocaleDateString("ja-JP",t)}static formatDateTime(e){return e?new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""}static formatPrice(e){return"\xa5".concat(e.toLocaleString())}static isDateInRange(e,s,t){return(!s||!(e<s))&&(!t||!(e>t))}static calculateDaysUntil(e){let s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)}static getValidityPeriodText(e,s){return e||s?e&&s?"".concat(this.formatDate(e)," - ").concat(this.formatDate(s)):e?"".concat(this.formatDate(e),"から"):s?"".concat(this.formatDate(s),"まで"):"期限なし":"期限なし"}}class Q{static async getAllForms(){let{data:e,error:s}=await c.OQ.from("form_configurations").select("\n        id,\n        name,\n        description,\n        form_fields,\n        settings,\n        is_active,\n        valid_from,\n        valid_to,\n        version,\n        created_at,\n        updated_at\n      ").order("updated_at",{ascending:!1});if(s)throw s;return(null==e?void 0:e.map(e=>{var s,t;return{...e,settings:e.settings||{},version:e.version||1,field_count:(null===(t=e.form_fields)||void 0===t?void 0:null===(s=t.fields)||void 0===s?void 0:s.length)||0,response_count:0}}))||[]}static async createForm(e){let{data:s,error:t}=await c.OQ.from("form_configurations").insert([{name:e.name,description:e.description,form_fields:{fields:e.fields},is_active:e.isActive,valid_from:e.validFrom||null,valid_to:e.validTo||null,selected_products:e.selectedProducts||[]}]).select();if(t)throw t;return s[0]}static async updateForm(e,s){let t={};s.name&&(t.name=s.name),s.description&&(t.description=s.description),s.fields&&(t.form_fields={fields:s.fields}),void 0!==s.isActive&&(t.is_active=s.isActive),void 0!==s.validFrom&&(t.valid_from=s.validFrom||null),void 0!==s.validTo&&(t.valid_to=s.validTo||null),s.selectedProducts&&(t.selected_products=s.selectedProducts);let{data:a,error:i}=await c.OQ.from("form_configurations").update(t).eq("id",e).select();if(i)throw i;return a[0]}static async deleteForm(e){let{error:s}=await c.OQ.from("form_configurations").delete().eq("id",e);if(s)throw s;return!0}static async getFormById(e){let{data:s,error:t}=await c.OQ.from("form_configurations").select("*").eq("id",e).single();if(t)throw t;return s}static async toggleFormStatus(e,s){let{error:t}=await c.OQ.from("form_configurations").update({is_active:s}).eq("id",e);if(t)throw t;return!0}static isFormAccessible(e){if(!e.is_active)return!1;let s=new Date,t=e.valid_from?new Date(e.valid_from):null,a=e.valid_to?new Date(e.valid_to):null;return(!t||!(s<t))&&(!a||!(s>a))}static getFormStatus(e){if(!e.is_active)return"inactive";let s=new Date,t=e.valid_from?new Date(e.valid_from):null,a=e.valid_to?new Date(e.valid_to):null;return t&&s<t?"pending":a&&s>a?"expired":"active"}static getValidityPeriodText(e,s){return z.getValidityPeriodText(e,s)}}function F(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0),[l,n]=(0,i.useState)("all");(0,i.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await Q.getAllForms();s(e)}catch(e){console.error("フォーム一覧の取得に失敗しました:",e),s([])}finally{r(!1)}},d=async(t,a)=>{try{await Q.toggleFormStatus(t,!a),s(e.map(e=>e.id===t?{...e,is_active:!a}:e))}catch(e){console.error("フォームステータスの更新に失敗しました:",e),alert("フォームステータスの更新に失敗しました。")}},o=async t=>{if(confirm("このフォームを削除しますか？この操作は元に戻せません。"))try{await Q.deleteForm(t),s(e.filter(e=>e.id!==t)),alert("フォームが削除されました。")}catch(e){console.error("フォームの削除に失敗しました:",e),alert("フォームの削除に失敗しました。")}},m=e.filter(e=>"all"===l||("active"===l?e.is_active:"inactive"!==l||!e.is_active)),x=e=>{let s={inactive:{bg:"bg-gray-100",text:"text-gray-800",label:"無効"},pending:{bg:"bg-blue-100",text:"text-blue-800",label:"開始前"},expired:{bg:"bg-red-100",text:"text-red-800",label:"期限切れ"},active:{bg:"bg-green-100",text:"text-green-800",label:"公開中"}}[Q.getFormStatus(e)];return(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(s.bg," ").concat(s.text),children:s.label})},u=e=>Q.getValidityPeriodText(e.valid_from,e.valid_to);return t?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"フォーム一覧"}),(0,a.jsx)("p",{className:"text-gray-600",children:"作成済みのフォームを管理できます"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("select",{value:l,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"すべて"}),(0,a.jsx)("option",{value:"active",children:"有効"}),(0,a.jsx)("option",{value:"inactive",children:"無効"})]}),(0,a.jsxs)("button",{onClick:()=>window.location.href="/admin?page=form-builder",className:"btn-modern btn-primary-modern flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDEE0️"}),"新しいフォーム"]})]})]}),(0,a.jsxs)("div",{className:"admin-stats-grid",children:[(0,a.jsxs)("div",{className:"admin-widget green",children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:"有効なフォーム"}),(0,a.jsx)("div",{className:"admin-widget-icon",children:"✅"})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:e.filter(e=>e.is_active).length})]}),(0,a.jsxs)("div",{className:"admin-widget blue",children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:"総フォーム数"}),(0,a.jsx)("div",{className:"admin-widget-icon",children:"\uD83D\uDCDD"})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:e.length})]}),(0,a.jsxs)("div",{className:"admin-widget purple",children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:"総回答数"}),(0,a.jsx)("div",{className:"admin-widget-icon",children:"\uD83D\uDCCA"})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:e.reduce((e,s)=>e+s.response_count,0)})]}),(0,a.jsxs)("div",{className:"admin-widget orange",children:[(0,a.jsxs)("div",{className:"admin-widget-header",children:[(0,a.jsx)("div",{className:"admin-widget-title",children:"平均フィールド数"}),(0,a.jsx)("div",{className:"admin-widget-icon",children:"\uD83D\uDCCB"})]}),(0,a.jsx)("div",{className:"admin-widget-value",children:e.length>0?Math.round(e.reduce((e,s)=>e+s.field_count,0)/e.length):0})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,a.jsx)("div",{className:"admin-card",children:(0,a.jsx)("div",{className:"admin-card-content",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),x(e)]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"フィールド数:"}),(0,a.jsxs)("span",{className:"font-medium ml-1",children:[e.field_count,"個"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"回答数:"}),(0,a.jsxs)("span",{className:"font-medium ml-1 text-blue-600",children:[e.response_count,"件"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"有効期間:"}),(0,a.jsx)("span",{className:"font-medium ml-1",children:u(e)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"更新日:"}),(0,a.jsx)("span",{className:"font-medium ml-1",children:new Date(e.updated_at).toLocaleDateString("ja-JP")})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>window.location.href="/admin?page=form-builder&id=".concat(e.id),className:"btn-modern btn-outline-modern btn-sm",title:"フォームを編集",children:"✏️ 編集"}),(0,a.jsx)("button",{onClick:()=>window.open("/form/".concat(e.id),"_blank"),className:"btn-modern btn-secondary-modern btn-sm",title:"フォームをプレビュー",children:"\uD83D\uDC41️ プレビュー"}),(0,a.jsx)("button",{onClick:()=>d(e.id,e.is_active),className:"btn-modern btn-sm ".concat(e.is_active?"btn-warning-modern":"btn-success-modern"),title:e.is_active?"フォームを無効にする":"フォームを有効にする",children:e.is_active?"⏸️":"▶️"}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"btn-modern btn-danger-modern btn-sm",title:"フォームを削除",children:"\uD83D\uDDD1️"})]})]})})},e.id))}),0===m.length&&(0,a.jsx)("div",{className:"admin-card",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"フォームが見つかりません"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["all"!==l?"".concat("active"===l?"有効な":"無効な","フォームはありません。"):"まだフォームが作成されていません。",(0,a.jsx)("br",{}),"新しいフォームを作成してください。"]}),(0,a.jsx)("button",{onClick:()=>window.location.href="/admin?page=form-builder",className:"btn-modern btn-primary-modern",children:"\uD83D\uDEE0️ 新しいフォームを作成"})]})})]})}function E(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)([]),[l,n]=(0,i.useState)(!0),[d,o]=(0,i.useState)("all"),[m,x]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{g(),p()},[]);let g=async()=>{try{let{data:e,error:t}=await c.OQ.from("products").select("\n          *,\n          category:product_categories(*)\n        ").order("display_order",{ascending:!0});if(t)throw t;s(e||[])}catch(e){console.error("商品の取得に失敗しました:",e),s([])}finally{n(!1)}},p=async()=>{try{let{data:e,error:s}=await c.OQ.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;r(e||[])}catch(e){console.error("カテゴリの取得に失敗しました:",e),r([])}},b=async(t,a)=>{try{let{error:i}=await c.OQ.from("products").update({is_available:!a}).eq("id",t);if(i)throw i;s(e.map(e=>e.id===t?{...e,is_available:!a}:e))}catch(e){console.error("商品ステータスの更新に失敗しました:",e),alert("商品ステータスの更新に失敗しました。")}},v=async t=>{if(confirm("この商品を削除しますか？"))try{let{error:a}=await c.OQ.from("products").delete().eq("id",t);if(a)throw a;s(e.filter(e=>e.id!==t))}catch(e){console.error("商品の削除に失敗しました:",e),alert("商品の削除に失敗しました。")}},j=e.filter(e=>{let s="all"===d||e.category_id===d,t=e.name.toLowerCase().includes(m.toLowerCase())||e.description&&e.description.toLowerCase().includes(m.toLowerCase());return s&&t});return l?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"商品一覧"}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)("button",{onClick:()=>window.location.href="/admin/products/add",className:"btn-modern btn-success-modern",children:"\uD83D\uDCE6 新規商品追加"})})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリ"}),(0,a.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"すべてのカテゴリ"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"商品検索"}),(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"商品名で検索...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[j.length," 件の商品"]})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"商品情報"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"カテゴリ"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"価格・単位"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.image_url?(0,a.jsx)("img",{src:e.image_url,alt:e.name,className:"h-12 w-12 rounded-lg object-cover mr-4"}):(0,a.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center mr-4",children:"\uD83D\uDCE6"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.description}),e.barcode&&(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["JAN: ",e.barcode]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===(s=e.category)||void 0===s?void 0:s.name)||"未分類"})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:["\xa5",e.price.toLocaleString()]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.unit}),e.variation_name&&(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.variation_name})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>b(e.id,e.is_available),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_available?"✓ 販売中":"✕ 停止中"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>window.location.href="/admin/products/edit/".concat(e.id),className:"btn-modern btn-outline-modern btn-sm",children:"✏️ 編集"}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"btn-modern btn-danger-modern btn-sm",children:"\uD83D\uDDD1️ 削除"})]})})]},e.id)})})]})})}),0===j.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCE6"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"商品が見つかりません"}),(0,a.jsx)("p",{className:"text-gray-500",children:"検索条件を変更するか、新しい商品を追加してください。"})]})]})}class J{static async getAllProducts(){let{data:e,error:s}=await c.OQ.from("products").select("\n        *,\n        product_categories (\n          id,\n          name,\n          color\n        )\n      ").order("created_at",{ascending:!1});if(s)throw s;return e||[]}static async getActiveProducts(){let{data:e,error:s}=await c.OQ.from("products").select("\n        *,\n        product_categories (\n          id,\n          name,\n          color\n        )\n      ").eq("is_available",!0).order("display_order",{ascending:!0});if(s)throw s;return e||[]}static async getProductsByCategory(e){let{data:s,error:t}=await c.OQ.from("products").select("\n        *,\n        product_categories (\n          id,\n          name,\n          color\n        )\n      ").eq("category_id",e).eq("is_available",!0).order("display_order",{ascending:!0});if(t)throw t;return s||[]}static async createProduct(e){let{data:s,error:t}=await c.OQ.from("products").insert([{...e,category_id:e.category_id||null,unit:e.unit||"個",tax_type:e.tax_type||"inclusive",is_available:!1!==e.is_available,display_order:e.display_order||0}]).select();if(t)throw t;return s[0]}static async updateProduct(e,s){let{data:t,error:a}=await c.OQ.from("products").update({...s,category_id:s.category_id||null}).eq("id",e).select();if(a)throw a;return t[0]}static async deleteProduct(e){let{error:s}=await c.OQ.from("products").delete().eq("id",e);if(s)throw s;return!0}static async getAllCategories(){let{data:e,error:s}=await c.OQ.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(s)throw s;return e||[]}static async bulkImportProducts(e){let s={success:0,failed:0,errors:[]};for(let t of e)try{t.id?await this.updateProduct(t.id,{name:t.name,barcode:t.barcode,price:t.price,variation_name:t.variation_name,tax_type:t.tax_type||"inclusive",category_id:t.category_id||void 0,description:t.description,unit:t.unit||"個"}):await this.createProduct({name:t.name,barcode:t.barcode,price:t.price,variation_name:t.variation_name,tax_type:t.tax_type||"inclusive",category_id:t.category_id||void 0,description:t.description,unit:t.unit||"個",is_available:!0,display_order:0}),s.success++}catch(e){s.failed++,s.errors.push("商品「".concat(t.name,"」: ").concat(e))}return s}static parseCSV(e){let s=e.trim().split("\n");if(s.length<2)return[];let t=s[0].split(",").map(e=>e.trim().replace(/"/g,"")),a=[];for(let e=1;e<s.length;e++){let i=s[e].split(",").map(e=>e.trim().replace(/"/g,"")),r={};t.forEach((e,s)=>{let t=i[s]||"";switch(e.toLowerCase()){case"id":t&&(r.id=t);break;case"name":r.name=t;break;case"barcode":t&&(r.barcode=t);break;case"price":r.price=parseFloat(t)||0;break;case"variation_name":t&&(r.variation_name=t);break;case"tax_type":t&&(r.tax_type=t);break;case"category_id":t&&(r.category_id=t);break;case"description":t&&(r.description=t);break;case"unit":t&&(r.unit=t)}}),r.name&&void 0!==r.price&&a.push(r)}return a}static generateCSVTemplate(e){var s;return"id,name,barcode,price,variation_name,tax_type,category_id,description,unit\n"+["","トマト苗","4901234567890","300","通常価格","inclusive",(null===(s=e[0])||void 0===s?void 0:s.id)||"","中玉トマトの苗","株"].join(",")}static async exportToCSV(){return["id,name,barcode,price,variation_name,tax_type,category_id,description,unit",...(await this.getAllProducts()).map(e=>[e.id,'"'.concat(e.name,'"'),e.barcode||"",e.price,e.variation_name||"",e.tax_type||"",e.category_id||"",'"'.concat(e.description||"",'"'),e.unit].join(","))].join("\n")}}function T(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(!1),[l,n]=(0,i.useState)("single"),[c,d]=(0,i.useState)(""),[o,m]=(0,i.useState)([]),[x,u]=(0,i.useState)(!1),[h,g]=(0,i.useState)({name:"",category_id:"",description:"",price:0,unit:"個",barcode:"",variation_name:"",tax_type:"inclusive",image_url:"",is_available:!0,display_order:0});(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await J.getAllCategories();s(e)}catch(e){console.error("カテゴリの取得に失敗しました:",e),s([])}},b=async e=>{e.preventDefault(),r(!0);try{await J.createProduct({...h,category_id:h.category_id||void 0}),alert("商品が正常に追加されました！"),g({name:"",category_id:"",description:"",price:0,unit:"個",barcode:"",variation_name:"",tax_type:"inclusive",image_url:"",is_available:!0,display_order:0})}catch(e){console.error("商品の追加に失敗しました:",e),alert("商品の追加に失敗しました。")}finally{r(!1)}},v=async()=>{if(0!==o.length){r(!0);try{let e=await J.bulkImportProducts(o);e.errors.length>0?alert("一部の商品でエラーが発生しました:\n".concat(e.errors.join("\n"))):alert("".concat(e.success,"件の商品が正常に処理されました！")),d(""),m([]),u(!1)}catch(e){console.error("CSV インポートに失敗しました:",e),alert("CSV インポートに失敗しました。")}finally{r(!1)}}},j=()=>J.generateCSVTemplate(e),f=async()=>{try{let e=await J.exportToCSV(),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(s),t.download="products_export_".concat(new Date().toISOString().split("T")[0],".csv"),t.click()}catch(e){console.error("CSV エクスポートに失敗しました:",e),alert("CSV エクスポートに失敗しました。")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"商品追加"}),(0,a.jsx)("p",{className:"text-gray-600",children:"新しい商品を登録または一括アップロードします"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([j()],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download="product_template.csv",s.click()},className:"btn-modern btn-outline-modern flex items-center gap-2",title:"CSV形式のテンプレートファイルをダウンロード",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCC4"}),"CSVテンプレート"]}),(0,a.jsxs)("button",{onClick:f,className:"btn-modern btn-secondary-modern flex items-center gap-2",title:"現在の商品データをCSV形式でエクスポート",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE4"}),"商品エクスポート"]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"border-b bg-gray-50",children:(0,a.jsxs)("nav",{className:"flex",children:[(0,a.jsxs)("button",{onClick:()=>n("single"),className:"px-6 py-4 text-sm font-medium border-b-2 transition-all duration-200 flex items-center gap-2 ".concat("single"===l?"border-blue-500 text-blue-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"}),"単一商品追加",(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"推奨"})]}),(0,a.jsxs)("button",{onClick:()=>n("csv"),className:"px-6 py-4 text-sm font-medium border-b-2 transition-all duration-200 flex items-center gap-2 ".concat("csv"===l?"border-blue-500 text-blue-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCA"}),"CSV一括追加",(0,a.jsx)("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full",children:"上級者向け"})]})]})}),(0,a.jsx)("div",{className:"p-6",children:"single"===l?(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"商品名 *"}),(0,a.jsx)("input",{type:"text",value:h.name,onChange:e=>g({...h,name:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"カテゴリ"}),(0,a.jsxs)("select",{value:h.category_id,onChange:e=>g({...h,category_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"カテゴリを選択"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格 *"}),(0,a.jsx)("input",{type:"number",value:h.price,onChange:e=>g({...h,price:Number(e.target.value)}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"単位"}),(0,a.jsx)("input",{type:"text",value:h.unit,onChange:e=>g({...h,unit:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JANコード"}),(0,a.jsx)("input",{type:"text",value:h.barcode,onChange:e=>g({...h,barcode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"価格バリエーション名"}),(0,a.jsx)("input",{type:"text",value:h.variation_name,onChange:e=>g({...h,variation_name:e.target.value}),placeholder:"例: 通常価格、予約価格",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"税区分"}),(0,a.jsxs)("select",{value:h.tax_type,onChange:e=>g({...h,tax_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"inclusive",children:"税込"}),(0,a.jsx)("option",{value:"exclusive",children:"税抜"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"商品説明"}),(0,a.jsx)("textarea",{value:h.description,onChange:e=>g({...h,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_available",checked:h.is_available,onChange:e=>g({...h,is_available:e.target.checked}),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"is_available",className:"text-sm font-medium text-gray-700",children:"販売中として追加"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g({name:"",category_id:"",description:"",price:0,unit:"個",barcode:"",variation_name:"",tax_type:"inclusive",image_url:"",is_available:!0,display_order:0}),className:"btn-modern btn-secondary-modern",children:"リセット"}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"btn-modern btn-success-modern flex items-center gap-2 px-6",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"追加中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg",children:"✅"}),"商品を追加する"]})})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"CSV形式について"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"以下の列を含むCSVファイルをアップロードしてください："}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"id:"})," 既存商品ID（更新時のみ）"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"name:"})," 商品名（必須）"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"barcode:"})," JANコード"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"price:"})," 価格（必須）"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"variation_name:"})," 価格バリエーション名"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"tax_type:"})," 税区分（inclusive/exclusive）"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV データ"}),(0,a.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:10,placeholder:"CSVデータをここに貼り付けてください...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{m(J.parseCSV(c)),u(!0)},disabled:!c.trim(),className:"btn-modern btn-outline-modern",children:"\uD83D\uDC41️ プレビュー"}),x&&(0,a.jsx)("button",{onClick:v,disabled:t||0===o.length,className:"btn-modern btn-success-modern",children:t?"インポート中...":"".concat(o.length,"件をインポート")})]}),x&&o.length>0&&(0,a.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b",children:(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:["プレビュー (",o.length,"件)"]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"商品名"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"価格"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"バリエーション"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"JANコード"}),(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"操作"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:o.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2 text-sm",children:e.name}),(0,a.jsxs)("td",{className:"px-4 py-2 text-sm",children:["\xa5",e.price.toLocaleString()]}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm",children:e.variation_name||"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm",children:e.barcode||"-"}),(0,a.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs rounded-full ".concat(e.id?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.id?"更新":"新規"})})]},s))})]})})]})]})})]})]})}function I(){var e,s,t,r;let[l,n]=(0,i.useState)([]),[d,o]=(0,i.useState)(!0),[m,x]=(0,i.useState)("all"),[u,h]=(0,i.useState)(""),[g,p]=(0,i.useState)(""),[b,v]=(0,i.useState)(null),[j,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{y()},[]);let y=async()=>{try{let{data:e,error:s}=await c.OQ.from("reservations").select("\n          *,\n          customer:customers(*),\n          reservation_items(\n            *,\n            product:products(*)\n          )\n        ").order("created_at",{ascending:!1});if(s)throw s;n(e||[])}catch(e){console.error("予約データの取得に失敗しました:",e),n([])}finally{o(!1)}},N=async(e,s)=>{try{let{error:t}=await c.OQ.from("reservations").update({status:s,..."confirmed"===s&&{confirmation_sent_at:new Date().toISOString()}}).eq("id",e);if(t)throw t;n(l.map(t=>t.id===e?{...t,status:s}:t)),"confirmed"===s&&await w(e)}catch(e){console.error("ステータスの更新に失敗しました:",e),alert("ステータスの更新に失敗しました。")}},w=async e=>{console.log("確認通知を送信:",e)},_=e=>{let s={unpaid:{label:"未払い",className:"bg-red-100 text-red-800"},paid:{label:"支払済",className:"bg-green-100 text-green-800"},partial:{label:"一部支払",className:"bg-yellow-100 text-yellow-800"},refunded:{label:"返金済",className:"bg-gray-100 text-gray-800"}},t=s[e]||s.unpaid;return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.className),children:t.label})},D=l.filter(e=>{var s,t;let a="all"===m||e.status===m,i=!u||e.reservation_date===u,r=!g||e.reservation_number.toLowerCase().includes(g.toLowerCase())||(null===(s=e.customer)||void 0===s?void 0:s.full_name.toLowerCase().includes(g.toLowerCase()))||(null===(t=e.customer)||void 0===t?void 0:t.phone.includes(g));return a&&i&&r}),C=e=>{v(e),f(!0)};return d?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"予約一覧"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{className:"btn-modern btn-success-modern",children:"\uD83D\uDCDD 新規予約追加"}),(0,a.jsx)("button",{className:"btn-modern btn-outline-modern",children:"\uD83D\uDCCA 予約レポート"})]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ステータス"}),(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"すべてのステータス"}),(0,a.jsx)("option",{value:"pending",children:"保留中"}),(0,a.jsx)("option",{value:"confirmed",children:"確定"}),(0,a.jsx)("option",{value:"ready",children:"準備完了"}),(0,a.jsx)("option",{value:"completed",children:"完了"}),(0,a.jsx)("option",{value:"cancelled",children:"キャンセル"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"受取日"}),(0,a.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索"}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),placeholder:"予約番号、顧客名、電話番号で検索",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[D.length," 件の予約"]})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"予約情報"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"顧客情報"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"受取日時"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"金額"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"支払い"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{var s,t,i;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.reservation_number}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["作成: ",new Date(e.created_at).toLocaleDateString()]}),e.notes&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["\uD83D\uDCDD ",e.notes]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null===(s=e.customer)||void 0===s?void 0:s.full_name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\uD83D\uDCDE ",null===(t=e.customer)||void 0===t?void 0:t.phone]}),(null===(i=e.customer)||void 0===i?void 0:i.email)&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\uD83D\uDCE7 ",e.customer.email]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.reservation_date).toLocaleDateString()}),e.pickup_time_start&&e.pickup_time_end&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.pickup_time_start," - ",e.pickup_time_end]})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\xa5",e.final_amount.toLocaleString()]}),e.discount_amount>0&&(0,a.jsxs)("div",{className:"text-xs text-green-600",children:["割引: -\xa5",e.discount_amount.toLocaleString()]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("select",{value:e.status,onChange:s=>N(e.id,s.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"pending",children:"保留中"}),(0,a.jsx)("option",{value:"confirmed",children:"確定"}),(0,a.jsx)("option",{value:"ready",children:"準備完了"}),(0,a.jsx)("option",{value:"completed",children:"完了"}),(0,a.jsx)("option",{value:"cancelled",children:"キャンセル"})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:_(e.payment_status)}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>C(e),className:"btn-modern btn-outline-modern btn-sm",children:"\uD83D\uDC41️ 詳細"}),(0,a.jsx)("button",{className:"btn-modern btn-primary-modern btn-sm",children:"✏️ 編集"})]})})]},e.id)})})]})})}),0===D.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC5"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"予約が見つかりません"}),(0,a.jsx)("p",{className:"text-gray-500",children:"検索条件を変更するか、新しい予約を追加してください。"})]}),j&&b&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"予約詳細"}),(0,a.jsx)("button",{onClick:()=>f(!1),className:"btn-modern btn-ghost-modern btn-sm",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"予約番号"}),(0,a.jsx)("div",{className:"text-sm text-gray-900",children:b.reservation_number})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ステータス"}),(0,a.jsx)("div",{children:(e=>{let s={pending:{label:"保留中",className:"bg-yellow-100 text-yellow-800"},confirmed:{label:"確定",className:"bg-green-100 text-green-800"},ready:{label:"準備完了",className:"bg-blue-100 text-blue-800"},completed:{label:"完了",className:"bg-gray-100 text-gray-800"},cancelled:{label:"キャンセル",className:"bg-red-100 text-red-800"}},t=s[e]||s.pending;return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.className),children:t.label})})(b.status)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"受取日"}),(0,a.jsx)("div",{className:"text-sm text-gray-900",children:new Date(b.reservation_date).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"支払いステータス"}),(0,a.jsx)("div",{children:_(b.payment_status)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"顧客情報"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"氏名"}),(0,a.jsx)("div",{className:"text-sm text-gray-900",children:null===(e=b.customer)||void 0===e?void 0:e.full_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"電話番号"}),(0,a.jsx)("div",{className:"text-sm text-gray-900",children:null===(s=b.customer)||void 0===s?void 0:s.phone})]}),(null===(t=b.customer)||void 0===t?void 0:t.email)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"メールアドレス"}),(0,a.jsx)("div",{className:"text-sm text-gray-900",children:b.customer.email})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"注文商品"}),(0,a.jsx)("div",{className:"space-y-2",children:null===(r=b.reservation_items)||void 0===r?void 0:r.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:null===(t=e.product)||void 0===t?void 0:t.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["\xa5",e.unit_price.toLocaleString()," \xd7 ",e.quantity]})]}),(0,a.jsxs)("div",{className:"font-medium",children:["\xa5",e.subtotal.toLocaleString()]})]},s)})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,a.jsx)("span",{children:"合計"}),(0,a.jsxs)("span",{children:["\xa5",b.final_amount.toLocaleString()]})]})})]}),(b.notes||b.admin_notes)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"備考・メモ"}),b.notes&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"お客様備考"}),(0,a.jsx)("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:b.notes})]}),b.admin_notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"管理メモ"}),(0,a.jsx)("div",{className:"text-sm text-gray-900 bg-yellow-50 p-2 rounded",children:b.admin_notes})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>f(!1),className:"btn-modern btn-secondary-modern",children:"閉じる"}),(0,a.jsx)("button",{className:"btn-modern btn-primary-modern",children:"編集"})]})]})})})]})}function A(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(null),[l,n]=(0,i.useState)(!1),[d,o]=(0,i.useState)(!1),[m,x]=(0,i.useState)(!0),u=[{value:"reservation_confirmation",label:"予約確定通知",icon:"✅"},{value:"reservation_reminder",label:"予約リマインダー",icon:"⏰"},{value:"payment_confirmation",label:"支払い確認通知",icon:"\uD83D\uDCB0"},{value:"cancellation",label:"キャンセル通知",icon:"❌"}];(0,i.useEffect)(()=>{h()},[]);let h=async()=>{try{let{data:e,error:t}=await c.OQ.from("line_templates").select("*").order("created_at",{ascending:!1});if(t)throw t;s(e||[]),e&&e.length>0&&r(e[0])}catch(e){console.error("テンプレートの取得に失敗しました:",e),s([])}finally{x(!1)}},g=async()=>{if(t)try{let{error:e}=await c.OQ.from("line_templates").update({name:t.name,template_type:t.template_type,subject:t.subject,message:t.message,is_active:t.is_active}).eq("id",t.id);if(e)throw e;await h(),n(!1),alert("テンプレートが保存されました！")}catch(e){console.error("テンプレートの保存に失敗しました:",e),alert("テンプレートの保存に失敗しました。")}},p=async()=>{try{let{data:e,error:s}=await c.OQ.from("line_templates").insert([{name:"新しいテンプレート",template_type:"reservation_confirmation",subject:"",message:"",is_active:!1}]).select().single();if(s)throw s;await h(),r(e),n(!0)}catch(e){console.error("テンプレートの作成に失敗しました:",e),alert("テンプレートの作成に失敗しました。")}},b=async s=>{if(confirm("このテンプレートを削除しますか？"))try{let{error:a}=await c.OQ.from("line_templates").delete().eq("id",s);if(a)throw a;await h(),(null==t?void 0:t.id)===s&&r(e[0]||null),alert("テンプレートが削除されました。")}catch(e){console.error("テンプレートの削除に失敗しました:",e),alert("テンプレートの削除に失敗しました。")}},v=async s=>{let t=e.find(e=>e.id===s);if(t)try{let{error:e}=await c.OQ.from("line_templates").update({is_active:!t.is_active}).eq("id",s);if(e)throw e;await h()}catch(e){console.error("テンプレートの有効/無効の切り替えに失敗しました:",e),alert("テンプレートの有効/無効の切り替えに失敗しました。")}};return m?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"flex h-full bg-gray-50",children:[(0,a.jsxs)("div",{className:"w-1/3 border-r border-gray-200 bg-white",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"LINEテンプレート"}),(0,a.jsx)("button",{onClick:p,className:"btn-modern btn-primary-modern btn-sm",children:"+ 新規作成"})]})}),(0,a.jsx)("div",{className:"p-4 space-y-3",children:e.map(e=>{var s,i;return(0,a.jsxs)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all ".concat((null==t?void 0:t.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),onClick:()=>r(e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:null===(s=u.find(s=>s.value===e.template_type))||void 0===s?void 0:s.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:null===(i=u.find(s=>s.value===e.template_type))||void 0===i?void 0:i.label})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),v(e.id)},className:"btn-modern btn-sm btn-icon-only ".concat(e.is_active?"btn-success-modern":"btn-secondary-modern"),children:e.is_active?"✓":"○"}),(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),b(e.id)},className:"btn-modern btn-danger-modern btn-sm btn-icon-only",children:"\uD83D\uDDD1️"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["最終更新: ",new Date(e.updated_at).toLocaleDateString()]})]},e.id)})})]}),t&&(0,a.jsx)("div",{className:"flex-1 flex",children:(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"テンプレート編集"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>o(!d),className:"btn-modern btn-sm ".concat(d?"btn-warning-modern":"btn-secondary-modern"),children:d?"\uD83D\uDCDD 編集":"\uD83D\uDC41️ プレビュー"}),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:g,className:"btn-modern btn-success-modern btn-sm",children:"\uD83D\uDCBE 保存"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"btn-modern btn-secondary-modern btn-sm",children:"キャンセル"})]}):(0,a.jsx)("button",{onClick:()=>n(!0),className:"btn-modern btn-primary-modern btn-sm",children:"✏️ 編集"})]})]}),d?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"\uD83D\uDCF1 LINEメッセージ プレビュー"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:["件名: ",t.subject]}),(0,a.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed",children:(()=>{if(!t)return"";let e=t.message;return Object.entries({customer_name:"山田太郎",reservation_id:"R20240101001",phone_number:"090-1234-5678",reservation_date:"2024年1月15日",pickup_time:"10:00-12:00",product_list:"有機肥料A \xd7 2袋\nトマト苗 \xd7 10株",total_amount:"15,000",payment_amount:"15,000",payment_method:"クレジットカード",payment_date:"2024年1月14日 15:30",cancellation_date:"2024年1月14日 16:00",cancellation_reason:"お客様都合",shop_name:"グリーンファーム種苗店",shop_phone:"03-1234-5678"}).forEach(s=>{let[t,a]=s;e=e.replace(RegExp("{".concat(t,"}"),"g"),a)}),e})()})]})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テンプレート名"}),(0,a.jsx)("input",{type:"text",value:t.name,onChange:e=>r({...t,name:e.target.value}),disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テンプレートタイプ"}),(0,a.jsx)("select",{value:t.template_type,onChange:e=>r({...t,template_type:e.target.value}),disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",children:u.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.icon," ",e.label]},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"件名"}),(0,a.jsx)("input",{type:"text",value:t.subject,onChange:e=>r({...t,subject:e.target.value}),disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",placeholder:"メッセージの件名を入力"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メッセージ本文"}),(0,a.jsx)("textarea",{value:t.message,onChange:e=>r({...t,message:e.target.value}),disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50",rows:12,placeholder:"メッセージ本文を入力してください。変数は {variable_name} の形式で使用できます。"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"利用可能な変数"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{customer_name}"})," - お客様名"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{reservation_id}"})," - 予約番号"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{phone_number}"})," - 電話番号"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{reservation_date}"})," - 予約日"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{product_list}"})," - 商品一覧"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{total_amount}"})," - 合計金額"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{shop_name}"})," - 店舗名"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"{shop_phone}"})," - 店舗電話"]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",checked:t.is_active,onChange:e=>r({...t,is_active:e.target.checked}),disabled:!l,className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"このテンプレートを有効にする"})]})]})]})})})]})}function V(e){let{onLogin:s}=e,[t,r]=(0,i.useState)(""),[l,n]=(0,i.useState)("");return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center relative bg-gradient-to-br from-green-50 to-amber-50 px-4",style:{backgroundImage:"url(/images/login-background.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-900/70 to-amber-900/70 backdrop-blur-sm"}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-sm mx-auto space-y-6 bg-white/95 backdrop-blur-md p-6 rounded-2xl shadow-2xl border border-white/20 animate-slideUp",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-3 animate-bounce",children:"\uD83C\uDF31"}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-green-700 to-amber-700 bg-clip-text text-transparent",children:"片桐商店 ベジライス"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 text-sm sm:text-base",children:"管理システム"})]}),(0,a.jsxs)("form",{className:"space-y-4",onSubmit:e=>{e.preventDefault(),"admin123"===t?s():n("パスワードが間違っています")},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"管理者パスワード"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 bg-white/90 text-base",placeholder:"パスワードを入力してください",value:t,onChange:e=>r(e.target.value)})]}),l&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center bg-red-50/90 p-3 rounded-lg animate-shake",children:l}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-green-600 to-amber-600 hover:from-green-700 hover:to-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 transform hover:scale-105 hover:shadow-lg",children:"\uD83D\uDD13 ログイン"})}),(0,a.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,a.jsxs)("p",{children:["デモ用パスワード: ",(0,a.jsx)("span",{className:"font-mono bg-amber-100 px-2 py-1 rounded text-amber-800",children:"admin123"})]})})]})]})]})}function Z(){let[e,s]=(0,i.useState)(!1),[t,r]=(0,i.useState)("dashboard");return e?(0,a.jsx)(l,{currentPage:t,onPageChange:r,children:(()=>{switch(t){case"dashboard":default:return(0,a.jsx)(y,{});case"reservation-list":return(0,a.jsx)(I,{});case"reservation-calendar":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"予約カレンダー"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDDD3️"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"予約カレンダー"}),(0,a.jsx)("p",{className:"text-gray-600",children:"カレンダー形式で予約を管理します。"})]})]});case"reservation-search":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"予約検索"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"予約検索"}),(0,a.jsx)("p",{className:"text-gray-600",children:"詳細条件で予約を検索します。"})]})]});case"product-list":return(0,a.jsx)(E,{});case"product-add":return(0,a.jsx)(T,{});case"product-categories":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"カテゴリ管理"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFF7️"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"カテゴリ管理"}),(0,a.jsx)("p",{className:"text-gray-600",children:"商品カテゴリの作成・編集・削除を行います。"})]})]});case"customer-list":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"顧客一覧"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC64"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"顧客一覧"}),(0,a.jsx)("p",{className:"text-gray-600",children:"登録されている顧客情報を管理します。"})]})]});case"customer-search":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"顧客検索"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"顧客検索"}),(0,a.jsx)("p",{className:"text-gray-600",children:"詳細条件で顧客を検索します。"})]})]});case"form-builder":return(0,a.jsx)(P,{});case"form-list":return(0,a.jsx)(F,{});case"form-settings":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"フォーム設定"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"⚙️"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"フォーム設定"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["フォーム全体の設定を管理します。",(0,a.jsx)("br",{}),"通知設定、デザイン設定、セキュリティ設定など。"]})]})]});case"business-settings":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"店舗設定"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFEA"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"店舗設定"}),(0,a.jsx)("p",{className:"text-gray-600",children:"店舗情報、営業時間、連絡先などの基本設定を管理します。"})]})]});case"notification-settings":return(0,a.jsx)(A,{});case"user-management":return(0,a.jsxs)("div",{className:"admin-card",children:[(0,a.jsx)("div",{className:"admin-card-header",children:(0,a.jsx)("h2",{className:"admin-card-title",children:"ユーザー管理"})}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC68‍\uD83D\uDCBC"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ユーザー管理"}),(0,a.jsx)("p",{className:"text-gray-600",children:"管理者ユーザーの追加・編集・権限設定を行います。"})]})]})}})()}):(0,a.jsx)(V,{onLogin:()=>s(!0)})}}},function(e){e.O(0,[500,880,971,117,744],function(){return e(e.s=9435)}),_N_E=e.O()}]);