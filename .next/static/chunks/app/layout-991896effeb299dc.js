(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4636:function(e,t,r){Promise.resolve().then(r.bind(r,1274)),Promise.resolve().then(r.bind(r,7464)),Promise.resolve().then(r.bind(r,9703)),Promise.resolve().then(r.t.bind(r,8003,23)),Promise.resolve().then(r.t.bind(r,4742,23)),Promise.resolve().then(r.t.bind(r,7960,23))},6882:function(e,t,r){"use strict";r.d(t,{JO:function(){return eP},PJ:function(){return eb}});var n=r(7437),s=r(9397),i=r(4630),a=r(8930),o=r(2489),l=r(3229),u=r(8867),c=r(3247),d=r(740),Z=r(9076),f=r(2660),h=r(6858),m=r(2451),w=r(407),g=r(875),v=r(8293),p=r(7684),x=r(2369),I=r(5805),y=r(9663),b=r(7692),k=r(1047),P=r(1723),j=r(8736),C=r(804),N=r(2735),O=r(7689),J=r(4794),E=r(6275),S=r(8226),z=r(5252),L=r(3041),_=r(9345),T=r(8335),F=r(8919),M=r(2718),X=r(3774),A=r(2048),W=r(7877),U=r(5302),V=r(5131),q=r(3639),D=r(3245),G=r(112),Y=r(2208),B=r(7769),R=r(5884),H=r(4415),Q=r(6337),K=r(9711),$=r(1567),ee=r(91),et=r(8728),er=r(9637),en=r(7586),es=r(1473),ei=r(4766),ea=r(2252),eo=r(7404),el=r(3057),eu=r(2879),ec=r(9547),ed=r(9646),eZ=r(5929),ef=r(1341),eh=r(6540),em=r(6595),ew=r(8997),eg=r(8896),ev=r(2720),ep=r(1178),ex=r(7414),eI=r(401),ey=r(3388);let eb={add:s.Z,edit:i.Z,delete:a.Z,remove:o.Z,save:l.Z,copy:u.Z,search:c.Z,filter:d.Z,refresh:Z.Z,back:f.Z,forward:h.Z,up:m.Z,down:w.Z,chevronDown:g.Z,menu:v.Z,more:p.Z,user:x.Z,users:I.Z,profile:y.Z,logout:b.Z,calendar:k.Z,clock:P.Z,file:j.Z,document:j.Z,image:C.Z,download:N.Z,upload:O.Z,product:J.Z,cart:E.Z,payment:S.Z,money:z.Z,phone:L.Z,mail:_.Z,link:T.Z,share:F.Z,message:M.Z,location:X.Z,map:A.Z,navigation:W.Z,success:U.Z,error:V.Z,warning:q.Z,info:D.Z,help:G.Z,eye:Y.Z,eyeOff:B.Z,show:Y.Z,hide:B.Z,expand:R.Z,collapse:H.Z,lock:Q.Z,unlock:K.Z,security:Q.Z,exit:b.Z,chart:$.Z,stats:$.Z,database:ee.Z,settings:et.Z,admin:et.Z,config:et.Z,home:er.Z,dashboard:er.Z,list:en.Z,grid:es.Z,notification:ei.Z,alert:ea.Z,qrcode:eo.Z,plant:el.Z,seed:J.Z,flower:eu.Z,tree:el.Z,leaf:ec.Z,garden:ed.Z,sun:eZ.Z,cloud:ef.Z,rain:ef.Z,weather:eZ.Z,loading:eh.Z,spinner:Z.Z,star:em.Z,heart:ew.Z,target:eg.Z,tag:ev.Z,bookmark:ep.Z,gift:ex.Z,check:eI.Z,cancel:o.Z,confirm:U.Z,customerInfo:x.Z,reservationInfo:k.Z,otherInfo:j.Z,packageIcon:J.Z,mobileIcon:ey.Z,saveIcon:l.Z,qrIcon:eo.Z,searchIcon:c.Z,deleteIcon:a.Z,closeIcon:o.Z,moneyIcon:z.Z},ek={xs:12,sm:16,md:20,lg:24,xl:32,"2xl":48},eP=e=>{let{icon:t,size:r="md",className:s="",color:i,...a}=e,o="number"==typeof r?r:ek[r];return(0,n.jsx)(t,{width:o,height:o,className:s,color:i,...a})}},1274:function(e,t,r){"use strict";r.d(t,{LiffProvider:function(){return a},a0:function(){return o}});var n=r(7437),s=r(2265);let i=(0,s.createContext)(void 0),a=e=>{let{children:t,liffId:r,autoInit:a=!0}=e,[o,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(!1),[d,Z]=(0,s.useState)(!1),[f,h]=(0,s.useState)(null),[m,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=document.createElement("script");return e.src="https://static.line-scdn.net/liff/edge/2/sdk.js",e.async=!0,e.onload=()=>{window.liff&&a&&r&&g(r)},e.onerror=()=>{w("LIFFライブラリの読み込みに失敗しました")},document.head.appendChild(e),()=>{document.head.removeChild(e)}},[r,a]);let g=async e=>{try{if(w(null),!window.liff)throw Error("LIFFライブラリが読み込まれていません");if(await window.liff.init({liffId:e}),l(window.liff),c(!0),Z(window.liff.isInClient()),window.liff.isLoggedIn())try{let e=await window.liff.getProfile();h({userId:e.userId,displayName:e.displayName,pictureUrl:e.pictureUrl,statusMessage:e.statusMessage})}catch(e){}}catch(e){w("LINEミニアプリの初期化に失敗しました")}},v=async e=>{if(!o||!o.isInClient())throw Error("LINEアプリ内でのみ利用可能です");try{await o.sendMessages(e)}catch(e){throw e}},p=async e=>{if(!o)throw Error("LIFFが初期化されていません");try{await o.shareTargetPicker(e)}catch(e){throw e}};return(0,n.jsx)(i.Provider,{value:{liff:o,isLiffReady:u,isInLineApp:d,profile:f,error:m,initializeLiff:g,closeLiff:()=>{o&&o.isInClient()&&o.closeWindow()},sendMessages:v,shareTargetPicker:p},children:t})},o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useLiff must be used within a LiffProvider");return e}},7464:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return l}});var n=r(7437),s=r(2265),i=r(2141),a=r(9703);let o=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{var t,r;let{children:l}=e,[u,c]=(0,s.useState)(null),[d,Z]=(0,s.useState)(null),[f,h]=(0,s.useState)(!0),{showError:m,showSuccess:w}=(0,a.p)(),g=(null==u?void 0:u.email)==="admin@katagiri-shop.com"||(null==u?void 0:null===(t=u.user_metadata)||void 0===t?void 0:t.role)==="admin"||(null==u?void 0:null===(r=u.app_metadata)||void 0===r?void 0:r.role)==="admin";(0,s.useEffect)(()=>{i.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;Z(r),c(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),h(!1)});let{data:{subscription:e}}=i.O.auth.onAuthStateChange((e,t)=>{var r;Z(t),c(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),h(!1)});return()=>e.unsubscribe()},[]);let v=async(e,t)=>{try{h(!0);let{data:s,error:a}=await i.O.auth.signInWithPassword({email:e,password:t});if(a)return m("ログインに失敗しました",a.message),!1;if(s.user){var r,n;if(!("admin@katagiri-shop.com"===s.user.email||(null===(r=s.user.user_metadata)||void 0===r?void 0:r.role)==="admin"||(null===(n=s.user.app_metadata)||void 0===n?void 0:n.role)==="admin"))return await i.O.auth.signOut(),m("アクセス権限がありません","管理者アカウントでログインしてください"),!1;return w("ログインしました","管理画面へようこそ"),!0}return!1}catch(e){return m("ログインエラー",e.message||"予期しないエラーが発生しました"),!1}finally{h(!1)}},p=async()=>{try{h(!0);let{error:e}=await i.O.auth.signOut();e?m("ログアウトに失敗しました",e.message):w("ログアウトしました","")}catch(e){m("ログアウトエラー",e.message)}finally{h(!1)}};return(0,n.jsx)(o.Provider,{value:{user:u,session:d,loading:f,signIn:v,signOut:p,isAdmin:g},children:l})}},9703:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return c},p:function(){return u}});var n=r(7437),s=r(2265),i=r(6882);let a=e=>{let{id:t,type:r,title:a,message:o,duration:l=5e3,onClose:u}=e;return(0,s.useEffect)(()=>{let e=setTimeout(()=>{u(t)},l);return()=>clearTimeout(e)},[t,l,u]),(0,n.jsx)("div",{className:"rounded-lg p-4 border shadow-lg max-w-sm w-full transition-all duration-300 ".concat((()=>{switch(r){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(r){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}})()),children:(0,n.jsx)(i.JO,{icon:(()=>{switch(r){case"success":return i.PJ.success;case"error":return i.PJ.error;case"warning":return i.PJ.warning;default:return i.PJ.info}})(),size:"md"})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("h3",{className:"text-sm font-medium",children:a}),o&&(0,n.jsx)("p",{className:"text-sm mt-1",children:o})]}),(0,n.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,n.jsx)("button",{onClick:()=>u(t),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,n.jsx)(i.JO,{icon:i.PJ.cancel,size:"sm"})})})]})})},o=e=>{let{toasts:t,onRemoveToast:r}=e;return(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,n.jsx)(a,{id:e.id,type:e.type,title:e.title,message:e.message,duration:e.duration,onClose:r},e.id))})},l=(0,s.createContext)(void 0),u=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e},c=e=>{let{children:t}=e,[r,i]=(0,s.useState)([]),a=e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t};i(e=>[...e,r])};return(0,n.jsxs)(l.Provider,{value:{showToast:a,showSuccess:(e,t)=>{a({type:"success",title:e,message:t})},showError:(e,t)=>{a({type:"error",title:e,message:t})},showWarning:(e,t)=>{a({type:"warning",title:e,message:t})},showInfo:(e,t)=>{a({type:"info",title:e,message:t})}},children:[t,(0,n.jsx)(o,{toasts:r,onRemoveToast:e=>{i(t=>t.filter(t=>t.id!==e))}})]})}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(6580).eI)("https://uscvsipskkbegcfktjyt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzY3ZzaXBza2tiZWdjZmt0anl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MDI4MzUsImV4cCI6MjA2Nzk3ODgzNX0.VhcGWXb-PpHTfqPApSIG4C6xXLik8JClsNhOdJIgdzw")},7960:function(){}},function(e){e.O(0,[540,454,580,919,362,744],function(){return e(e.s=4636)}),_N_E=e.O()}]);