(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7680:function(e,t,r){Promise.resolve().then(r.bind(r,7464)),Promise.resolve().then(r.bind(r,9703)),Promise.resolve().then(r.t.bind(r,4742,23)),Promise.resolve().then(r.t.bind(r,7960,23))},6882:function(e,t,r){"use strict";r.d(t,{JO:function(){return e_},PJ:function(){return eI}});var n=r(7437),s=r(9397),a=r(4630),o=r(8930),i=r(2489),l=r(3229),u=r(8867),c=r(3247),d=r(740),Z=r(9076),m=r(2660),h=r(6858),f=r(2451),g=r(407),v=r(875),p=r(8293),x=r(7684),w=r(2369),b=r(5805),y=r(9663),I=r(7692),k=r(1047),_=r(1723),j=r(8736),N=r(804),O=r(2735),P=r(7689),J=r(4794),S=r(6275),C=r(8226),E=r(5252),z=r(3041),T=r(9345),A=r(8335),Q=r(8919),X=r(2718),R=r(3774),M=r(2048),V=r(7877),F=r(5302),L=r(5131),W=r(3639),Y=r(3245),q=r(112),B=r(2208),D=r(7769),G=r(5884),U=r(4415),H=r(6337),K=r(9711),$=r(1567),ee=r(91),et=r(8728),er=r(9637),en=r(7586),es=r(1473),ea=r(4766),eo=r(2252),ei=r(7404),el=r(3057),eu=r(2879),ec=r(9547),ed=r(9646),eZ=r(5929),em=r(1341),eh=r(6540),ef=r(6595),eg=r(8997),ev=r(8896),ep=r(2720),ex=r(1178),ew=r(7414),eb=r(401),ey=r(3388);let eI={add:s.Z,edit:a.Z,delete:o.Z,remove:i.Z,save:l.Z,copy:u.Z,search:c.Z,filter:d.Z,refresh:Z.Z,back:m.Z,forward:h.Z,up:f.Z,down:g.Z,chevronDown:v.Z,menu:p.Z,more:x.Z,user:w.Z,users:b.Z,profile:y.Z,logout:I.Z,calendar:k.Z,clock:_.Z,file:j.Z,document:j.Z,image:N.Z,download:O.Z,upload:P.Z,product:J.Z,cart:S.Z,payment:C.Z,money:E.Z,phone:z.Z,mail:T.Z,link:A.Z,share:Q.Z,message:X.Z,location:R.Z,map:M.Z,navigation:V.Z,success:F.Z,error:L.Z,warning:W.Z,info:Y.Z,help:q.Z,eye:B.Z,eyeOff:D.Z,show:B.Z,hide:D.Z,expand:G.Z,collapse:U.Z,lock:H.Z,unlock:K.Z,security:H.Z,exit:I.Z,chart:$.Z,stats:$.Z,database:ee.Z,settings:et.Z,admin:et.Z,config:et.Z,home:er.Z,dashboard:er.Z,list:en.Z,grid:es.Z,notification:ea.Z,alert:eo.Z,qrcode:ei.Z,plant:el.Z,seed:J.Z,flower:eu.Z,tree:el.Z,leaf:ec.Z,garden:ed.Z,sun:eZ.Z,cloud:em.Z,rain:em.Z,weather:eZ.Z,loading:eh.Z,spinner:Z.Z,star:ef.Z,heart:eg.Z,target:ev.Z,tag:ep.Z,bookmark:ex.Z,gift:ew.Z,check:eb.Z,cancel:i.Z,confirm:F.Z,customerInfo:w.Z,reservationInfo:k.Z,otherInfo:j.Z,packageIcon:J.Z,mobileIcon:ey.Z,saveIcon:l.Z,qrIcon:ei.Z,searchIcon:c.Z,deleteIcon:o.Z,closeIcon:i.Z,moneyIcon:E.Z},ek={xs:12,sm:16,md:20,lg:24,xl:32,"2xl":48},e_=e=>{let{icon:t,size:r="md",className:s="",color:a,...o}=e,i="number"==typeof r?r:ek[r];return(0,n.jsx)(t,{width:i,height:i,className:s,color:a,...o})}},7464:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return u},a:function(){return l}});var n=r(7437),s=r(2265),a=r(2141),o=r(9703);let i=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},u=e=>{var t,r;let{children:l}=e,[u,c]=(0,s.useState)(null),[d,Z]=(0,s.useState)(null),[m,h]=(0,s.useState)(!0),{showError:f,showSuccess:g}=(0,o.p)(),v=(null==u?void 0:u.email)==="admin@katagiri-shop.com"||(null==u?void 0:null===(t=u.user_metadata)||void 0===t?void 0:t.role)==="admin"||(null==u?void 0:null===(r=u.app_metadata)||void 0===r?void 0:r.role)==="admin";(0,s.useEffect)(()=>{a.OQ.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;Z(r),c(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),h(!1)});let{data:{subscription:e}}=a.OQ.auth.onAuthStateChange((e,t)=>{var r;Z(t),c(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),h(!1)});return()=>e.unsubscribe()},[]);let p=async(e,t)=>{try{h(!0);let{data:s,error:o}=await a.OQ.auth.signInWithPassword({email:e,password:t});if(o)return f("ログインに失敗しました",o.message),!1;if(s.user){var r,n;if(!("admin@katagiri-shop.com"===s.user.email||(null===(r=s.user.user_metadata)||void 0===r?void 0:r.role)==="admin"||(null===(n=s.user.app_metadata)||void 0===n?void 0:n.role)==="admin"))return await a.OQ.auth.signOut(),f("アクセス権限がありません","管理者アカウントでログインしてください"),!1;return g("ログインしました","管理画面へようこそ"),!0}return!1}catch(e){return f("ログインエラー",e.message||"予期しないエラーが発生しました"),!1}finally{h(!1)}},x=async()=>{try{h(!0);let{error:e}=await a.OQ.auth.signOut();e?f("ログアウトに失敗しました",e.message):g("ログアウトしました","")}catch(e){f("ログアウトエラー",e.message)}finally{h(!1)}};return(0,n.jsx)(i.Provider,{value:{user:u,session:d,loading:m,signIn:p,signOut:x,isAdmin:v},children:l})}},9703:function(e,t,r){"use strict";r.d(t,{ToastProvider:function(){return c},p:function(){return u}});var n=r(7437),s=r(2265),a=r(6882);let o=e=>{let{id:t,type:r,title:o,message:i,duration:l=5e3,onClose:u}=e;return(0,s.useEffect)(()=>{let e=setTimeout(()=>{u(t)},l);return()=>clearTimeout(e)},[t,l,u]),(0,n.jsx)("div",{className:"rounded-lg p-4 border shadow-lg max-w-sm w-full transition-all duration-300 ".concat((()=>{switch(r){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()),children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(r){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}})()),children:(0,n.jsx)(a.JO,{icon:(()=>{switch(r){case"success":return a.PJ.success;case"error":return a.PJ.error;case"warning":return a.PJ.warning;default:return a.PJ.info}})(),size:"md"})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("h3",{className:"text-sm font-medium",children:o}),i&&(0,n.jsx)("p",{className:"text-sm mt-1",children:i})]}),(0,n.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,n.jsx)("button",{onClick:()=>u(t),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,n.jsx)(a.JO,{icon:a.PJ.cancel,size:"sm"})})})]})})},i=e=>{let{toasts:t,onRemoveToast:r}=e;return(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,n.jsx)(o,{id:e.id,type:e.type,title:e.title,message:e.message,duration:e.duration,onClose:r},e.id))})},l=(0,s.createContext)(void 0),u=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e},c=e=>{let{children:t}=e,[r,a]=(0,s.useState)([]),o=e=>{let t=Math.random().toString(36).substr(2,9),r={...e,id:t};a(e=>[...e,r])};return(0,n.jsxs)(l.Provider,{value:{showToast:o,showSuccess:(e,t)=>{o({type:"success",title:e,message:t})},showError:(e,t)=>{o({type:"error",title:e,message:t})},showWarning:(e,t)=>{o({type:"warning",title:e,message:t})},showInfo:(e,t)=>{o({type:"info",title:e,message:t})}},children:[t,(0,n.jsx)(i,{toasts:r,onRemoveToast:e=>{a(t=>t.filter(t=>t.id!==e))}})]})}},2141:function(e,t,r){"use strict";r.d(t,{OQ:function(){return l}});var n=r(6580),s=r(5566);let a="https://uscvsipskkbegcfktjyt.supabase.co",o=null,i=null,l=o=(0,n.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzY3ZzaXBza2tiZWdjZmt0anl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MDI4MzUsImV4cCI6MjA2Nzk3ODgzNX0.VhcGWXb-PpHTfqPApSIG4C6xXLik8JClsNhOdJIgdzw",{auth:{persistSession:!0,autoRefreshToken:!0,storage:window.localStorage}});(()=>{if(!i){let e=s.env.SUPABASE_SERVICE_ROLE_KEY||"your-service-role-key";i=(0,n.eI)(a,e,{auth:{autoRefreshToken:!1,persistSession:!1}})}})(),window.addEventListener("beforeunload",()=>{o=null,i=null})},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[540,100,971,117,744],function(){return e(e.s=7680)}),_N_E=e.O()}]);