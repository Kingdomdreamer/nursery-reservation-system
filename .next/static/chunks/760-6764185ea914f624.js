"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{1254:function(e,t,s){s.d(t,{Z:function(){return d}});var i=s(7437),n=s(2265),a=s(7648),r=s(9376),l=s(9703);function c(e){let{isOpen:t,onClose:s}=e,{showSuccess:a,showError:r}=(0,l.p)(),[c,o]=(0,n.useState)([]),[d,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&x()},[t]);let x=async()=>{m(!0);try{let e=[{id:"1",type:"info",title:"今日の予約",message:"本日の予約が3件あります",read:!1,created_at:new Date().toISOString(),action_url:"/admin/reservations"},{id:"2",type:"warning",title:"在庫切れ商品",message:"2つの商品が在庫切れです",read:!1,created_at:new Date(Date.now()-36e5).toISOString(),action_url:"/admin/products"},{id:"3",type:"success",title:"設定更新",message:"システム設定が正常に更新されました",read:!0,created_at:new Date(Date.now()-72e5).toISOString()}];o(e)}catch(e){r("通知の取得に失敗しました")}finally{m(!1)}},h=async e=>{o(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},b=async()=>{o(e=>e.map(e=>({...e,read:!0}))),a("すべての通知を既読にしました")},u=async e=>{o(t=>t.filter(t=>t.id!==e)),a("通知を削除しました")},f=e=>{switch(e){case"info":return"bi-info-circle text-primary";case"warning":return"bi-exclamation-triangle text-warning";case"success":return"bi-check-circle text-success";case"error":return"bi-x-circle text-danger";default:return"bi-bell text-secondary"}},g=e=>{e.action_url&&(window.location.href=e.action_url),h(e.id),s()},p=c.filter(e=>!e.read).length;return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"position-fixed w-100 h-100 top-0 start-0",style:{backgroundColor:"rgba(0,0,0,0.3)",zIndex:1040},onClick:s}),(0,i.jsxs)("div",{className:"position-fixed bg-white border shadow-lg",style:{top:"70px",right:"20px",width:"400px",maxHeight:"600px",zIndex:1050,borderRadius:"8px"},children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 border-bottom",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("h5",{className:"mb-0 fw-bold",children:"通知"}),p>0&&(0,i.jsx)("span",{className:"badge bg-danger ms-2",children:p})]}),(0,i.jsxs)("div",{className:"d-flex gap-2",children:[p>0&&(0,i.jsx)("button",{onClick:b,className:"btn btn-outline-primary btn-sm",title:"すべて既読にする",children:(0,i.jsx)("i",{className:"bi bi-check2-all"})}),(0,i.jsx)("button",{onClick:s,className:"btn btn-outline-secondary btn-sm",title:"閉じる",children:(0,i.jsx)("i",{className:"bi bi-x"})})]})]}),(0,i.jsx)("div",{className:"overflow-auto",style:{maxHeight:"500px"},children:d?(0,i.jsx)("div",{className:"d-flex justify-content-center p-4",children:(0,i.jsx)("div",{className:"spinner-border spinner-border-sm"})}):0===c.length?(0,i.jsxs)("div",{className:"text-center p-4 text-muted",children:[(0,i.jsx)("i",{className:"bi bi-bell-slash fs-2 d-block mb-2"}),(0,i.jsx)("p",{className:"mb-0",children:"通知はありません"})]}):c.map(e=>(0,i.jsx)("div",{className:"p-3 border-bottom ".concat(e.read?"":"bg-light"),children:(0,i.jsx)("div",{className:"d-flex justify-content-between align-items-start",children:(0,i.jsxs)("div",{className:"flex-grow-1",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[(0,i.jsx)("i",{className:"".concat(f(e.type)," me-2")}),(0,i.jsx)("h6",{className:"mb-0 fw-medium",children:e.title}),!e.read&&(0,i.jsx)("span",{className:"badge bg-primary ms-2",children:"未読"})]}),(0,i.jsx)("p",{className:"mb-2 text-muted small",children:e.message}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsx)("small",{className:"text-muted",children:new Date(e.created_at).toLocaleString("ja-JP")}),(0,i.jsxs)("div",{className:"d-flex gap-1",children:[e.action_url&&(0,i.jsx)("button",{onClick:()=>g(e),className:"btn btn-outline-primary btn-sm",children:"確認"}),!e.read&&(0,i.jsx)("button",{onClick:()=>h(e.id),className:"btn btn-outline-secondary btn-sm",children:"既読"}),(0,i.jsx)("button",{onClick:()=>u(e.id),className:"btn btn-outline-danger btn-sm",children:"削除"})]})]})]})})},e.id))}),c.length>0&&(0,i.jsx)("div",{className:"p-3 border-top bg-light",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{onClick:()=>{window.location.href="/admin/notifications",s()},className:"btn btn-outline-primary btn-sm",children:"すべての通知を表示"})})})]})]}):null}let o=[{href:"/admin",label:"ダッシュボード",icon:"bi-speedometer2",description:"概要とメトリクス"},{href:"/admin/reservations",label:"予約管理",icon:"bi-calendar-check",description:"予約の確認と管理"},{href:"/admin/products",label:"商品管理",icon:"bi-box-seam",description:"商品と在庫の管理"},{href:"/admin/customers",label:"顧客管理",icon:"bi-people",description:"顧客情報の管理"},{href:"/admin/forms",label:"フォーム管理",icon:"bi-file-earmark-text",description:"予約フォームの設定"},{href:"/admin/notifications",label:"通知管理",icon:"bi-bell",description:"通知とメッセージ"}];function d(e){var t;let{children:s}=e,[l,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),g=(0,r.usePathname)();(0,n.useEffect)(()=>{let e=()=>{x(window.innerWidth>=992)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let p=e=>"/admin"===e?"/admin"===g:g.startsWith(e);return(0,i.jsxs)("div",{className:"d-flex",children:[l&&(0,i.jsx)("div",{className:"position-fixed w-100 h-100 d-lg-none",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:1040},onClick:()=>d(!1)}),(0,i.jsx)("nav",{className:"bg-white border-end shadow-sm position-fixed ".concat(l?"d-block":"d-none d-lg-block"),style:{width:"280px",height:"100vh",zIndex:1030,left:0,top:0,background:"linear-gradient(180deg, #7cb342 0%, #8bc34a 100%)"},children:(0,i.jsxs)("div",{className:"d-flex flex-column h-100",children:[(0,i.jsx)("div",{className:"p-4 border-bottom border-white border-opacity-25",children:(0,i.jsx)(a.default,{href:"/admin",className:"text-decoration-none",children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("div",{className:"rounded-3 p-2 me-3",style:{background:"rgba(255, 255, 255, 0.2)"},children:(0,i.jsx)("i",{className:"bi bi-flower3 text-white fs-4"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"mb-0 text-white fw-bold",children:"ベジライス"}),(0,i.jsx)("small",{className:"text-white text-opacity-75",children:"予約管理システム"})]})]})})}),(0,i.jsx)("div",{className:"flex-grow-1 overflow-auto",children:(0,i.jsx)("ul",{className:"nav flex-column",children:o.map(e=>(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsxs)(a.default,{href:e.href,className:"nav-link d-flex align-items-center py-3 px-4 text-decoration-none ".concat(p(e.href)?"bg-white bg-opacity-25 text-white border-end border-white border-3":"text-white text-opacity-75 hover:bg-white hover:bg-opacity-10"),onClick:()=>d(!1),children:[(0,i.jsx)("i",{className:"".concat(e.icon," me-3")}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-medium",children:e.label}),(0,i.jsx)("small",{className:"".concat(p(e.href)?"text-white text-opacity-75":"text-white text-opacity-50"," d-block"),children:e.description})]})]})},e.href))})}),(0,i.jsx)("div",{className:"p-4 border-top border-white border-opacity-25",children:(0,i.jsxs)("div",{className:"d-flex align-items-center text-white text-opacity-75",children:[(0,i.jsx)("i",{className:"bi bi-person-circle me-2"}),(0,i.jsx)("small",{children:"管理者"})]})})]})}),(0,i.jsxs)("main",{className:"flex-grow-1",style:{marginLeft:"280px",minHeight:"100vh",background:"linear-gradient(135deg, #f1f8e9 0%, #e8f5e8 100%)"},children:[(0,i.jsx)("header",{className:"border-bottom shadow-sm sticky-top",style:{height:"64px",zIndex:1020,background:"linear-gradient(90deg, #8bc34a 0%, #7cb342 100%)"},children:(0,i.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100 h-100 px-4",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)("button",{className:"btn btn-light d-lg-none me-3",onClick:()=>d(!l),children:(0,i.jsx)("i",{className:"bi bi-list fs-4 text-white"})}),(0,i.jsx)("h4",{className:"mb-0 text-white fw-bold",children:(null===(t=o.find(e=>p(e.href)))||void 0===t?void 0:t.label)||"ダッシュボード"})]}),(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsxs)("button",{onClick:()=>{b(!0)},className:"btn btn-outline-light text-white me-3 position-relative border-white",title:"通知を確認",children:[(0,i.jsx)("i",{className:"bi bi-bell fs-5"}),(0,i.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.6rem"},children:"3"})]}),(0,i.jsx)("button",{onClick:()=>{f(!0),window.location.href="/admin/settings"},className:"btn btn-outline-light text-white border-white",title:"設定",children:(0,i.jsx)("i",{className:"bi bi-gear fs-5"})})]})]})}),(0,i.jsx)("div",{className:"p-4",style:{background:"transparent"},children:s})]}),(0,i.jsx)(c,{isOpen:h,onClose:()=>b(!1)})]})}},6882:function(e,t,s){s.d(t,{JO:function(){return ek},PJ:function(){return ev}});var i=s(7437),n=s(9397),a=s(4630),r=s(8930),l=s(2489),c=s(3229),o=s(8867),d=s(3247),m=s(740),x=s(9076),h=s(2660),b=s(6858),u=s(2451),f=s(407),g=s(875),p=s(8293),Z=s(7684),w=s(2369),j=s(5805),N=s(9663),v=s(7692),y=s(1047),k=s(1723),I=s(8736),C=s(804),z=s(2735),S=s(7689),J=s(4794),O=s(6275),P=s(8226),_=s(5252),E=s(3041),D=s(9345),T=s(8335),X=s(8919),L=s(2718),M=s(3774),W=s(2048),H=s(7877),V=s(5302),q=s(5131),F=s(3639),G=s(3245),R=s(112),Y=s(2208),A=s(7769),B=s(5884),U=s(4415),Q=s(6337),K=s(9711),$=s(1567),ee=s(91),et=s(8728),es=s(9637),ei=s(7586),en=s(1473),ea=s(4766),er=s(2252),el=s(7404),ec=s(3057),eo=s(2879),ed=s(9547),em=s(9646),ex=s(5929),eh=s(1341),eb=s(6540),eu=s(6595),ef=s(8997),eg=s(8896),ep=s(2720),eZ=s(1178),ew=s(7414),ej=s(401),eN=s(3388);let ev={add:n.Z,edit:a.Z,delete:r.Z,remove:l.Z,save:c.Z,copy:o.Z,search:d.Z,filter:m.Z,refresh:x.Z,back:h.Z,forward:b.Z,up:u.Z,down:f.Z,chevronDown:g.Z,menu:p.Z,more:Z.Z,user:w.Z,users:j.Z,profile:N.Z,logout:v.Z,calendar:y.Z,clock:k.Z,file:I.Z,document:I.Z,image:C.Z,download:z.Z,upload:S.Z,product:J.Z,cart:O.Z,payment:P.Z,money:_.Z,phone:E.Z,mail:D.Z,link:T.Z,share:X.Z,message:L.Z,location:M.Z,map:W.Z,navigation:H.Z,success:V.Z,error:q.Z,warning:F.Z,info:G.Z,help:R.Z,eye:Y.Z,eyeOff:A.Z,show:Y.Z,hide:A.Z,expand:B.Z,collapse:U.Z,lock:Q.Z,unlock:K.Z,security:Q.Z,exit:v.Z,chart:$.Z,stats:$.Z,database:ee.Z,settings:et.Z,admin:et.Z,config:et.Z,home:es.Z,dashboard:es.Z,list:ei.Z,grid:en.Z,notification:ea.Z,alert:er.Z,qrcode:el.Z,plant:ec.Z,seed:J.Z,flower:eo.Z,tree:ec.Z,leaf:ed.Z,garden:em.Z,sun:ex.Z,cloud:eh.Z,rain:eh.Z,weather:ex.Z,loading:eb.Z,spinner:x.Z,star:eu.Z,heart:ef.Z,target:eg.Z,tag:ep.Z,bookmark:eZ.Z,gift:ew.Z,check:ej.Z,cancel:l.Z,confirm:V.Z,customerInfo:w.Z,reservationInfo:y.Z,otherInfo:I.Z,packageIcon:J.Z,mobileIcon:eN.Z,saveIcon:c.Z,qrIcon:el.Z,searchIcon:d.Z,deleteIcon:r.Z,closeIcon:l.Z,moneyIcon:_.Z},ey={xs:12,sm:16,md:20,lg:24,xl:32,"2xl":48},ek=e=>{let{icon:t,size:s="md",className:n="",color:a,...r}=e,l="number"==typeof s?s:ey[s];return(0,i.jsx)(t,{width:l,height:l,className:n,color:a,...r})}},9703:function(e,t,s){s.d(t,{ToastProvider:function(){return d},p:function(){return o}});var i=s(7437),n=s(2265),a=s(6882);let r=e=>{let{id:t,type:s,title:r,message:l,duration:c=5e3,onClose:o}=e;return(0,n.useEffect)(()=>{let e=setTimeout(()=>{o(t)},c);return()=>clearTimeout(e)},[t,c,o]),(0,i.jsx)("div",{className:"rounded-lg p-4 border shadow-lg max-w-sm w-full transition-all duration-300 ".concat((()=>{switch(s){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}})()),children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(s){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-gray-500"}})()),children:(0,i.jsx)(a.JO,{icon:(()=>{switch(s){case"success":return a.PJ.success;case"error":return a.PJ.error;case"warning":return a.PJ.warning;default:return a.PJ.info}})(),size:"md"})}),(0,i.jsxs)("div",{className:"ml-3 flex-1",children:[(0,i.jsx)("h3",{className:"text-sm font-medium",children:r}),l&&(0,i.jsx)("p",{className:"text-sm mt-1",children:l})]}),(0,i.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,i.jsx)("button",{onClick:()=>o(t),className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none",children:(0,i.jsx)(a.JO,{icon:a.PJ.cancel,size:"sm"})})})]})})},l=e=>{let{toasts:t,onRemoveToast:s}=e;return(0,i.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,i.jsx)(r,{id:e.id,type:e.type,title:e.title,message:e.message,duration:e.duration,onClose:s},e.id))})},c=(0,n.createContext)(void 0),o=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useToast must be used within a ToastProvider");return e},d=e=>{let{children:t}=e,[s,a]=(0,n.useState)([]),r=e=>{let t=Math.random().toString(36).substr(2,9),s={...e,id:t};a(e=>[...e,s])};return(0,i.jsxs)(c.Provider,{value:{showToast:r,showSuccess:(e,t)=>{r({type:"success",title:e,message:t})},showError:(e,t)=>{r({type:"error",title:e,message:t})},showWarning:(e,t)=>{r({type:"warning",title:e,message:t})},showInfo:(e,t)=>{r({type:"info",title:e,message:t})}},children:[t,(0,i.jsx)(l,{toasts:s,onRemoveToast:e=>{a(t=>t.filter(t=>t.id!==e))}})]})}},2141:function(e,t,s){s.d(t,{O:function(){return i}});let i=(0,s(6580).eI)("https://uscvsipskkbegcfktjyt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVzY3ZzaXBza2tiZWdjZmt0anl0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI0MDI4MzUsImV4cCI6MjA2Nzk3ODgzNX0.VhcGWXb-PpHTfqPApSIG4C6xXLik8JClsNhOdJIgdzw")}}]);