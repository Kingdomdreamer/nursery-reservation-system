# Requirements Document

## Introduction

LINE LIFF（LINE Front-end Framework）を活用した顧客向け予約フォームアプリケーションです。このアプリケーションは、LINE上で動作し、ユーザーが商品を選択して予約を行い、管理者が予約を管理できる機能を提供します。フォームの設定はプリセットによって柔軟に変更可能で、商品ごとに引き取り日を設定できます。

## Requirements

### Requirement 1

**User Story:** LINEユーザーとして、LINEアプリ内で商品予約フォームにアクセスし、必要な情報を入力して予約を完了したい。そうすることで、店舗に行かなくても簡単に予約ができる。

#### Acceptance Criteria

1. WHEN ユーザーがLINEからLIFFアプリを開く THEN システムはLINEログイン状態を確認し、未ログインの場合はログインを促すSHALL
2. WHEN ユーザーがフォームを開く THEN システムはユーザーのLINE IDを自動取得してフォームに紐づけるSHALL
3. WHEN ユーザーが必須情報（名前、電話番号）を入力せずに送信しようとする THEN システムはエラーメッセージを表示するSHALL
4. WHEN ユーザーが全ての必須情報を入力して送信する THEN システムは確認画面に遷移するSHALL
5. WHEN ユーザーが確認画面で「予約を確定する」をクリックする THEN システムは予約情報をデータベースに保存し、完了画面に遷移するSHALL
6. WHEN 予約が完了する THEN システムはLINEメッセージで予約確認通知をユーザーに送信するSHALL

### Requirement 2

**User Story:** 店舗管理者として、フォームの設定を柔軟に変更したい。そうすることで、必要に応じて収集する情報や表示内容をカスタマイズできる。

#### Acceptance Criteria

1. WHEN 管理者がフォーム設定を変更する THEN システムは設定に基づいてフォームの表示/非表示項目を制御するSHALL
2. IF フォーム設定で「住所必須」が有効 THEN システムは住所入力フィールドを表示するSHALL
3. IF フォーム設定で「性別表示」が有効 THEN システムは性別選択フィールドを表示するSHALL
4. IF フォーム設定で「生年月日表示」が有効 THEN システムは生年月日入力フィールドを表示するSHALL
5. IF フォーム設定で「ふりがな表示」が有効 THEN システムはふりがな入力フィールドを表示するSHALL
6. IF フォーム設定で「価格表示」が有効 THEN システムは商品価格と合計金額を表示するSHALL
7. IF フォーム設定で「有効期限」が設定されている THEN システムは期限切れの場合にフォームを無効化するSHALL

### Requirement 3

**User Story:** ユーザーとして、複数の商品を選択し、それぞれに数量を指定して予約したい。そうすることで、一度の操作で複数の商品を予約できる。

#### Acceptance Criteria

1. WHEN ユーザーがフォームを開く THEN システムは利用可能な商品リストを表示するSHALL
2. WHEN ユーザーが商品の数量を変更する THEN システムは選択された商品と数量を記録するSHALL
3. WHEN ユーザーが商品を選択する THEN システムはその商品のカテゴリに応じた引き取り日選択オプションを提供するSHALL
4. WHEN ユーザーが確認画面に進む THEN システムは選択された商品、数量、価格（表示設定の場合）を表示するSHALL
5. WHEN 数量が0の商品がある THEN システムは確認画面でその商品を表示しないSHALL

### Requirement 4

**User Story:** 管理者として、予約情報を一覧で確認し、日別・週別・月別に管理したい。そうすることで、効率的に予約状況を把握し業務計画を立てられる。

#### Acceptance Criteria

1. WHEN 管理者が管理画面にアクセスする THEN システムは本日の予約一覧を表示するSHALL
2. WHEN 管理者が週間サマリーを確認する THEN システムは今週の予約概要を表示するSHALL
3. WHEN 管理者が月間カレンダーを確認する THEN システムは月ごとの予約状況をカレンダー形式で表示するSHALL
4. WHEN 予約情報が更新される THEN システムは管理画面の情報をリアルタイムで更新するSHALL

### Requirement 5

**User Story:** システム管理者として、商品や引き取り期間の設定を管理したい。そうすることで、季節や在庫状況に応じて予約可能な商品を調整できる。

#### Acceptance Criteria

1. WHEN 管理者が商品マスタを更新する THEN システムは更新された商品情報をフォームに反映するSHALL
2. WHEN 管理者が引き取り可能期間を設定する THEN システムはその期間内の日付のみを選択可能にするSHALL
3. WHEN 管理者が商品ごとに異なる引き取り期間を設定する THEN システムは商品カテゴリに応じた日付選択肢を提供するSHALL
4. WHEN 管理者がフォームの有効/無効を切り替える THEN システムはフォームの利用可否状態を即時に反映するSHALL